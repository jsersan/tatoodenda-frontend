{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/components/admin/admin.component.ts","./src/app/components/admin/admin.component.html","./src/app/components/admin/category-manager/category-manager.component.ts","./src/app/components/admin/category-manager/category-manager.component.html","./src/app/components/admin/product-manager/product-manager.component.ts","./src/app/components/admin/product-manager/product-manager.component.html","./src/app/components/banner/banner.component.ts","./src/app/components/banner/banner.component.html","./src/app/components/cart/cart.component.ts","./src/app/components/cart/cart.component.html","./src/app/components/checkout/checkout.component.ts","./src/app/components/checkout/checkout.component.html","./src/app/components/historial-pedidos/historial-pedidos.component.ts","./src/app/components/historial-pedidos/historial-pedidos.component.html","./src/app/components/home/home.component.ts","./src/app/components/home/home.component.html","./src/app/components/login-popup/login-popup.component.ts","./src/app/components/login-popup/login-popup.component.html","./src/app/components/orderline/orderline.component.ts","./src/app/components/orderline/orderline.component.html","./src/app/components/password-confirm-modal/password-confirm-modal.ts","./src/app/components/password-confirm-modal/password-confirm-modal.html","./src/app/components/product/product-detail/product-detail.component.ts","./src/app/components/product/product-detail/product-detail.component.html","./src/app/components/product/product-list/product-list.component.ts","./src/app/components/product/product-list/product-list.component.html","./src/app/components/product/product-popup/product-popup.component.ts","./src/app/components/product/product-popup/product-popup.component.html","./src/app/components/product/search-results/search-results.component.ts","./src/app/components/product/search-results/search-results.component.html","./src/app/components/registro-popup/registro-popup.component.ts","./src/app/components/registro-popup/registro-popup.component.html","./src/app/components/shared/footer/footer.component.ts","./src/app/components/shared/footer/footer.component.html","./src/app/components/shared/header/header.component.ts","./src/app/components/shared/header/header.component.html","./src/app/components/shared/navbar/navbar.component.ts","./src/app/components/shared/navbar/navbar.component.html","./src/app/components/user/profile/profile.component.ts","./src/app/components/user/profile/profile.component.html","./src/app/guards/auth.guard.ts","./src/app/helpers/product-image-helper.ts","./src/app/interceptors/auth.interceptor.ts","./src/app/interceptors/error.interceptor.ts","./src/app/models/order.ts","./src/app/pipes/image-url.pipe.ts","./src/app/services/auth.service.ts","./src/app/services/cart.service.ts","./src/app/services/category.service.ts","./src/app/services/login-popup.service.ts","./src/app/services/order.service.ts","./src/app/services/pdf.service.ts","./src/app/services/product.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["// src/app/app-routing.module.ts - ARCHIVO COMPLETO\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\n// Importar el guard de autenticacin\nimport { AuthGuard } from './guards/auth.guard';\n\n// Importar componentes\nimport { HomeComponent } from './components/home/home.component';\nimport { CheckoutComponent } from './components/checkout/checkout.component';\nimport { ProfileComponent } from './components/user/profile/profile.component';\nimport { ProductListComponent } from './components/product/product-list/product-list.component';\nimport { ProductDetailComponent } from './components/product/product-detail/product-detail.component';\nimport { SearchResultsComponent } from './components/product/search-results/search-results.component';\nimport { HistorialPedidosComponent } from './components/historial-pedidos/historial-pedidos.component';\n\nconst routes: Routes = [\n  // ================================\n  //  RUTAS PBLICAS (sin autenticacin)\n  // ================================\n  \n  // Pgina principal\n  { \n    path: '', \n    component: HomeComponent,\n    data: { title: 'Inicio - TatooDenda' }\n  },\n  \n  // Alias para home\n  { \n    path: 'home', \n    redirectTo: '', \n    pathMatch: 'full' \n  },\n  \n  // Productos (pblicos - los usuarios pueden ver sin login)\n  { \n    path: 'products', \n    component: ProductListComponent,\n    data: { title: 'Productos - TatooDenda' }\n  },\n  \n  { \n    path: 'productos', // Alias en espaol\n    redirectTo: 'products',\n    pathMatch: 'full'\n  },\n  \n  { \n    path: 'product/:id', \n    component: ProductDetailComponent,\n    data: { title: 'Detalle Producto - TatooDenda' }\n  },\n  \n  { \n    path: 'producto/:id', // Alias en espaol\n    redirectTo: 'product/:id'\n  },\n  \n  // Si tienes categoras como rutas\n  { \n    path: 'category/:id', \n    component: ProductListComponent,\n    data: { title: 'Categora - TatooDenda' }\n  },\n\n  // Ver todo\n  { \n    path: 'ver-todo', \n    component: ProductListComponent,\n    data: { title: 'Ver Todo - TatooDenda', isViewAll: true }\n  },\n\n  // Bsqueda\n  { \n    path: 'search', \n    component: SearchResultsComponent,\n    data: { title: 'Resultados de Bsqueda - TatooDenda' }\n  },\n\n    // Historial de Pedidos\n\n    { \n      path: 'historial', \n      component: HistorialPedidosComponent,\n      data: { title: 'Historial de Pedidos - TatooDenda' } \n    },\n  \n\n  // ================================\n  //  RUTAS PROTEGIDAS (requieren autenticacin)\n  // ================================\n  \n  // Checkout - REQUIERE LOGIN\n  { \n    path: 'checkout', \n    component: CheckoutComponent,\n    canActivate: [AuthGuard], //  Guard de autenticacin\n    data: { \n      title: 'Checkout - TatooDenda',\n      requiresAuth: true \n    }\n  },  \n  // Perfil de usuario - REQUIERE LOGIN\n  { \n    path: 'profile', \n    component: ProfileComponent,\n    canActivate: [AuthGuard], //  Guard de autenticacin\n    data: { \n      title: 'Mi Perfil - TatooDenda',\n      requiresAuth: true \n    }\n  },\n  \n  // Mis pedidos - REQUIERE LOGIN\n  { \n    path: 'orders', \n    component: ProfileComponent, // O crear OrderListComponent si lo tienes separado\n    canActivate: [AuthGuard], //  Guard de autenticacin\n    data: { \n      title: 'Mis Pedidos - TatooDenda',\n      requiresAuth: true \n    }\n  },\n  \n  // Alias en espaol para pedidos\n  { \n    path: 'pedidos', \n    redirectTo: 'orders',\n    pathMatch: 'full'\n  },\n\n  // ================================\n  //  REDIRECCIONES PARA LOGIN/REGISTRO\n  // ================================\n  \n  //  Redirigir cualquier intento de acceso a login/register  home\n  { path: 'login', redirectTo: '', pathMatch: 'full' },\n  { path: 'register', redirectTo: '', pathMatch: 'full' },\n  { path: 'Login', redirectTo: '', pathMatch: 'full' },\n  { path: 'Register', redirectTo: '', pathMatch: 'full' },\n  { path: 'Checkout', redirectTo: 'checkout', pathMatch: 'full' },\n  { path: 'Profile', redirectTo: 'profile', pathMatch: 'full' },\n  \n  // ================================\n  //  CATCH-ALL\n  // ================================\n  \n  // Catch-all route - DEBE IR AL FINAL\n  { \n    path: '**', \n    redirectTo: '',\n    data: { title: 'Pgina no encontrada - TatooDenda' }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, {\n    // Opciones adicionales del router\n    enableTracing: false, // Solo para debugging, cambiar a false en produccin\n    scrollPositionRestoration: 'top', // Scroll al top en cambio de ruta\n    anchorScrolling: 'enabled', // Habilitar scroll a anclas\n    onSameUrlNavigation: 'reload' // Recargar si se navega a la misma URL\n  })],\n  exports: [RouterModule],\n  providers: [\n    // Asegurar que el guard est disponible\n    AuthGuard\n  ]\n})\nexport class AppRoutingModule { \n\n  constructor() {\n    console.log(' AppRoutingModule inicializado');\n    console.log(' Rutas protegidas: /checkout, /profile, /orders');\n    console.log(' Rutas pblicas: /, /products, /product/:id, /category/:id');\n    console.log(' Rutas de login/register redirigidas a home');\n  }\n}","// app.component.ts - ARCHIVO COMPLETO\n\nimport { Component, OnInit } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { LoginPopupService, LoginPopupState } from './services/login-popup.service';\nimport { filter } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  title = 'ecommerce-app';\n\n  //  Control de popups\n  showLoginPopup = false;\n  loginReturnUrl = '';\n  loginFromCheckout = false;\n  showRegistroPopup = false;\n\n  constructor(\n    private router: Router,\n    private loginPopupService: LoginPopupService\n  ) {\n    console.log(' AppComponent inicializado');\n  }\n\n  ngOnInit(): void {\n    // Suscribirse al servicio de login popup con tipo explcito\n    this.loginPopupService.loginPopupState$.subscribe((state: LoginPopupState) => {\n      console.log(' Estado de login popup cambi:', state);\n      this.showLoginPopup = state.isOpen;\n      this.loginReturnUrl = state.returnUrl;\n      this.loginFromCheckout = state.fromCheckout;\n    });\n\n    // Scroll al inicio en cada navegacin\n    this.router.events\n      .pipe(filter(event => event instanceof NavigationEnd))\n      .subscribe(() => {\n        window.scrollTo(0, 0);\n      });\n  }\n\n  /**\n   * Cerrar popup de login\n   */\n  onLoginPopupClose(): void {\n    console.log(' Cerrando popup de login');\n    this.showLoginPopup = false;\n    this.loginPopupService.close();\n  }\n\n  /**\n   * Login exitoso\n   */\n  onLoginSuccess(returnUrl: string): void {\n    console.log(' Login exitoso, navegando a:', returnUrl);\n    this.showLoginPopup = false;\n    \n    if (returnUrl && returnUrl !== '/') {\n      this.router.navigate([returnUrl]);\n    }\n  }\n\n  /**\n   * Cambiar de login a registro\n   */\n  onSwitchToRegister(): void {\n    console.log(' Cambiando de login a registro');\n    this.showLoginPopup = false;\n    setTimeout(() => {\n      this.showRegistroPopup = true;\n    }, 200);\n  }\n\n  /**\n   * Cerrar popup de registro\n   */\n  onCloseRegistroPopup(): void {\n    console.log(' Cerrando popup de registro');\n    this.showRegistroPopup = false;\n  }\n\n  /**\n   * Registro exitoso\n   */\n  onRegistroSuccess(): void {\n    console.log(' Registro exitoso');\n    this.showRegistroPopup = false;\n    \n    // Abrir login despus de un pequeo delay\n    setTimeout(() => {\n      this.showLoginPopup = true;\n    }, 500);\n  }\n\n  /**\n   * Cambiar de registro a login\n   */\n  onSwitchToLogin(): void {\n    console.log(' Cambiando de registro a login');\n    this.showRegistroPopup = false;\n    setTimeout(() => {\n      this.showLoginPopup = true;\n    }, 200);\n  }\n}","<!-- app.component.html - ARCHIVO COMPLETO -->\n\n<!-- Componente de encabezado que contiene el ttulo de la tienda -->\n<app-header></app-header>\n\n<!-- Componente de barra de navegacin con mens y opciones -->\n<app-navbar></app-navbar>\n\n<!-- Componente de banner rotativo que ahora aparece en todas las pginas -->\n<app-banner></app-banner>\n\n<!-- El enrutador de Angular que cargar dinmicamente los componentes segn la URL -->\n<router-outlet></router-outlet>\n\n<!-- Componente de pie de pgina con informacin de contacto y enlaces -->\n<app-footer></app-footer>\n\n<!-- Componente de cart-popup para mostrar el carrito de compras -->\n<app-cart></app-cart>\n\n<!--  Login Popup - Se muestra cuando el guard lo requiere -->\n<app-login-popup \n  [isVisible]=\"showLoginPopup\"\n  [returnUrl]=\"loginReturnUrl\" \n  [fromCheckout]=\"loginFromCheckout\"\n  (closePopup)=\"onLoginPopupClose()\"\n  (loginSuccess)=\"onLoginSuccess($event)\"\n  (switchToRegistro)=\"onSwitchToRegister()\">\n</app-login-popup>\n\n<!--  Registro Popup -->\n<app-registro-popup \n  [isVisible]=\"showRegistroPopup\"\n  (closePopup)=\"onCloseRegistroPopup()\"\n  (registroSuccess)=\"onRegistroSuccess()\"\n  (switchToLogin)=\"onSwitchToLogin()\">\n</app-registro-popup>","// src/app/app.module.ts - ARCHIVO COMPLETO ACTUALIZADO\n\nimport { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { AppRoutingModule } from './app-routing.module';\n\n// Importar los interceptors\nimport { AuthInterceptor } from './interceptors/auth.interceptor';\nimport { ErrorInterceptor } from './interceptors/error.interceptor';\n\n// Componentes principales y compartidos\nimport { AppComponent } from './app.component';\nimport { NavbarComponent } from './components/shared/navbar/navbar.component';\nimport { FooterComponent } from './components/shared/footer/footer.component';\nimport { HomeComponent } from './components/home/home.component';\nimport { ProductListComponent } from './components/product/product-list/product-list.component';\nimport { ProductDetailComponent } from './components/product/product-detail/product-detail.component';\nimport { ProductPopupComponent } from './components/product/product-popup/product-popup.component';\nimport { CartComponent } from './components/cart/cart.component';\nimport { CheckoutComponent } from './components/checkout/checkout.component';\nimport { AdminComponent } from './components/admin/admin.component';\nimport { CategoryManagerComponent } from './components/admin/category-manager/category-manager.component';\nimport { ProductManagerComponent } from './components/admin/product-manager/product-manager.component';\nimport { SearchResultsComponent } from './components/product/search-results/search-results.component';\nimport { ProfileComponent } from './components/user/profile/profile.component';\nimport { OrderLineComponent } from './components/orderline/orderline.component';\nimport { BannerComponent } from './components/banner/banner.component';\nimport { HeaderComponent } from './components/shared/header/header.component';\nimport { ImageUrlPipe } from './pipes/image-url.pipe';\n\n//  Componentes modales y popups\nimport { LoginPopupComponent } from './components/login-popup/login-popup.component';\nimport { RegistroPopupComponent } from './components/registro-popup/registro-popup.component';\nimport { HistorialPedidosComponent } from './components/historial-pedidos/historial-pedidos.component';\nimport { PasswordConfirmModalComponent } from './components/password-confirm-modal/password-confirm-modal';\n\n// Servicios\nimport { PdfService } from './services/pdf.service';\n\n@NgModule({\n  declarations: [\n    ImageUrlPipe,\n    AppComponent,\n    NavbarComponent,\n    FooterComponent,\n    HomeComponent,\n    ProductListComponent,\n    ProductDetailComponent,\n    ProductPopupComponent,\n    CartComponent,\n    CheckoutComponent,\n    AdminComponent,\n    CategoryManagerComponent,\n    ProductManagerComponent,\n    SearchResultsComponent,\n    ProfileComponent,\n    OrderLineComponent,\n    BannerComponent,\n    HeaderComponent,\n    //  Modales y popups\n    LoginPopupComponent,\n    RegistroPopupComponent,\n    HistorialPedidosComponent,\n    PasswordConfirmModalComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule\n  ],\n  providers: [\n    //  Interceptors (el orden importa: primero Auth, luego Error)\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true },\n    { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true },\n    // Servicios\n    PdfService\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }","// Importacin bsica de Component desde Angular\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-admin',\n  templateUrl: './admin.component.html',\n  styleUrls: ['./admin.component.scss']\n})\nexport class AdminComponent {\n  constructor() { }\n}","<div id=\"divadmin\">\n    <h1 id=\"titulo\">Administrador</h1>\n    <nav class=\"admin-nav\">\n      <ul>\n        <li routerLinkActive=\"active\"><a routerLink=\"categories\">Administrar Categoras</a></li>\n        <li routerLinkActive=\"active\"><a routerLink=\"products\">Administrar Productos</a></li>\n      </ul>\n    </nav>\n    <router-outlet></router-outlet>\n  </div>","// src/app/components/admin/category-manager/category-manager.component.ts\nimport { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Category } from '../../../models/category';\nimport { CategoryService } from '../../../services/category.service';\n\n@Component({\n  selector: 'app-category-manager',\n  templateUrl: './category-manager.component.html',\n  styleUrls: []\n})\nexport class CategoryManagerComponent implements OnInit {\n  categories: Category[] = [];\n  categoryForm: FormGroup;\n  editMode: boolean = false;\n  selectedCategoryId: number | null = null;\nerror: any;\nloading: any;\nsuccess: any;\n  \n  constructor(\n    private fb: FormBuilder,\n    private categoryService: CategoryService\n  ) {\n    this.categoryForm = this.createForm();\n  }\n\n  ngOnInit(): void {\n    this.loadCategories();\n  }\n  \n  // Cargar categoras desde el servicio\n  loadCategories(): void {\n    this.categoryService.getCategories().subscribe({\n      next: (categories) => {\n        this.categories = categories;\n      },\n      error: (error) => {\n        console.error('Error al cargar categoras:', error);\n        alert('Error al cargar las categoras. Por favor, intente nuevamente.');\n      }\n    });\n  }\n  \n  // Crear formulario para categora\n  createForm(): FormGroup {\n    return this.fb.group({\n      nombre: ['', [Validators.required, Validators.minLength(2)]],\n      padre: [0], // 0 para categoras principales\n      descripcion: [''],\n      tipo: ['']\n    });\n  }\n  \n  // Mtodo para manejar el envo del formulario\n  onSubmit(): void {\n    if (this.categoryForm.valid) {\n      if (this.editMode && this.selectedCategoryId) {\n        // Actualizar categora existente\n        this.updateCategory();\n      } else {\n        // Crear nueva categora\n        this.createCategory();\n      }\n    } else {\n      // Marcar todos los campos como tocados para mostrar errores\n      Object.keys(this.categoryForm.controls).forEach(key => {\n        this.categoryForm.get(key)?.markAsTouched();\n      });\n    }\n  }\n  \n  // Mtodo para crear una nueva categora\n  createCategory(): void {\n    const categoryData: Category = {\n      id: 0, // El backend asignar un ID real\n      nombre: this.categoryForm.value.nombre,\n      padre: this.categoryForm.value.padre || 0,\n      descripcion: this.categoryForm.value.descripcion || '',\n      tipo: this.categoryForm.value.tipo || ''\n    };\n    \n    // En tu mtodo de clase\n  this.categoryService.addCategory(categoryData).subscribe({\n  next: (createdCategory: Category) => {\n    // Tu cdigo actual aqu\n  },\n  error: (error: any) => {\n    // Tu cdigo actual aqu\n  }\n});\n  }\n  \n  // Mtodo para editar una categora\n  editCategory(category: Category): void {\n    this.editMode = true;\n    this.selectedCategoryId = category.id;\n    \n    this.categoryForm.setValue({\n      nombre: category.nombre,\n      padre: category.padre || 0,\n      descripcion: category.descripcion || '',\n      tipo: category.tipo || ''\n    });\n  }\n  \n  // Mtodo para actualizar una categora existente\n  updateCategory(): void {\n    if (!this.selectedCategoryId) return;\n    \n    const categoryData: Partial<Category> = {\n      nombre: this.categoryForm.value.nombre,\n      padre: this.categoryForm.value.padre,\n      descripcion: this.categoryForm.value.descripcion,\n      tipo: this.categoryForm.value.tipo\n    };\n    \n    // Validacin para evitar ciclos (categora que es padre de s misma)\n    if (this.selectedCategoryId === categoryData.padre) {\n      alert('Error: Una categora no puede ser padre de s misma.');\n      return;\n    }\n    \n    this.categoryService.updateCategory(this.selectedCategoryId, categoryData).subscribe({\n      next: (updatedCategory) => {\n        console.log('Categora actualizada:', updatedCategory);\n        \n        // Actualizar la categora en el array local\n        const index = this.categories.findIndex(c => c.id === this.selectedCategoryId);\n        if (index !== -1) {\n          this.categories[index] = updatedCategory;\n        }\n        \n        this.resetForm();\n        alert('Categora actualizada con xito.');\n      },\n      error: (error) => {\n        console.error('Error al actualizar categora:', error);\n        alert('Error al actualizar la categora. Por favor, intente nuevamente.');\n      }\n    });\n  }\n  \n  // Mtodo para eliminar una categora\n  deleteCategory(id: number): void {\n    if (confirm('Est seguro de que desea eliminar esta categora? Esta accin no se puede deshacer.')) {\n      this.categoryService.deleteCategory(id).subscribe({\n        next: () => {\n          console.log('Categora eliminada:', id);\n          this.categories = this.categories.filter(c => c.id !== id);\n          alert('Categora eliminada con xito.');\n        },\n        error: (error) => {\n          console.error('Error al eliminar categora:', error);\n          alert('Error al eliminar la categora. Por favor, intente nuevamente.');\n        }\n      });\n    }\n  }\n  \n  // Mtodo para cancelar la edicin\n  cancelEdit(): void {\n    this.resetForm();\n  }\n  \n  // Mtodo para resetear el formulario\n  resetForm(): void {\n    this.categoryForm.reset({\n      nombre: '',\n      padre: 0,\n      descripcion: '',\n      tipo: ''\n    });\n    this.editMode = false;\n    this.selectedCategoryId = null;\n  }\n  \n  // Mtodo para obtener el nombre de la categora padre\n  getParentName(parentId: number | undefined): string {\n    if (!parentId || parentId === 0) return 'Ninguno (Categora principal)';\n    \n    const parent = this.categories.find(c => c.id === parentId);\n    return parent ? parent.nombre : 'Desconocido';\n  }\n}","<div id=\"admincat\">\n  <h1>Categoras</h1>\n  \n  <!-- Seccin para aadir/editar categora -->\n  <div>\n    <h2>{{ editMode ? 'Editar' : 'Aadir' }} categora</h2>\n    <form [formGroup]=\"categoryForm\" (ngSubmit)=\"onSubmit()\">\n      <label>Nombre: </label>\n      <input type=\"text\" id=\"txtnomcat\" formControlName=\"nombre\"/>\n      \n      <label>Padre: </label>\n      <select id=\"selecpadre\" formControlName=\"padre\">\n        <option value=\"\" selected disabled hidden></option>\n        <option value=\"sin\">Sin Padre</option>\n        <option *ngFor=\"let cat of categories\" \n                [value]=\"cat.id\"\n                [disabled]=\"editMode && selectedCategoryId === cat.id\">\n          {{ cat.nombre }}\n        </option>\n      </select>\n      \n      <input type=\"submit\" id=\"btnaniadircat\" [value]=\"editMode ? 'GUARDAR' : 'AADIR'\" />\n      <input *ngIf=\"editMode\" type=\"button\" value=\"CANCELAR\" (click)=\"cancelEdit()\" />\n    </form>\n  </div>\n  \n  <!-- Seccin para listar y administrar categoras existentes -->\n  <div>\n    <h2>Administrar categorias</h2>\n    <div *ngIf=\"loading\">Cargando...</div>\n    <div *ngIf=\"error\" class=\"alert alert-danger\">{{ error }}</div>\n    <div *ngIf=\"success\" class=\"alert alert-success\">{{ success }}</div>\n    \n    <table id=\"editcat\" *ngIf=\"categories.length > 0\">\n      <tr>\n        <th>Nombre</th>\n        <th>Padre</th>\n        <th></th>\n        <th></th>\n      </tr>\n      <tr *ngFor=\"let category of categories\" [id]=\"'cat' + category.id\">\n        <td class=\"catnom\">{{ category.nombre }}</td>\n        <td class=\"catpadre\" [attr.data-id]=\"category.padre\">\n          {{ getParentName(category.padre) }}\n        </td>\n        <td>\n          <input [attr.data-id]=\"category.id\" type=\"button\" class=\"editarcat\" value=\"EDITAR\" \n                (click)=\"editCategory(category)\"/>\n        </td>\n        <td>\n          <input [attr.data-id]=\"category.id\" type=\"button\" class=\"eliminarcat\" value=\"ELIMINAR\" \n                (click)=\"deleteCategory(category.id)\"/>\n        </td>\n      </tr>\n    </table>\n  </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ProductService } from '../../../services/product.service';\nimport { CategoryService } from '../../../services/category.service';\nimport { Product } from '../../../models/product';\nimport { Category } from '../../../models/category';\n\n@Component({\n  selector: 'app-product-manager',\n  templateUrl: './product-manager.component.html',\n  styleUrls: []\n})\nexport class ProductManagerComponent implements OnInit {\n  // Formularios para productos (nombres actualizados para coincidir con HTML)\n  newProductForm: FormGroup; // Cambiado de productForm\n  editProductForm: FormGroup; // Cambiado de editForm\n  \n  // Listados\n  products: Product[] = [];\n  categories: Category[] = [];\n  \n  // Control de UI\n  loading = false;\n  submitting = false;\n  showEditForm = false; // Cambiado de editMode\n  currentProductId: number | null = null;\n  \n  // Control de imgenes\n  selectedFiles: File[] = [];\n  previewUrls: string[] = [];\n\n  constructor(\n    private fb: FormBuilder,\n    private productService: ProductService,\n    private categoryService: CategoryService\n  ) {\n    // Inicializar formularios\n    this.newProductForm = this.fb.group({\n      nombre: ['', [Validators.required, Validators.minLength(3)]],\n      descripcion: ['', Validators.required],\n      precio: [0, [Validators.required, Validators.min(0.01)]],\n      stock: [0, [Validators.required, Validators.min(0)]],\n      categoryId: [null, Validators.required]\n    });\n\n    this.editProductForm = this.fb.group({\n      nombre: ['', [Validators.required, Validators.minLength(3)]],\n      descripcion: ['', Validators.required],\n      precio: [0, [Validators.required, Validators.min(0.01)]],\n      stock: [0, [Validators.required, Validators.min(0)]],\n      categoryId: [null, Validators.required]\n    });\n  }\n\n  ngOnInit(): void {\n    this.loadProducts();\n    this.loadCategories();\n  }\n\n  // Cargar todos los productos\n  loadProducts(): void {\n    this.loading = true;\n    this.productService.getProducts().subscribe({\n      next: (products: Product[]) => {\n        this.products = products;\n        this.loading = false;\n      },\n      error: (error: any) => {\n        console.error('Error al cargar productos:', error);\n        this.loading = false;\n      }\n    });\n  }\n\n  // Cargar categoras para el selector de formulario\n  loadCategories(): void {\n    this.categoryService.getCategories().subscribe({\n      next: (categories: Category[]) => {\n        this.categories = categories;\n      },\n      error: (error: any) => {\n        console.error('Error al cargar categoras:', error);\n      }\n    });\n  }\n\n  // Manejar subida de imgenes (cambiado a onFileSelect para coincidir con HTML)\n  onFileSelect(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    if (input.files) {\n      this.selectedFiles = Array.from(input.files);\n      this.previewUrls = [];\n      \n      this.selectedFiles.forEach(file => {\n        const reader = new FileReader();\n        reader.onload = (e: any) => {\n          this.previewUrls.push(e.target.result);\n        };\n        reader.readAsDataURL(file);\n      });\n    }\n  }\n\n  // Mtodo para aadir un nuevo producto (cambiado a addProduct para coincidir con HTML)\n  addProduct(): void {\n    if (this.newProductForm.invalid) {\n      return;\n    }\n\n    this.submitting = true;\n    const newProduct: Product = this.newProductForm.value;\n\n    this.productService.addProduct(newProduct).subscribe({\n      next: (createdProduct: Product) => {\n        console.log('Producto creado:', createdProduct);\n        \n        // Si hay archivos seleccionados, subir imgenes\n        if (this.selectedFiles.length > 0) {\n          this.productService.uploadProductImages(createdProduct.id, this.selectedFiles).subscribe({\n            next: (result: any) => {\n              console.log('Imgenes subidas:', result);\n              this.resetForm();\n              this.loadProducts();\n              this.submitting = false;\n            },\n            error: (error: any) => {\n              console.error('Error al subir imgenes:', error);\n              // An consideramos que el producto se cre correctamente\n              this.resetForm();\n              this.loadProducts();\n              this.submitting = false;\n            }\n          });\n        } else {\n          // Si no hay imgenes, simplemente terminamos\n          this.resetForm();\n          this.loadProducts();\n          this.submitting = false;\n        }\n      },\n      error: (error: any) => {\n        console.error('Error al crear producto:', error);\n        this.submitting = false;\n      }\n    });\n  }\n\n  // Resetear formulario y seleccin de archivos\n  resetForm(): void {\n    this.newProductForm.reset({\n      nombre: '',\n      descripcion: '',\n      precio: 0,\n      stock: 0,\n      categoryId: null\n    });\n    this.selectedFiles = [];\n    this.previewUrls = [];\n  }\n\n  // Cargar datos en el formulario de edicin\n  editProduct(product: Product): void {\n    this.currentProductId = product.id;\n    this.showEditForm = true; // Cambiado de editMode\n    this.editProductForm.setValue({\n      nombre: product.nombre,\n      descripcion: product.descripcion,\n      precio: product.precio,\n      stock: product.stock,\n      categoryId: product.categoria_id\n    });\n  }\n\n  // Actualizar un producto existente (cambiado a updateProduct para coincidir con HTML)\n  updateProduct(): void {\n    if (this.editProductForm.invalid || !this.currentProductId) {\n      return;\n    }\n\n    this.submitting = true;\n    const productId = this.currentProductId;\n    const updatedProduct: Product = this.editProductForm.value;\n\n    this.productService.updateProduct(productId, updatedProduct).subscribe({\n      next: (result: Product) => {\n        console.log('Producto actualizado:', result);\n        this.showEditForm = false; // Cambiado de editMode\n        this.currentProductId = null;\n        this.loadProducts();\n        this.submitting = false;\n      },\n      error: (error: any) => {\n        console.error('Error al actualizar producto:', error);\n        this.submitting = false;\n      }\n    });\n  }\n\n  // Cancelar edicin\n  cancelEdit(): void {\n    this.showEditForm = false; // Cambiado de editMode\n    this.currentProductId = null;\n    this.editProductForm.reset();\n  }\n\n  // Eliminar un producto\n  deleteProduct(id: number): void {\n    if (confirm('Ests seguro que deseas eliminar este producto? Esta accin no se puede deshacer.')) {\n      this.loading = true;\n      this.productService.deleteProduct(id).subscribe({\n        next: () => {\n          console.log('Producto eliminado correctamente');\n          this.loadProducts();\n        },\n        error: (error: any) => {\n          console.error('Error al eliminar producto:', error);\n          this.loading = false;\n        }\n      });\n    }\n  }\n\n  // Mtodo para formatear precio como moneda (faltaba segn HTML)\n  formatPrice(price: number): string {\n    return new Intl.NumberFormat('es-ES', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(price);\n  }\n\n  // Mtodo para obtener el nombre de categora por ID (faltaba segn HTML)\n  getCategoryName(categoryId: number): string {\n    const category = this.categories.find(c => c.id === categoryId);\n    return category ? category.nombre : 'Sin categora';\n  }\n}","<div id=\"adminart\">\n    <h1>Artculos</h1>\n    \n    <!-- Seccin para aadir nuevo producto -->\n    <div>\n      <h2>Aadir artculo</h2>\n      <form [formGroup]=\"newProductForm\" (ngSubmit)=\"addProduct()\">\n        <table>\n          <!-- Campo: Nombre del producto -->\n          <tr>\n            <td>\n              <label>Nombre: </label>\n            </td>\n            <td>\n              <input type=\"text\" id=\"nuevoartnombre\" formControlName=\"nombre\" />\n            </td>\n          </tr>\n          \n          <!-- Campo: Descripcin del producto -->\n          <tr>\n            <td>\n              <label>Descripcin</label>\n            </td>\n            <td>\n              <textarea id=\"nuevoartdescripcion\" formControlName=\"descripcion\"></textarea>\n            </td>\n          </tr>\n          \n          <!-- Campo: Precio del producto -->\n          <tr>\n            <td>\n              <label>Precio: </label>\n            </td>\n            <td>\n              <input type=\"number\" id=\"nuevoartprecio\" formControlName=\"precio\" />\n            </td>\n          </tr>\n          \n          <!-- Campo: Categora del producto -->\n          <tr>\n            <td>\n              <label>Categoria: </label>\n            </td>\n            <td>\n              <select id=\"nuevoartcat\" formControlName=\"categoria\">\n                <option value=\"\" selected disabled hidden></option>\n                <option *ngFor=\"let category of categories\" [value]=\"category.id\">\n                  {{ category.nombre }}\n                </option>\n              </select>\n            </td>\n          </tr>\n          \n          <!-- Campo: Carpeta de imgenes -->\n          <tr>\n            <td>\n              <label>Carpeta de imgenes: </label>\n            </td>\n            <td>\n              <input type=\"text\" id=\"nuevoartfolder\" formControlName=\"carpetaimg\" />\n            </td>\n          </tr>\n          \n          <!-- Campo: Subida de imgenes -->\n          <tr>\n            <td>\n              <label>Imgenes: </label>\n            </td>\n            <td>\n              <input type=\"file\" id=\"imagenes\" multiple (change)=\"onFileSelect($event)\" />\n            </td>\n          </tr>\n          \n          <!-- Botn de envo -->\n          <tr>\n            <td colspan=\"2\">\n              <input type=\"submit\" id=\"btnaniadirart\" value=\"AADIR\" />\n            </td>\n          </tr>\n        </table>\n      </form>\n    </div>\n    \n    <!-- Seccin para editar producto (visible solo cuando se edita) -->\n    <div *ngIf=\"showEditForm\">\n      <h2>Editar artculo</h2>\n      <form [formGroup]=\"editProductForm\" (ngSubmit)=\"updateProduct()\">\n        <table>\n          <!-- Campo: Nombre del producto -->\n          <tr>\n            <td>\n              <label>Nombre: </label>\n            </td>\n            <td>\n              <input type=\"text\" formControlName=\"nombre\" />\n            </td>\n          </tr>\n          \n          <!-- Campo: Descripcin del producto -->\n          <tr>\n            <td>\n              <label>Descripcin: </label>\n            </td>\n            <td>\n              <textarea rows=\"3\" cols=\"40\" formControlName=\"descripcion\"></textarea>\n            </td>\n          </tr>\n          \n          <!-- Campo: Precio del producto -->\n          <tr>\n            <td>\n              <label>Precio: </label>\n            </td>\n            <td>\n              <input type=\"number\" size=\"2\" formControlName=\"precio\" />\n            </td>\n          </tr>\n          \n          <!-- Campo: Categora del producto -->\n          <tr>\n            <td>\n              <label>Categora: </label>\n            </td>\n            <td>\n              <select formControlName=\"categoria\">\n                <option *ngFor=\"let category of categories\" [value]=\"category.id\">\n                  {{ category.nombre }}\n                </option>\n              </select>\n            </td>\n          </tr>\n        </table>\n        \n        <!-- Botones de accin -->\n        <input type=\"submit\" value=\"ACTUALIZAR\" />\n        <input type=\"button\" value=\"CANCELAR\" (click)=\"cancelEdit()\" />\n      </form>\n    </div>\n    \n    <!-- Seccin para listar y administrar productos existentes -->\n    <div>\n      <h2>Administrar artculos</h2>\n      <table id=\"editart\">\n        <tr>\n          <th>Nombre</th>\n          <th>Precio</th>\n          <th>Categora</th>\n          <th></th>\n          <th></th>\n        </tr>\n        <tr *ngFor=\"let product of products\">\n          <td>{{ product.nombre }}</td>\n          <td>{{ formatPrice(product.precio) }}</td>\n          <td>{{ product.categoria_id !== undefined ? getCategoryName(product.categoria_id) : 'Sin categora' }}</td>\n          <td>\n            <input [attr.data-id]=\"product.id\" type=\"button\" class=\"editarart\" value=\"EDITAR\" (click)=\"editProduct(product)\"/>\n          </td>\n          <td>\n            <input [attr.data-id]=\"product.id\" type=\"button\" class=\"eliminarart\" value=\"ELIMINAR\" (click)=\"deleteProduct(product.id)\"/>\n          </td>\n        </tr>\n      </table>\n    </div>\n  </div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\n@Component({\n  selector: 'app-banner',\n  templateUrl: './banner.component.html'\n})\nexport class BannerComponent implements OnInit, OnDestroy {\n  // Array para almacenar las rutas a las imgenes del banner\n  bannerImages: string[] = [];\n  \n  // Variable para mantener track de qu imagen del banner se est mostrando\n  currentBannerIndex = 0;\n  \n  // Variable para almacenar la referencia al temporizador del banner\n  bannerInterval: any;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    // Cargamos las imgenes del banner\n    this.loadBannerImages();\n    \n    // Iniciamos la rotacin automtica del banner\n    this.startBannerRotation();\n  }\n\n  ngOnDestroy(): void {\n    // Si hay un intervalo de banner activo, lo eliminamos\n    if (this.bannerInterval) {\n      clearInterval(this.bannerInterval);\n    }\n  }\n\n  // Mtodo para cargar las imgenes del banner\n  loadBannerImages(): void {\n    this.bannerImages = [\n      'assets/images/banner/banner1.jpg',\n      'assets/images/banner/banner2.jpg'\n    ];\n  }\n\n  // Mtodo para iniciar la rotacin automtica del banner\n  startBannerRotation(): void {\n    // Configuramos un temporizador que llama a nextBanner cada 5 segundos\n    this.bannerInterval = setInterval(() => {\n      this.nextBanner();\n    }, 5000);\n  }\n\n  // Mtodo para mostrar la imagen anterior del banner\n  prevBanner(): void {\n    // Calculamos el nuevo ndice\n    this.currentBannerIndex = \n      (this.currentBannerIndex === 0) \n      ? this.bannerImages.length - 1 \n      : this.currentBannerIndex - 1;\n  }\n\n  // Mtodo para mostrar la siguiente imagen del banner\n  nextBanner(): void {\n    // Calculamos el nuevo ndice\n    this.currentBannerIndex = \n      (this.currentBannerIndex === this.bannerImages.length - 1) \n      ? 0 \n      : this.currentBannerIndex + 1;\n  }\n}","<!-- Banner rotativo que se muestra condicionalmente si hay imgenes -->\n<div id=\"banner\" *ngIf=\"bannerImages.length > 0\">\n    <!-- Botn para ir a la imagen anterior del banner -->\n    <button class=\"banner_button prev\" (click)=\"prevBanner()\">\n      <img src=\"assets/images/icons/left-arrow.png\" alt=\"Anterior\" />\n    </button>\n    \n    <!-- Imagen actual del banner -->\n    <img [src]=\"bannerImages[currentBannerIndex]\" alt=\"banner\" id=\"bannerimg\" />\n    \n    <!-- Botn para ir a la siguiente imagen del banner -->\n    <button class=\"banner_button next\" (click)=\"nextBanner()\">\n      <img src=\"assets/images/icons/right-arrow.png\" alt=\"Siguiente\" />\n    </button>\n  </div>","import { Component, OnInit, HostListener, NgZone, OnDestroy, AfterViewInit, Renderer2 } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { CartService } from '../../services/cart.service';\nimport { AuthService } from '../../services/auth.service';\nimport { LoginPopupService } from '../../services/login-popup.service';\nimport { OrderLine } from 'src/app/models/order';\nimport { CartItem } from '../../services/cart.service';\nimport { ProductService } from '../../services/product.service';\nimport Swal from 'sweetalert2';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.scss']\n})\nexport class CartComponent implements OnInit, OnDestroy, AfterViewInit {\n  // Array para almacenar los items del carrito\n  cartItems: CartItem[] = [];\n  \n  // Array para las lneas de pedido\n  orderLines: OrderLine[] = [];\n  \n  // Variable para almacenar el total del carrito\n  total: number = 0;\n  \n  // Variable para controlar si estamos en proceso de eliminar\n  private isRemoving: boolean = false;\n  \n  // Suscripciones para limpiar en la destruccin\n  private cartSubscription: Subscription | null = null;\n  private cartVisibilitySubscription: Subscription | null = null;\n  \n  // Constructor con inyeccin de dependencias\n  constructor(\n    public cartService: CartService,\n    private authService: AuthService,\n    private router: Router,\n    private zone: NgZone,\n    public productService: ProductService,\n    private renderer: Renderer2,\n    private loginPopupService: LoginPopupService\n  ) { }\n  \n  ngOnInit(): void {\n    console.log('CartComponent: iniciando...');\n    \n    // Aadir globalmente un script para interceptar las modificaciones del DOM\n    this.addDOMObserver();\n    \n    // Suscripcin al observable de items del carrito\n    this.cartSubscription = this.cartService.cartItems.subscribe({\n      next: (items) => {\n        console.log('CartComponent: items del carrito actualizados', items.length);\n        // Mapear los items\n        this.cartItems = items.map(item => {\n          return {\n            id: item.id,\n            nombre: item.nombre || (item.producto ? item.producto.nombre : ''),\n            imagen: item.imagen || (item.producto ? `assets/images/${item.producto.carpetaimg}/${item.producto.imagen}` : ''),\n            color: item.color || '',\n            cantidad: item.cantidad,\n            precio: item.precio,\n            producto: item.producto\n          };\n        });\n        \n        // Convertir CartItems a OrderLines para usar con OrderLineComponent\n        this.convertCartItemsToOrderLines();\n        \n        // Calcular el total del carrito\n        this.total = Math.round(this.cartService.getCartTotal() * 100) / 100;\n        \n        // IMPORTANTE: Solo cerrar el carrito si est vaco y NO estamos en proceso de eliminar\n        if (items.length === 0 && this.cartService.isCartOpen && !this.isRemoving) {\n          console.log('CartComponent: Carrito vaco, programando cierre en 500ms');\n          setTimeout(() => {\n            this.closeCart();\n          }, 500);\n        }\n        \n        // Resetear isRemoving SOLO si el carrito est completamente vaco\n        if (items.length === 0) {\n          console.log('CartComponent: Carrito vaco, reseteando isRemoving');\n          this.isRemoving = false;\n        }\n        \n        // Fijar los precios despus de cada actualizacin\n        setTimeout(() => {\n          this.fixPriceFormat();\n        }, 100);\n      }\n    });\n    \n    // Aadir listener explcito para cambios en la visibilidad del carrito\n    this.listenToCartVisibilityChanges();\n    \n    // Sobrescribir el mtodo closeCart del servicio para evitar cierres no deseados\n    this.patchCartServiceCloseMethod();\n    \n    // Aumentar el tamao de los elementos del carrito en 5px\n    this.enhanceCartSize();\n  }\n  \n  // Mtodo para interceptar cambios en el DOM y corregir los precios\n  private addDOMObserver(): void {\n    const script = this.renderer.createElement('script');\n    \n    // Script para interceptar y corregir cambios en el DOM\n    script.text = `\n      (function() {\n        // Funcin para corregir formato de precios\n        function fixPriceFormat() {\n          // 1. Corregir el total principal\n          const totalElement = document.querySelector('[data-label=\"Total:\"] + span');\n          if (totalElement) {\n            const rawTotal = parseFloat(totalElement.textContent.replace('', '').trim());\n            if (!isNaN(rawTotal)) {\n              totalElement.textContent = rawTotal.toFixed(2) + '';\n            }\n          }\n          \n          // 2. Corregir todos los precios totales por lnea\n          const itemTotals = document.querySelectorAll('[data-label=\"PRECIO (TOTAL)\"]');\n          itemTotals.forEach(element => {\n            if (element && element.textContent) {\n              const text = element.textContent.trim();\n              const rawValue = parseFloat(text.replace('', '').trim());\n              if (!isNaN(rawValue)) {\n                element.textContent = rawValue.toFixed(2) + '';\n              }\n            }\n          });\n        }\n        \n        // Observar cambios en el DOM\n        const observer = new MutationObserver(function(mutations) {\n          fixPriceFormat();\n        });\n        \n        // Configurar el observador\n        observer.observe(document.body, { \n          childList: true, \n          subtree: true,\n          characterData: true,\n          attributes: true\n        });\n        \n        // Ejecutar inmediatamente\n        fixPriceFormat();\n        \n        // Aadir a window para acceso desde el componente\n        window.fixPriceFormat = fixPriceFormat;\n      })();\n    `;\n    \n    // Aadir el script al DOM\n    this.renderer.appendChild(document.head, script);\n  }\n  \n  // Mtodo simple para corregir el formato de precios\n  private fixPriceFormat(): void {\n    setTimeout(() => {\n      try {\n        // 1. Corregir el total principal\n        const totalElement = document.querySelector('[data-label=\"Total:\"] + span');\n        if (totalElement) {\n          const rawValue = parseFloat(this.total.toString());\n          if (!isNaN(rawValue)) {\n            totalElement.textContent = rawValue.toFixed(2) + '';\n          }\n        }\n        \n        // 2. Corregir los precios por lnea\n        const itemTotals = document.querySelectorAll('[data-label=\"PRECIO (TOTAL)\"]');\n        itemTotals.forEach(element => {\n          if (element && element.textContent) {\n            const text = element.textContent.trim();\n            const rawValue = parseFloat(text.replace('', '').trim());\n            if (!isNaN(rawValue)) {\n              element.textContent = rawValue.toFixed(2) + '';\n            }\n          }\n        });\n      } catch (error) {\n        console.error('Error al corregir precios:', error);\n      }\n    }, 0);\n  }\n\n  // Mtodo para continuar comprando\n  continuarComprando(): void {\n    this.closeCart();\n    this.router.navigate(['/productos']);\n  }\n  \n  // Mtodo para aumentar el tamao del carrito y aadir animaciones\n  private enhanceCartSize(): void {\n    console.log('CartComponent: Aumentando tamao de elementos del carrito y aadiendo animaciones');\n    \n    const styleEl = this.renderer.createElement('style');\n    styleEl.id = 'cart-size-enhancement';\n    \n    // Estilos para hacer elementos ms grandes y aadir animacin hover\n    styleEl.innerHTML = `\n      /* Ajustes al popup principal */\n      .cart-popup {\n        padding: 30px !important;\n        max-width: 1005px !important;\n      }\n      \n      /* Aumentar tamao de elementos de la tabla */\n      .cart-table th, \n      .cart-table td,\n      .cart-popup th,\n      .cart-popup td {\n        padding: 17px 15px !important;\n      }\n      \n      /* Aumentar las imgenes y aadir la animacin de hover */\n      .cart-table .articulo-cell img,\n      .cart-popup img {\n        width: 45px !important;\n        height: 45px !important;\n        transition: transform 0.3s ease !important;\n      }\n      \n      /* Efecto hover para las imgenes */\n      .cart-table .articulo-cell img:hover,\n      .cart-popup img:hover {\n        transform: scale(1.05) !important;\n        box-shadow: 0 3px 8px rgba(0,0,0,0.15) !important;\n      }\n      \n      /* Tambin aplicamos el efecto a las imgenes de productos en la galera */\n      #articulos .articulo img,\n      [class*='product'] img {\n        transition: transform 0.3s ease !important;\n      }\n      \n      #articulos .articulo img:hover,\n      [class*='product'] img:hover {\n        transform: scale(1.05) !important;\n        z-index: 1 !important;\n      }\n    `;\n    \n    // Aadir los nuevos estilos al head del documento\n    this.renderer.appendChild(document.head, styleEl);\n  }\n  \n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.fixPriceFormat();\n    }, 100);\n  }\n  \n  ngOnDestroy(): void {\n    // Limpiar suscripciones para evitar memory leaks\n    if (this.cartSubscription) {\n      this.cartSubscription.unsubscribe();\n    }\n    \n    if (this.cartVisibilitySubscription) {\n      this.cartVisibilitySubscription.unsubscribe();\n    }\n    \n    // Eliminar event listeners si los hubiera\n    document.removeEventListener('click', this.handleOutsideClick);\n    \n    // Eliminar estilos personalizados\n    const customStyles = document.getElementById('cart-size-enhancement');\n    if (customStyles) {\n      customStyles.remove();\n    }\n  }\n  \n  // Mtodo para suscribirse explcitamente a los cambios de visibilidad del carrito\n  private listenToCartVisibilityChanges(): void {\n    this.cartVisibilitySubscription = this.cartService.isCartOpenObservable.subscribe(isOpen => {\n      console.log('CartComponent: cambio de visibilidad del carrito', isOpen);\n      \n      if (isOpen) {\n        setTimeout(() => {\n          this.fixPriceFormat();\n        }, 200);\n      }\n    });\n  }\n  \n  // Manejador para clicks fuera del carrito\n  private handleOutsideClick = (event: MouseEvent) => {\n    const target = event.target as HTMLElement;\n    \n    // No cerrar si el clic fue dentro del carrito o si estamos eliminando\n    if (target.closest('.cart-popup') || target.closest('#carrito') || this.isRemoving) {\n      return;\n    }\n    \n    // Cerrar solo si el clic fue realmente fuera del carrito\n    if (this.cartService.isCartOpen) {\n      this.closeCart();\n    }\n  };\n  \n  // Mtodo para parchar el comportamiento de cierre del servicio\n  private patchCartServiceCloseMethod(): void {\n    // Guardar referencia al mtodo original\n    const originalCloseMethod = this.cartService.closeCart;\n    \n    // Sobrescribir el mtodo en el servicio\n    this.cartService.closeCart = () => {\n      // LGICA MEJORADA: No cerrar si estamos eliminando Y hay productos\n      if (this.isRemoving && this.cartItems.length > 0) {\n        console.log('Cierre de carrito bloqueado durante eliminacin de producto');\n        return; // Bloquear el cierre completamente\n      }\n      \n      // En cualquier otro caso, permitir cerrar el carrito\n      originalCloseMethod.call(this.cartService);\n    };\n  }\n  \n  // Mtodo para convertir CartItems a OrderLines\n  convertCartItemsToOrderLines(): void {\n    this.orderLines = this.cartItems.map(item => {\n      const orderLine: OrderLine = {\n        idpedido: 0, // Temporal hasta que se cree el pedido\n        idprod: item.id,\n        color: item.color || '',\n        cantidad: item.cantidad,\n        nombre: item.nombre || ''\n      };\n      return orderLine;\n    });\n  }\n  \n  // Mtodo para cerrar el popup del carrito\n  closeCart(): void {\n    // Solo permitir cierre manual si no estamos en proceso de eliminacin\n    // O si el carrito est vaco\n    if (!this.isRemoving || this.cartItems.length === 0) {\n      this.cartService.closeCart();\n    } else {\n      console.log('CartComponent: Cierre manual bloqueado durante eliminacin');\n    }\n  }\n  \n  // Mtodo para cerrar el popup del carrito (para template)\n  cerrarCarrito(): void {\n    this.closeCart();\n  }\n\n  // Mtodo para obtener la ruta de la imagen del producto\n  getImageSrc(item: CartItem): string {\n    if (item.producto) {\n      // Pasa el color seleccionado\n      return this.productService.getProductImageSrc(item.producto, item.color);\n    }\n    return item.imagen || \"assets/images/default.jpg\";\n  }\n  \n\n  // Mtodo para incrementar la cantidad de un item\n  incrementarCantidad(item: CartItem): void {\n    console.log('Incrementando cantidad para:', item.nombre);\n    \n    // Actualizar la cantidad\n    this.cartService.updateItemQuantity(item.id, item.color || '', item.cantidad + 1);\n    \n    // Corregir el formato del total despus de actualizar\n    setTimeout(() => {\n      this.fixPriceFormat();\n    }, 100);\n  }\n\n  // Mtodo para decrementar la cantidad de un item\n  decrementarCantidad(item: CartItem): void {\n    if (item.cantidad > 1) {\n      console.log('Decrementando cantidad para:', item.nombre);\n      \n      // Actualizar la cantidad\n      this.cartService.updateItemQuantity(item.id, item.color || '', item.cantidad - 1);\n      \n      // Corregir el formato del total despus de actualizar\n      setTimeout(() => {\n        this.fixPriceFormat();\n      }, 100);\n    }\n  }\n\n  // Mtodo para eliminar un item\n  eliminarItem(item: CartItem): void {\n    this.confirmRemoveItem(item);\n  }\n\n  // Mtodo para calcular el total formateado a 2 decimales\n  calcularTotal(): string {\n    return this.total.toFixed(2) + '';\n  }\n\n  // Mtodo para procesar la compra\n  procesarCompra(): void {\n    this.checkout();\n  }\n\n  // Mtodo para confirmar eliminacin con SweetAlert\n  confirmRemoveItem(item: CartItem): void {\n    // Activar bandera de eliminacin\n    this.isRemoving = true;\n    console.log('CartComponent: Iniciando proceso de eliminacin para', item.nombre);\n    \n    // Utilizar SweetAlert2 para confirmar\n    Swal.fire({\n      title: 'Eliminar este producto?',\n      text: 'Ests seguro de que deseas eliminar este producto del carrito?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#52667a',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'S, eliminar',\n      cancelButtonText: 'Cancelar',\n      allowOutsideClick: false,\n      allowEscapeKey: false\n    }).then((result) => {\n      this.zone.run(() => {\n        if (result.isConfirmed) {\n          // Comprobar cuntos productos quedarn despus de eliminar este\n          const itemsRemaining = this.cartItems.length - 1;\n          \n          // Eliminar el item del carrito\n          this.removeItem(item.id, item.color || '');\n          \n          // SOLO resetear isRemoving y cerrar el carrito si no quedarn ms artculos\n          if (itemsRemaining <= 0) {\n            setTimeout(() => {\n              this.isRemoving = false;\n              this.closeCart();\n            }, 500);\n          } else {\n            // Mantener el carrito abierto cuando quedan ms artculos\n            setTimeout(() => {\n              this.isRemoving = false;\n              this.fixPriceFormat();\n            }, 500);\n          }\n        } else {\n          // Cancel la eliminacin\n          this.isRemoving = false;\n        }\n      });\n    });\n  }\n\n  // Mtodo para eliminar un item del carrito\n  removeItem(id: number, color: string): void {\n    // Llamar al mtodo del servicio para eliminar el item\n    this.cartService.removeItem(id, color);\n  }\n  \n  // Mtodo para actualizar cantidad desde el componente OrderLine\n  updateQuantity(data: {line: OrderLine, newQuantity: number}): void {\n    this.cartService.updateItemQuantity(data.line.idprod, data.line.color, data.newQuantity);\n    \n    // Corregir el formato del total despus de actualizar\n    setTimeout(() => {\n      this.fixPriceFormat();\n    }, 100);\n  }\n\n  //  MTODO CHECKOUT CORREGIDO\n  checkout(): void {\n    console.log(' Iniciando checkout desde carrito');\n    \n    // Verificar que el carrito no est vaco\n    if (this.cartItems.length === 0) {\n      Swal.fire({\n        title: 'El carrito est vaco',\n        icon: 'info',\n        confirmButtonColor: '#52667a'\n      });\n      return;\n    }\n\n    // Verificar autenticacin\n    if (!this.authService.currentUserValue) {\n      console.log(' Usuario no autenticado, abriendo popup');\n      \n      //  SOLO popup, NO navegacin manual\n      this.loginPopupService.openForCheckout('/checkout');\n      \n      //  Cerrar carrito para limpiar la interfaz\n      this.closeCart();\n      \n      return;\n    }\n\n    //  Si est autenticado, proceder al checkout\n    console.log(' Usuario autenticado, navegando a checkout');\n    this.closeCart();\n    this.router.navigate(['/checkout']);\n  }\n}","<!-- cart.component.html -->\n<div class=\"cart-modal\" [ngClass]=\"{'active': cartService.isCartOpen}\">\n  <div class=\"cart-overlay\" (click)=\"cerrarCarrito()\"></div>\n  \n  <div class=\"cart-popup\">\n    <div class=\"cart-header\">\n      <h2>Tu Carrito</h2>\n      <button class=\"close-cart\" (click)=\"cerrarCarrito()\"></button>\n    </div>\n\n    <div *ngIf=\"cartItems && cartItems.length > 0; else emptyCart\" class=\"cart-content\">\n      <div class=\"cart-table-container\">\n        <table class=\"cart-table\">\n          <thead>\n            <tr>\n              <th class=\"articulo-col\">Artculo</th>\n              <th class=\"color-col\">Color</th>\n              <th class=\"cantidad-col\">Cantidad</th>\n              <th class=\"precio-col\">Precio(u)</th>\n              <th class=\"precio-total-col\">Precio (total)</th>\n              <th class=\"acciones-col\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let item of cartItems\">\n              <td class=\"articulo-cell\" data-label=\"Artculo\">\n                <img [src]=\"getImageSrc(item)\" [alt]=\"item.nombre\" (error)=\"productService.handleImageError($event)\" />\n                <span class=\"articulo-nombre\">{{ item.nombre }}</span>\n              </td>\n              <td data-label=\"Color\">{{ item.color }}</td>\n              <td class=\"cantidad-cell\" data-label=\"Cantidad\">\n                <div class=\"quantity-controls\">\n                  <button class=\"qty-btn\" (click)=\"decrementarCantidad(item)\" [disabled]=\"item.cantidad <= 1\">-</button>\n                  <span class=\"qty-value\">{{ item.cantidad }}</span>\n                  <button class=\"qty-btn\" (click)=\"incrementarCantidad(item)\">+</button>\n                </div>\n              </td>\n              <!--  CORRECCIN: Euro despus con espacio -->\n              <td class=\"precio-cell\" data-label=\"Precio(u)\">{{ item.precio | number:'1.2-2' }} </td>\n              <!--  CORRECCIN: Euro despus con espacio -->\n              <td class=\"precio-total-cell\" data-label=\"Precio (total)\">{{ (item.precio * item.cantidad) | number:'1.2-2' }} </td>\n              <td class=\"acciones-cell\">\n                <button class=\"remove-item\" (click)=\"eliminarItem(item)\"></button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      \n      <div class=\"cart-footer\">\n        <div class=\"cart-total-row\">\n          <span class=\"total-label\">Total:</span>\n          <!--  CORRECCIN: Euro despus con espacio -->\n          <span class=\"total-value\">{{ total | number:'1.2-2' }} </span>\n        </div>\n\n        <button class=\"procesar-compra-btn\" (click)=\"procesarCompra()\">\n          PROCESAR COMPRA\n        </button>\n      </div>\n    </div>\n\n    <ng-template #emptyCart>\n      <div class=\"empty-cart\">\n        <h3>Tu carrito est vaco</h3>\n        <p>Aade algunos productos para continuar con la compra</p>\n        <button class=\"continue-shopping-btn\" (click)=\"continuarComprando()\">\n          Continuar comprando\n        </button>\n      </div>\n    </ng-template>\n  </div>\n</div>","// checkout.component.ts - CON SOLUCIN TEMPORAL\n\nimport { Component, OnInit, OnDestroy } from '@angular/core'\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms'\nimport { Router } from '@angular/router'\nimport { CartService } from '../../services/cart.service'\nimport { AuthService } from '../../services/auth.service'\nimport { ProductService } from '../../services/product.service'\nimport { Order, OrderLine } from 'src/app/models/order'\nimport { CartItem } from 'src/app/models/order'\nimport { OrderService } from 'src/app/services/order.service'\nimport Swal from 'sweetalert2'\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.scss']\n})\nexport class CheckoutComponent implements OnInit, OnDestroy {\n  checkoutForm: FormGroup\n  cartItems: CartItem[] = []\n  total: number = 0\n  loading: boolean = false\n  showOrder: boolean = true\n  showDelivery: boolean = false\n  showPayment: boolean = false\n  currentUser: any\n  useUserDataDirectly: boolean = true\n\n  constructor (\n    private formBuilder: FormBuilder,\n    private cartService: CartService,\n    private authService: AuthService,\n    private orderService: OrderService,\n    private router: Router,\n    public productService: ProductService\n  ) {\n    console.log(' CheckoutComponent inicializado')\n\n    this.checkoutForm = this.formBuilder.group({\n      nombre: ['', [Validators.required, Validators.minLength(2)]],\n      direccion: ['', [Validators.required, Validators.minLength(5)]],\n      ciudad: ['', [Validators.required, Validators.minLength(2)]],\n      cp: ['', [Validators.required, Validators.pattern(/^\\d{4,5}$/)]],\n      telefono: ['']\n    })\n  }\n\n  ngOnInit (): void {\n    console.log(' Inicializando CheckoutComponent')\n    document.body.style.overflow = 'hidden'\n\n    this.currentUser = this.authService.currentUserValue\n    console.log(' Usuario actual:', this.currentUser?.username || 'No autenticado')\n\n    if (!this.currentUser) {\n      console.warn(' Usuario no autenticado, redirigiendo al login')\n      Swal.fire({\n        title: 'Debes iniciar sesin',\n        text: 'Para proceder con la compra necesitas estar autenticado',\n        icon: 'warning',\n        confirmButtonColor: '#52667a'\n      }).then(() => {\n        this.closeCheckout()\n        this.router.navigate(['/login'], {\n          queryParams: { returnUrl: '/checkout' }\n        })\n      })\n      return\n    }\n\n    console.log(' Verificando datos del usuario:', {\n      nombre: this.currentUser?.nombre,\n      direccion: this.currentUser?.direccion,\n      ciudad: this.currentUser?.ciudad,\n      cp: this.currentUser?.cp,\n      email: this.currentUser?.email\n    })\n\n    const hasCompleteUserData =\n      this.currentUser.nombre &&\n      this.currentUser.direccion &&\n      this.currentUser.ciudad &&\n      this.currentUser.cp\n\n    if (hasCompleteUserData) {\n      console.log(' Usuario tiene datos completos, usando datos directamente')\n      this.useUserDataDirectly = true\n    } else {\n      console.log(' Usuario con datos incompletos, usando formulario')\n      this.useUserDataDirectly = false\n    }\n\n    this.cartService.cartItems.subscribe(items => {\n      console.log(' Items del carrito recibidos:', items.length)\n\n       this.cartItems = items.map(item => {\n        return {\n          id: item.id,\n          nombre: item.nombre || '',\n          color: item.color || 'Estndar',\n          cantidad: item.cantidad,\n          precio: item.precio,\n          imagen: item.imagen || '',\n          producto:\n            typeof item.producto === 'object'\n              ? JSON.stringify(item.producto)\n              : item.producto || ''\n        } as CartItem\n      })\n\n\n      \n      this.total = this.cartService.getCartTotal()\n      console.log(' Total calculado:', this.total)\n\n      if (this.cartItems.length === 0) {\n        console.warn(' Carrito vaco, cerrando checkout')\n        Swal.fire({\n          title: 'Carrito vaco',\n          text: 'No hay productos en el carrito para procesar',\n          icon: 'info',\n          confirmButtonColor: '#52667a'\n        }).then(() => {\n          this.closeCheckout()\n        })\n      }\n    })\n\n    if (this.currentUser && !this.useUserDataDirectly) {\n      console.log(' Prellenando formulario con datos del usuario')\n      const userData = this.preprocessUserData(this.currentUser)\n      this.checkoutForm.patchValue(userData)\n      this.checkoutForm.updateValueAndValidity()\n\n      console.log(' Estado del formulario despus de prellenar:', {\n        valid: this.checkoutForm.valid,\n        errors: this.getFormErrors(),\n        values: this.checkoutForm.value\n      })\n    }\n\n    document.addEventListener('keydown', this.handleEscapeKey.bind(this))\n  }\n\n  ngOnDestroy (): void {\n    console.log(' Destruyendo CheckoutComponent')\n    document.body.style.overflow = 'auto'\n    document.removeEventListener('keydown', this.handleEscapeKey.bind(this))\n  }\n\n  private preprocessUserData (user: any) {\n    return {\n      nombre: user.nombre || '',\n      direccion: user.direccion || '',\n      ciudad: user.ciudad || '',\n      cp: user.cp || '',\n      telefono: user.telefono || ''\n    }\n  }\n\n  private getFormErrors (): any {\n    const errors: any = {}\n    Object.keys(this.checkoutForm.controls).forEach(key => {\n      const control = this.checkoutForm.get(key)\n      if (control && control.errors) {\n        errors[key] = control.errors\n      }\n    })\n    return errors\n  }\n\n// En checkout.component.ts, reemplaza el mtodo getImageSrc con este:\n\ngetImageSrc(item: CartItem): string {\n  console.log(' Obteniendo imagen para:', item.nombre, 'Color:', item.color);\n  \n  if (item.producto) {\n    if (typeof item.producto === 'string') {\n      try {\n        const productoObj = JSON.parse(item.producto);\n        //  CORRECCIN: Pasar el color como segundo parmetro\n        return this.productService.getProductImageSrc(productoObj, item.color);\n      } catch (e) {\n        console.error('Error al parsear producto:', e);\n        return 'assets/images/default.jpg';\n      }\n    } else {\n      //  CORRECCIN: Pasar el color como segundo parmetro\n      return this.productService.getProductImageSrc(item.producto, item.color);\n    }\n  }\n  \n  // Fallback: usar la imagen directamente si existe\n  if (item.imagen) {\n    console.log(' Usando imagen directa:', item.imagen);\n    return item.imagen;\n  }\n  \n  console.warn(' No se encontr imagen, usando default');\n  return 'assets/images/default.jpg';\n}\n\n  handleImageError (event: any): void {\n    this.productService.handleImageError(event)\n  }\n\n  private handleEscapeKey (event: KeyboardEvent): void {\n    if (event.key === 'Escape') {\n      console.log(' Tecla ESC presionada, cerrando checkout')\n      this.closeCheckout()\n    }\n  }\n\n  closeCheckout (): void {\n    console.log(' Cerrando checkout')\n    document.body.style.overflow = 'auto'\n    this.router.navigate(['/'])\n  }\n\n  /**\n   *  VERSIN CON SOLUCIN TEMPORAL\n   * Muestra el mensaje de xito sin el nmero de pedido si el backend no lo devuelve\n   */\n  placeOrder(): void {\n    console.log(' Iniciando procesamiento del pedido...');\n  \n    if (!this.currentUser) {\n      console.error(' Error de autenticacin durante el procesamiento');\n      Swal.fire({\n        title: 'Error de autenticacin',\n        text: 'Tu sesin ha expirado. Por favor, inicia sesin nuevamente.',\n        icon: 'error',\n        confirmButtonColor: '#52667a'\n      }).then(() => {\n        this.closeCheckout();\n        this.router.navigate(['/login']);\n      });\n      return;\n    }\n  \n    if (this.cartItems.length === 0) {\n      console.warn(' Intento de procesar pedido con carrito vaco');\n      Swal.fire({\n        title: 'El carrito est vaco',\n        text: 'No puedes procesar un pedido sin productos',\n        icon: 'warning',\n        confirmButtonColor: '#52667a'\n      });\n      return;\n    }\n  \n    let shippingData: any;\n  \n    if (this.useUserDataDirectly) {\n      console.log(' Usando datos del usuario directamente');\n      shippingData = {\n        nombre: this.currentUser.nombre,\n        direccion: this.currentUser.direccion,\n        ciudad: this.currentUser.ciudad,\n        cp: this.currentUser.cp\n      };\n  \n      if (!shippingData.nombre || !shippingData.direccion || !shippingData.ciudad || !shippingData.cp) {\n        console.warn(' Datos del usuario incompletos');\n        Swal.fire({\n          title: 'Perfil incompleto',\n          text: 'Para proceder con la compra necesitas completar tu perfil (nombre, direccin, ciudad, cdigo postal)',\n          icon: 'warning',\n          confirmButtonColor: '#52667a',\n          showCancelButton: true,\n          cancelButtonText: 'Ms tarde',\n          confirmButtonText: 'Completar perfil'\n        }).then(result => {\n          if (result.isConfirmed) {\n            this.closeCheckout();\n            this.router.navigate(['/profile']);\n          }\n        });\n        return;\n      }\n    } else {\n      console.log(' Usando datos del formulario');\n      console.log(' Estado del formulario:', {\n        valid: this.checkoutForm.valid,\n        errors: this.getFormErrors(),\n        values: this.checkoutForm.value\n      });\n  \n      if (this.checkoutForm.invalid) {\n        console.warn(' Formulario invlido:', this.getFormErrors());\n        Object.keys(this.checkoutForm.controls).forEach(key => {\n          const control = this.checkoutForm.get(key);\n          control?.markAsTouched();\n        });\n        const errorMessages = Object.keys(this.getFormErrors())\n          .map(field => {\n            return `${field}: ${this.getErrorMessage(field)}`;\n          })\n          .join('\\n');\n        Swal.fire({\n          title: 'Datos incompletos',\n          text: `Por favor corrige los siguientes errores:\\n${errorMessages}`,\n          icon: 'warning',\n          confirmButtonColor: '#52667a'\n        });\n        return;\n      }\n      shippingData = this.checkoutForm.value;\n    }\n  \n    console.log(' Datos de envo a usar:', shippingData);\n    this.loading = true;\n    console.log(' Iniciando carga...');\n  \n    try {\n      // MODIFICA AQU: usa 'cant' y 'precio', que espera el backend\n      const orderLines: OrderLine[] = this.cartItems.map(item => {\n        return {\n          idpedido: 0,\n          idprod: item.id,\n          color: item.color || 'Estndar',\n          cantidad: item.cantidad,\n          precio: !isNaN(Number(item.precio)) && Number(item.precio) > 0\n            ? Number(item.precio)\n            : item.producto && typeof item.producto === 'object' && item.producto.precio\n              ? Number(item.producto.precio)\n              : 0,\n          nombre: item.nombre,\n          cant: item.cantidad\n        }\n      });\n      \n      \n      const order: Order = {\n        id: 0,\n        usuario_id: this.currentUser.id,\n        fecha: new Date().toISOString().split('T')[0],\n        total: this.total,\n        lineas: orderLines,\n        estado: 'pendiente'\n      };\n  \n      if (!this.currentUser?.id) {\n        console.error(' CRTICO: currentUser.id no est disponible');\n        Swal.fire({\n          title: 'Error de sesin',\n          text: 'Tu sesin ha expirado. Por favor, inicia sesin nuevamente.',\n          icon: 'error',\n          confirmButtonColor: '#52667a'\n        });\n        this.loading = false;\n        return;\n      }\n  \n      console.log(' Pedido preparado con usuario_id:', order.usuario_id);\n  \n      this.orderService.createOrder(order).subscribe({\n        next: response => {\n          console.log(' Pedido creado exitosamente:', response);\n          this.loading = false;\n          this.cartService.clearCart();\n          console.log(' Carrito vaciado');\n          //  Mensaje de xito, mostrando el nmero de pedido si lo devuelve el backend\n          let mensajeExito = 'Tu pedido ha sido procesado correctamente!';\n          if (response && response.id) {\n            mensajeExito = `Tu pedido ha sido procesado correctamente. Nmero de pedido: ${response.id}`;\n            console.log(' Nmero de pedido:', response.id);\n          } else {\n            console.warn(' El backend no devolvi el ID del pedido');\n            mensajeExito = 'Tu pedido ha sido procesado correctamente. Podrs verlo en tu historial de pedidos.';\n          }\n          Swal.fire({\n            title: 'Pago realizado con xito!',\n            text: mensajeExito,\n            icon: 'success',\n            confirmButtonColor: '#52667a',\n            confirmButtonText: 'Ver mis pedidos'\n          }).then(() => {\n            this.closeCheckout();\n            this.router.navigate(['/profile']);\n          });\n        },\n        error: error => {\n          console.error(' Error al crear el pedido:', error);\n          this.loading = false;\n          const errorMessage =\n            error.message ||\n            'Hubo un problema al procesar tu pedido. Por favor, intntalo de nuevo.';\n          Swal.fire({\n            title: 'Error al procesar el pedido',\n            text: errorMessage,\n            icon: 'error',\n            confirmButtonColor: '#52667a',\n            confirmButtonText: 'Intentar de nuevo'\n          });\n          if (error.status === 401) {\n            console.warn(' Error de autenticacin, cerrando sesin');\n            this.authService.logout();\n            this.closeCheckout();\n            this.router.navigate(['/login']);\n          }\n        }\n      });\n    } catch (error) {\n      console.error(' Error inesperado:', error);\n      this.loading = false;\n      Swal.fire({\n        title: 'Error inesperado',\n        text: 'Ocurri un error inesperado. Por favor, intntalo de nuevo.',\n        icon: 'error',\n        confirmButtonColor: '#52667a'\n      });\n    }\n  }\n  \n\n  goToDelivery (): void {\n    this.showOrder = false\n    this.showDelivery = true\n    this.showPayment = false\n  }\n\n  goToPayment (): void {\n    if (!this.useUserDataDirectly && this.checkoutForm.invalid) {\n      Object.keys(this.checkoutForm.controls).forEach(key => {\n        const control = this.checkoutForm.get(key)\n        control?.markAsTouched()\n      })\n      return\n    }\n\n    this.showOrder = false\n    this.showDelivery = false\n    this.showPayment = true\n  }\n\n  goToOrder (): void {\n    this.showOrder = true\n    this.showDelivery = false\n    this.showPayment = false\n  }\n\n  hasError (field: string): boolean {\n    if (this.useUserDataDirectly) return false\n    const control = this.checkoutForm.get(field)\n    return control ? control.invalid && control.touched : false\n  }\n\n  getErrorMessage (field: string): string {\n    if (this.useUserDataDirectly) return ''\n    const control = this.checkoutForm.get(field)\n\n    if (!control || !control.errors) return ''\n\n    if (control.hasError('required')) {\n      return 'Este campo es obligatorio'\n    }\n\n    if (control.hasError('minlength')) {\n      const minLength = control.errors?.['minlength'].requiredLength\n      return `Debe tener al menos ${minLength} caracteres`\n    }\n\n    if (control.hasError('pattern')) {\n      if (field === 'cp') {\n        return 'Debe ser un cdigo postal vlido de 4-5 dgitos'\n      }\n      if (field === 'telefono') {\n        return 'Debe ser un nmero de telfono vlido de 9 dgitos'\n      }\n    }\n\n    return 'Campo invlido'\n  }\n\n  private convertOrderLinesToCartItems (orderLines: OrderLine[]): CartItem[] {\n    return orderLines.map(line => {\n      return {\n        id: line.idprod,\n        nombre: line.nombre || '',\n        cantidad: line.cantidad,\n        color: line.color,\n        precio: this.findCartItemPrice(line.idprod, line.color),\n        imagen: this.findCartItemImage(line.idprod, line.color),\n        producto: this.findCartItemProducto(line.idprod, line.color)\n      } as CartItem\n    })\n  }\n\n  private findCartItemPrice (id: number, color: string): number {\n    const item = this.cartItems.find(i => i.id === id && i.color === color)\n    return item?.precio ?? 0\n  }\n\n  private findCartItemImage (id: number, color: string): string {\n    const item = this.cartItems.find(i => i.id === id && i.color === color)\n    return item?.imagen ?? ''\n  }\n\n  private findCartItemProducto (id: number, color: string): string {\n    const item = this.cartItems.find(i => i.id === id && i.color === color)\n    return item?.producto ?? ''\n  }\n}","<!-- Overlay del modal de checkout -->\n<div class=\"checkout-overlay\" *ngIf=\"currentUser && cartItems.length > 0\">\n  <!-- Contenedor principal del modal -->\n  <div class=\"vercheckout\">\n    <!-- Botn de cerrar -->\n    <button class=\"close-button\" (click)=\"closeCheckout()\" title=\"Cerrar\">\n      \n    </button>\n\n    <!-- Contenido del modal -->\n    <div class=\"modal-content\">\n      <!-- Seccin de direcciones de envo y facturacin -->\n      <div id=\"receptor\">\n        <!-- Direccin de envo -->\n        <div>\n          <h1>Se enviar a:</h1>\n          <div class=\"datos\">\n            <!-- Muestra los datos del usuario actual para el envo -->\n            {{ currentUser.nombre }}\n            <br />\n            {{ currentUser.email }}\n            <br />\n            {{ currentUser.direccion }}\n            <br />\n            {{ currentUser.cp }}\n            <br />\n            {{ currentUser.ciudad }}\n          </div>\n        </div>\n\n        <!-- Direccin de facturacin -->\n        <div>\n          <h1>Direccin de facturacin:</h1>\n          <div class=\"datos\">\n            <!-- Reutiliza los mismos datos del usuario para la facturacin -->\n            {{ currentUser.nombre }}\n            <br />\n            {{ currentUser.email }}\n            <br />\n            {{ currentUser.direccion }}\n            <br />\n            {{ currentUser.cp }}\n            <br />\n            {{ currentUser.ciudad }}\n          </div>\n        </div>\n      </div>\n\n      <!-- Seccin de listado de productos -->\n      <h1 class=\"productos-title\">Productos:</h1>\n      <table>\n        <!-- Encabezados de la tabla - SOLO 5 COLUMNAS -->\n        <thead>\n          <tr>\n            <th>Artculo</th>\n            <th>Color</th>\n            <th>Cantidad</th>\n            <th>Precio(u)</th>\n            <th>Precio (total)</th>\n          </tr>\n        </thead>\n\n        <!-- Cuerpo de la tabla: muestra cada producto en el carrito -->\n        <tbody>\n          <!-- Itera sobre cada item del carrito usando la directiva *ngFor -->\n          <tr *ngFor=\"let item of cartItems\">\n            <td class=\"articulo-cell\">\n              <img [src]=\"getImageSrc(item)\" [alt]=\"item.nombre\" (error)=\"handleImageError($event)\" />\n              <span class=\"articulo-nombre\">{{ item.nombre }}</span>\n            </td>\n            <td>{{ item.color }}</td>\n            <td>{{ item.cantidad }}</td>\n            <!--  CORRECCIN: Euro despus de la cantidad -->\n            <td>{{ item.precio | number:'1.2-2' }} </td>\n            <!--  CORRECCIN: Euro despus del subtotal -->\n            <td>{{ item.precio * item.cantidad | number:'1.2-2' }} </td>\n          </tr>\n        </tbody>\n\n        <!-- Pie de tabla: muestra el total -->\n        <tfoot>\n          <tr>\n            <!-- Celda que ocupa 4 columnas -->\n            <td colspan=\"4\">Total:</td>\n            <!--  CORRECCIN: Euro despus del total -->\n            <td>{{ total | number:'1.2-2' }} </td>\n          </tr>\n        </tfoot>\n      </table>\n\n\n      <!-- Botn separado de la tabla -->\n      <div class=\"button-container\">\n        <button id=\"comprar\" (click)=\"placeOrder()\" [disabled]=\"loading\">\n          <span *ngIf=\"!loading\">COMPRAR</span>\n          <span *ngIf=\"loading\">PROCESANDO...</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, OnInit, OnDestroy } from '@angular/core'\nimport { Subscription } from 'rxjs'\nimport { OrderService } from '../../services/order.service'\nimport { PdfService } from '../../services/pdf.service'\nimport { AuthService } from '../../services/auth.service'\nimport { Order, OrderLine } from '../../models/order'\nimport { User } from '../../models/user'\nimport Swal from 'sweetalert2'\n\n@Component({\n  selector: 'app-historial-pedidos',\n  templateUrl: './historial-pedidos.component.html',\n  styleUrls: ['./historial-pedidos.component.scss']\n})\nexport class HistorialPedidosComponent implements OnInit, OnDestroy {\n  pedidos: (Order & { expanded?: boolean })[] = []\n  currentUser: User | null = null\n  private subscription?: Subscription\n\n  constructor (\n    private orderService: OrderService,\n    private pdfService: PdfService,\n    private authService: AuthService\n  ) {}\n\n  ngOnInit (): void {\n    this.currentUser = this.authService.currentUserValue || null\n    this.loadPedidos()\n  }\n\n  ngOnDestroy (): void {\n    if (this.subscription) this.subscription.unsubscribe()\n  }\n\n  loadPedidos (): void {\n    this.subscription = this.orderService.getUserOrders().subscribe({\n      next: (orders: Order[]) => {\n        // Ordena del ms reciente al ms antiguo\n        this.pedidos = orders\n          .sort((a, b) => {\n            const dateB = new Date(b.fecha).getTime()\n            const dateA = new Date(a.fecha).getTime()\n            if (dateB !== dateA) {\n              return dateB - dateA\n            }\n            return (b.id ?? 0) - (a.id ?? 0)\n          })\n          .map(p => ({ ...p, expanded: false }))\n        \n        console.log(' Pedidos cargados:', this.pedidos.length)\n      },\n      error: err => {\n        console.error(' Error cargando pedidos:', err)\n        Swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: 'No se pudieron cargar los pedidos',\n          confirmButtonColor: '#52667a'\n        })\n      }\n    })\n  }\n\n  /**\n   *  MTODO CORREGIDO PARA DESCARGAR ALBARN\n   * Usa el servicio PDF del frontend (jsPDF) directamente\n   */\n  descargarAlbaran(pedidoId: number): void {\n    console.log(' Descargando albarn para pedido:', pedidoId)\n    \n    // Buscar el pedido en la lista actual\n    const pedido = this.pedidos.find(p => p.id === pedidoId)\n    \n    if (!pedido) {\n      console.error(' Pedido no encontrado:', pedidoId)\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Pedido no encontrado',\n        confirmButtonColor: '#52667a'\n      })\n      return\n    }\n\n    if (!this.currentUser) {\n      console.error(' Usuario no disponible')\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Usuario no disponible',\n        confirmButtonColor: '#52667a'\n      })\n      return\n    }\n\n    //  VERIFICAR SI HAY LNEAS EN EL PEDIDO\n    if (!pedido.lineas || pedido.lineas.length === 0) {\n      console.warn(' El pedido no tiene lneas, obteniendo del servidor...')\n      \n      // Si no hay lneas, obtenerlas del servidor\n      this.orderService.getOrderLines(pedido.id ?? 0).subscribe({\n        next: (lineas: OrderLine[]) => {\n          console.log(' Lneas obtenidas del servidor:', lineas)\n          \n          // Asignar las lneas al pedido\n          pedido.lineas = lineas\n          \n          // Generar el PDF con las lneas obtenidas\n          this.generarYDescargarPDF(pedido, lineas)\n        },\n        error: (err) => {\n          console.error(' Error obteniendo lneas del pedido:', err)\n          Swal.fire({\n            icon: 'error',\n            title: 'Error',\n            text: 'No se pudieron obtener los detalles del pedido',\n            confirmButtonColor: '#52667a'\n          })\n        }\n      })\n    } else {\n      console.log(' Pedido con lneas:', pedido.lineas.length)\n      \n      // Si ya hay lneas, generar el PDF directamente\n      this.generarYDescargarPDF(pedido, pedido.lineas)\n    }\n  }\n\n  /**\n   *  MTODO PRIVADO PARA GENERAR Y DESCARGAR EL PDF\n   */\n  private generarYDescargarPDF(pedido: Order, lineas: OrderLine[]): void {\n    console.log(' Generando PDF...')\n    console.log(' Pedido:', pedido)\n    console.log(' Lneas:', lineas)\n    console.log(' Usuario:', this.currentUser)\n\n    // Mostrar indicador de carga\n    Swal.fire({\n      title: 'Generando albarn...',\n      text: 'Por favor espere',\n      allowOutsideClick: false,\n      didOpen: () => {\n        Swal.showLoading()\n      }\n    })\n\n    //  USAR EL SERVICIO PDF DEL FRONTEND\n    this.pdfService.generarAlbaran(pedido, lineas, this.currentUser)\n      .then((pdfBlob: Blob) => {\n        console.log(' PDF generado correctamente')\n        \n        // Cerrar indicador de carga\n        Swal.close()\n        \n        //  DESCARGAR EL PDF AUTOMTICAMENTE\n        const url = window.URL.createObjectURL(pdfBlob)\n        const link = document.createElement('a')\n        link.href = url\n        link.download = `Albaran_${pedido.id}_${new Date().toISOString().split('T')[0]}.pdf`\n        \n        // Disparar la descarga\n        document.body.appendChild(link)\n        link.click()\n        \n        // Limpiar\n        document.body.removeChild(link)\n        window.URL.revokeObjectURL(url)\n        \n        console.log(' Descarga iniciada')\n        \n        // Mostrar mensaje de xito\n        Swal.fire({\n          icon: 'success',\n          title: 'Tatoodenda!',\n          text: 'Albarn descargado correctamente',\n          timer: 6000,\n          showConfirmButton: false\n        })\n      })\n      .catch((error) => {\n        console.error(' Error generando PDF:', error)\n        \n        Swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: 'No se pudo generar el albarn. Por favor, intntelo de nuevo.',\n          confirmButtonColor: '#52667a'\n        })\n      })\n  }\n}\n","<div class=\"historial-container\">\n  <h2 class=\"historial-title\">Historial de Pedidos</h2>\n\n  <div *ngIf=\"pedidos.length === 0\" class=\"no-pedidos\">\n    <div class=\"no-pedidos-icon\"></div>\n    <h3>No tienes pedidos an</h3>\n    <p>Prueba a realizar tu primera compra. Tus pedidos aparecern aqu!</p>\n  </div>\n\n  <div class=\"pedidos-list\" *ngIf=\"pedidos.length > 0\">\n    <div class=\"pedido-item\" *ngFor=\"let pedido of pedidos; let idx = index\">\n      <div class=\"pedido-header\" (click)=\"pedido.expanded = !pedido.expanded\">\n        <div class=\"pedido-info\">\n          <span class=\"pedido-ref\">Pedido #{{pedido.id}}</span>\n          <span class=\"pedido-fecha\">{{pedido.fecha | date:'mediumDate'}}</span>\n        </div>\n        <!--  CORRECCIN: Euro despus con espacio -->\n        <span class=\"pedido-total\">{{pedido.total | number:'1.2-2'}} </span>\n        <div class=\"expand-icon\" [ngClass]=\"{'expanded': pedido.expanded}\">\n          <span>&#9660;</span>\n        </div>\n      </div>\n\n      <div class=\"pedido-content\" [ngClass]=\"{'expanded': pedido.expanded}\">\n        <div class=\"pedido-details\" *ngIf=\"pedido.expanded\">\n          <div class=\"pedido-actions\">\n            <button *ngIf=\"pedido.id\" class=\"action-btn pdf-btn\" (click)=\"descargarAlbaran(pedido.id)\">\n              <span class=\"pdf-icon\"></span>\n              <span class=\"pdf-text\">Descargar Albarn</span>\n            </button>\n          </div>\n          <table class=\"pedido-table\">\n            <thead>\n              <tr>\n                <th>Producto</th>\n                <th>Cantidad</th>\n                <th>Color</th>\n                <th>Precio</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr *ngFor=\"let linea of pedido.lineas\">\n                <td data-label=\"Producto\">{{linea.nombre}}</td>\n                <td data-label=\"Cantidad\">{{linea.cantidad}}</td>\n                <td data-label=\"Color\">{{linea.color}}</td>\n                <!--  CORRECCIN: Euro despus con espacio -->\n                <td data-label=\"Precio\">{{ linea.precio | number: '1.2-2' }} </td>\n              </tr>\n            </tbody>\n            <tfoot>\n              <tr class=\"precio-total-row\">\n                <td colspan=\"3\"></td>\n                <!--  CORRECCIN: Euro despus con espacio -->\n                <td><strong>Total:</strong> {{ pedido.total | number: '1.2-2' }} </td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n","import { Component, OnInit } from '@angular/core';\n// Importacin para trabajar con formularios reactivos\nimport { Product } from '../../models/product';\n// Importacin de servicios necesarios\nimport { ProductService } from '../../services/product.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html'\n})\nexport class HomeComponent implements OnInit {\n  // Array para almacenar todos los productos\n  products: Product[] = [];\n  \n  // Array para almacenar los productos aleatorios que se mostrarn\n  randomProducts: Product[] = [];\n  \n  // Indicador de carga\n  loading: boolean = false;\n\n  // Constructor del componente donde inyectamos las dependencias\n  constructor(public productService: ProductService) { }\n\n  // Mtodo de ciclo de vida que se ejecuta cuando Angular ha terminado de inicializar el componente\n  ngOnInit(): void {\n    // Cargamos la lista de productos\n    this.loadProducts();\n  }\n\n  // Mtodo para cargar productos desde el servicio y seleccionar aleatorios\n  loadProducts(): void {\n    this.loading = true;\n    console.log('HomeComponent: Cargando productos...');\n    \n    this.productService.getProducts().subscribe({\n      next: (products: Product[]) => {\n        this.products = products;\n        console.log('HomeComponent: Productos cargados:', products);\n        // Seleccionar productos aleatorios\n        this.selectRandomProducts();\n        this.loading = false;\n      },\n      error: (error: any) => {\n        console.error('HomeComponent: Error loading products', error);\n        this.loading = false;\n      }\n    });\n  }\n\n  // Mtodo para seleccionar productos aleatorios\n  selectRandomProducts(): void {\n    // Crear una copia del array original para no modificarlo\n    const productsCopy = [...this.products];\n    this.randomProducts = [];\n    \n    // Determinar cuntos productos seleccionar (8 o menos si no hay suficientes)\n    const numToSelect = Math.min(8, productsCopy.length);\n    \n    // Seleccionar productos aleatorios\n    for (let i = 0; i < numToSelect; i++) {\n      // Generar un ndice aleatorio\n      const randomIndex = Math.floor(Math.random() * productsCopy.length);\n      // Aadir el producto al array de aleatorios\n      this.randomProducts.push(productsCopy[randomIndex]);\n      // Eliminar el producto seleccionado para no repetirlo\n      productsCopy.splice(randomIndex, 1);\n    }\n    \n    console.log('HomeComponent: Productos aleatorios seleccionados:', this.randomProducts);\n  }\n\n  // Mtodo para abrir el popup del producto - CLAVE PARA SOLUCIONAR EL PROBLEMA\n  openProductPopup(product: Product, event: Event): void {\n    // Prevenir la navegacin por defecto que causara el router-link\n    event.preventDefault();\n    event.stopPropagation();\n    \n    console.log('HomeComponent: Abriendo popup para producto:', product.nombre);\n    \n    // Usar el servicio para mostrar el popup en lugar de navegar a la pgina de detalle\n    this.productService.selectProductForPopup(product);\n  }\n\n  // Mtodo para formatear el precio \n  formatPrice(price: number): string {\n    return new Intl.NumberFormat('es-ES', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(price);\n  }\n}","<!-- Indicador de carga -->\n<div *ngIf=\"loading\" class=\"loading-indicator\">\n  <p>Cargando productos...</p>\n</div>\n\n<!-- Ttulo de la seccin en cursiva - CORREGIDO -->\n<div class=\"category-header\">\n  <h1 id=\"titulo\">novedades</h1>\n</div>\n\n<!-- Contenedor para la cuadrcula de productos aleatorios -->\n<div id=\"articulos\" *ngIf=\"!loading\">\n  <!-- Mensaje si no hay productos -->\n  <div *ngIf=\"randomProducts.length === 0\" class=\"no-products\">\n    <p>No se encontraron productos disponibles.</p>\n  </div>\n  \n  <!-- IMPORTANTE: Cambiamos [routerLink] por (click) para usar el mtodo openProductPopup -->\n  <div class=\"articulo\" *ngFor=\"let product of randomProducts\" (click)=\"openProductPopup(product, $event)\">\n    <!-- Imagen del producto usando el servicio centralizado -->\n    <img [src]=\"productService.getProductImageSrc(product)\" [alt]=\"product.nombre\" \n         (error)=\"productService.handleImageError($event)\" />\n    \n    <!-- Nombre del producto -->\n    <h2>{{ product.nombre }}</h2>\n    \n    <!-- Precio del producto formateado como moneda -->\n    <h3>{{ formatPrice(product.precio) }}</h3>\n    \n    <!-- Descripcin del producto -->\n    <p>{{ product.descripcion }}</p>\n  </div>\n</div>\n\n<!-- IMPORTANTE: Aadir el componente popup de producto -->\n<app-product-popup></app-product-popup>","// login-popup.component.ts - VERSIN CORREGIDA\nimport { Component, OnInit, Output, EventEmitter, Input, ViewEncapsulation } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../services/auth.service';\n\n@Component({\n  selector: 'app-login-popup',\n  templateUrl: './login-popup.component.html',\n  styleUrls: ['./login-popup.component.scss'],\n  encapsulation: ViewEncapsulation.None // CRTICO: Permite que los estilos se apliquen globalmente\n})\nexport class LoginPopupComponent implements OnInit {\n  @Input() isVisible: boolean = false;\n  @Input() returnUrl: string = '/';              //  AGREGADO: Input faltante\n  @Input() fromCheckout: boolean = false;        //  AGREGADO: Input faltante\n  \n  @Output() closePopup = new EventEmitter<void>();\n  @Output() loginSuccess = new EventEmitter<any>(); //  CORREGIDO: Cambiar a <any> para pasar el usuario\n  @Output() switchToRegistro = new EventEmitter<void>();\n\n  usuario: string = '';\n  contrasena: string = '';\n  isLoading: boolean = false;\n  errorMessage: string = '';\n\n  constructor(\n    private authService: AuthService,\n    private router: Router\n  ) { }\n\n  ngOnInit(): void {\n    // Escuchar cambios en isVisible para manejar scroll del body\n    this.handleBodyScroll();\n  }\n\n  ngOnChanges(): void {\n    // Manejar scroll del body cuando cambia la visibilidad\n    this.handleBodyScroll();\n  }\n\n  ngOnDestroy(): void {\n    // Restaurar scroll al destruir el componente\n    document.body.style.overflow = 'auto';\n  }\n\n  // Manejar el scroll del body\n  private handleBodyScroll(): void {\n    if (this.isVisible) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = 'auto';\n    }\n  }\n\n  // Mtodo para cerrar el popup\n  cerrarPopup(): void {\n    this.closePopup.emit();\n    this.resetForm();\n    document.body.style.overflow = 'auto'; // Restaurar scroll\n  }\n\n  // Mtodo para cerrar el popup al hacer click en el overlay\n  onOverlayClick(event: MouseEvent): void {\n    if (event.target === event.currentTarget) {\n      this.cerrarPopup();\n    }\n  }\n\n  // Mtodo para iniciar sesin\n  iniciarSesion(): void {\n    if (!this.usuario || !this.contrasena) {\n      this.errorMessage = 'Por favor, completa todos los campos';\n      return;\n    }\n\n    this.isLoading = true;\n    this.errorMessage = '';\n\n    this.authService.login(this.usuario, this.contrasena).subscribe({\n      next: (response) => {\n        this.isLoading = false;\n        console.log(' Login exitoso en popup:', response);\n        \n        //  IMPORTANTE: Emitir el usuario completo, no solo void\n        this.loginSuccess.emit(response);\n        this.cerrarPopup();\n      },\n      error: (error) => {\n        this.isLoading = false;\n        this.errorMessage = error.message || 'Usuario o contrasea incorrectos';\n        console.error(' Error en login:', error);\n      }\n    });\n  }\n\n  // Mtodo para navegar al registro\n  irARegistro(): void {\n    this.switchToRegistro.emit();\n    this.resetForm();\n  }\n\n  // Mtodo para resetear el formulario\n  private resetForm(): void {\n    this.usuario = '';\n    this.contrasena = '';\n    this.errorMessage = '';\n    this.isLoading = false;\n  }\n\n  // Mtodo para manejar Enter en los campos\n  onKeyPress(event: KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      this.iniciarSesion();\n    }\n  }\n\n  // Mtodo para manejar la tecla Escape\n  onKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Escape') {\n      this.cerrarPopup();\n    }\n  }\n}","<!-- login-popup.component.html -->\n<div class=\"login-popup-overlay\" \n     [class.active]=\"isVisible\" \n     (click)=\"onOverlayClick($event)\"\n     (keydown)=\"onKeyDown($event)\"\n     tabindex=\"0\"\n     *ngIf=\"isVisible\">\n     \n  <div class=\"login-popup-container\">\n    <!-- Botn de cerrar -->\n    <button class=\"close-popup-btn\" (click)=\"cerrarPopup()\" type=\"button\"></button>\n    \n    <!-- Ttulo del popup -->\n    <div class=\"login-popup-header\">\n      <h2 class=\"login-title\" style=\"font-family: 'Montserrat', Arial, sans-serif !important; font-style: normal !important; font-weight: 600 !important;\">Login</h2>\n    </div>\n    \n    <!-- Formulario de login -->\n    <div class=\"login-popup-content\">\n      <form (ngSubmit)=\"iniciarSesion()\" #loginForm=\"ngForm\">\n        <!-- Campo Usuario -->\n        <div class=\"form-group\">\n          <label for=\"usuario\">Usuario:</label>\n          <input \n            type=\"text\" \n            id=\"usuario\"\n            name=\"usuario\"\n            [(ngModel)]=\"usuario\"\n            (keypress)=\"onKeyPress($event)\"\n            placeholder=\"Introduce tu usuario\"\n            required\n            autocomplete=\"username\"\n            [disabled]=\"isLoading\">\n        </div>\n        \n        <!-- Campo Contrasea - CORREGIDO -->\n        <div class=\"form-group\">\n          <label for=\"contrasena\">Contrasea:</label>\n          <input \n            type=\"password\" \n            id=\"contrasena\"\n            name=\"contrasena\"\n            [(ngModel)]=\"contrasena\"\n            (keypress)=\"onKeyPress($event)\"\n            placeholder=\"Introduce tu contrasea\"\n            required\n            autocomplete=\"current-password\"\n            [disabled]=\"isLoading\">\n        </div>\n        \n        <!-- Mensaje de error -->\n        <div class=\"error-message\" *ngIf=\"errorMessage\">\n          <i class=\"error-icon\"></i>\n          {{ errorMessage }}\n        </div>\n        \n        <!-- Botn de iniciar sesin -->\n        <button \n          type=\"submit\" \n          class=\"login-btn\"\n          [disabled]=\"isLoading || !usuario || !contrasena\">\n          <span *ngIf=\"!isLoading\">INICIAR SESIN</span>\n          <span *ngIf=\"isLoading\" class=\"loading-text\">\n            <span class=\"spinner\"></span>\n            Cargando...\n          </span>\n        </button>\n      </form>\n      \n      <!-- Enlace de registro -->\n      <div class=\"register-link\">\n        <p>No ests registrado? \n          <a href=\"#\" (click)=\"irARegistro(); $event.preventDefault()\">Regstrate!</a>\n        </p>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { OrderLine } from 'src/app/models/order';\nimport { ProductService } from '../../services/product.service';\nimport Swal from 'sweetalert2';\n\n@Component({\n  selector: 'app-orderline',\n  templateUrl: './orderline.component.html',\n  styleUrls: ['./orderline.component.scss']\n})\nexport class OrderLineComponent implements OnInit {\n  // Entrada: la lnea de pedido a mostrar\n  @Input() line!: OrderLine;\n\n  // Evento para notificar al componente padre cuando se elimina la lnea\n  @Output() removeLine = new EventEmitter<OrderLine>();\n\n  // Evento para notificar al componente padre cuando se actualiza la cantidad\n  @Output() updateQuantity = new EventEmitter<{line: OrderLine, newQuantity: number}>();\n\n  // Propiedad para la imagen del producto\n  productImage: string = '';\n  \n  // Propiedad para el precio del producto\n  productPrice: number = 0;\n\n  // Constructor con inyeccin de servicios\n  constructor(\n    private productService: ProductService\n  ) { }\n\n  // Mtodo para eliminar la lnea\n\n  ngOnInit(): void {\n    // Si tenemos el id del producto, cargamos su imagen y datos\n    if (this.line.idprod) {\n      this.loadProductData();\n    }\n    \n    // Log para depuracin\n    console.log('OrderLine inicializado con:', this.line);\n  }\n\n  // Mtodo para cargar los datos del producto (imagen y precio)\n  loadProductData(): void {\n    this.productService.getProduct(this.line.idprod).subscribe({\n      next: (product) => {\n        if (product) {\n          // Guardamos la imagen\n          if (product.imagen) {\n            this.productImage = product.imagen;\n          } else {\n            this.productImage = 'assets/images/products/default.jpg';\n          }\n          \n          // Guardamos el precio\n          if (product.precio) {\n            this.productPrice = product.precio;\n          }\n        } else {\n          // Imagen por defecto si no existe el producto\n          this.productImage = 'assets/images/products/default.jpg';\n        }\n      },\n      error: (error) => {\n        console.error('Error loading product data', error);\n        // Imagen por defecto en caso de error\n        this.productImage = 'assets/images/products/default.jpg';\n      }\n    });\n  }\n\n  removeOrderLine(): void {\n    Swal.fire({\n      title: 'Ests seguro?',\n      text: 'Esta accin eliminar el producto de tu pedido',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#52667a',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'S, eliminar',\n      cancelButtonText: 'Cancelar'\n    }).then((result) => {\n      if (result.isConfirmed) {\n        this.removeLine.emit(this.line);\n      }\n    });\n  }\n\n  // Mtodo para incrementar la cantidad\n  incrementQuantity(): void {\n    const newQuantity = this.line.cantidad + 1;\n    this.updateQuantity.emit({line: this.line, newQuantity});\n  }\n\n  // Mtodo para decrementar la cantidad\n  decrementQuantity(): void {\n    if (this.line.cantidad > 1) {\n      const newQuantity = this.line.cantidad - 1;\n      this.updateQuantity.emit({line: this.line, newQuantity});\n    } else {\n      // Si intenta reducir a 0, preguntamos si quiere eliminar\n      this.removeOrderLine();\n    }\n  }\n\n  // Mtodo para manejar cambios directos en el campo de cantidad\n  onQuantityChange(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    const newQuantity = parseInt(input.value, 10);\n    \n    // Validar la cantidad\n    if (isNaN(newQuantity) || newQuantity < 1) {\n      // Restaurar el valor anterior\n      input.value = this.line.cantidad.toString();\n      return;\n    }\n    \n    // Emitir el evento de actualizacin\n    this.updateQuantity.emit({line: this.line, newQuantity});\n  }\n}","<!-- Contenedor principal de la lnea de pedido -->\n<div class=\"orderline-container\">\n    <!-- Informacin del producto -->\n    <div class=\"product-info\">\n      <!-- Imagen del producto -->\n      <div class=\"product-image\">\n        <img [src]=\"productImage || 'assets/images/products/default.jpg'\" alt=\"Imagen del producto\" class=\"miniatura\" />\n      </div>\n      \n      <!-- Detalles del producto -->\n      <div class=\"product-details\">\n        <h4>{{ line.nombre }}</h4>\n        <p class=\"color-info\">Color: <span class=\"color-value\">{{ line.color }}</span></p>\n      </div>\n    </div>\n    \n    <!-- Control de cantidad -->\n    <div class=\"quantity-control\">\n      <!-- Botn para disminuir cantidad -->\n      <button class=\"quantity-btn minus\" (click)=\"decrementQuantity()\">-</button>\n      \n      <!-- Input para la cantidad -->\n      <input type=\"number\" class=\"quantity-input\" [value]=\"line.cantidad\" min=\"1\" \n             (change)=\"onQuantityChange($event)\" />\n      \n      <!-- Botn para aumentar cantidad -->\n      <button class=\"quantity-btn plus\" (click)=\"incrementQuantity()\">+</button>\n    </div>\n    \n    <!-- Precios (usando la propiedad del componente) -->\n    <div class=\"price-info\">\n      <div class=\"unit-price\" *ngIf=\"productPrice\">\n        <span>{{ productPrice | currency:'EUR':'symbol':'1.2-2' }}</span>\n      </div>\n      <div class=\"subtotal\" *ngIf=\"productPrice\">\n        <span>{{ productPrice * line.cantidad | currency:'EUR':'symbol':'1.2-2' }}</span>\n      </div>\n    </div>\n    \n    <!-- Botn para eliminar la lnea -->\n    <div class=\"remove-action\">\n      <button class=\"remove-btn\" (click)=\"removeOrderLine()\">\n        <span class=\"eliminar\"></span>\n      </button>\n    </div>\n  </div>","// src/app/components/password-confirm-modal/password-confirm-modal.component.ts\n\nimport { Component, OnInit, OnDestroy, EventEmitter, Output } from '@angular/core';\nimport { AuthService } from '../../services/auth.service';\nimport { User } from '../../models/user';\n\n@Component({\n  selector: 'app-password-confirm-modal',\n  templateUrl: './password-confirm-modal.html',\n  styleUrls: ['./password-confirm-modal.scss']\n})\nexport class PasswordConfirmModalComponent implements OnInit, OnDestroy {\n  @Output() confirmed = new EventEmitter<string>();\n  @Output() cancelled = new EventEmitter<void>();\n\n  isVisible = false;\n  password = '';\n  showPassword = false;\n  hasError = false;\n  errorMessage = '';\n  isLoading = false;\n  currentUser: User | null = null;\n  currentDateTime = '';\n  \n  private intervalId: any;\n\n  constructor(private authService: AuthService) {}\n\n  ngOnInit(): void {\n    console.log(' PasswordConfirmModalComponent inicializado');\n    this.currentUser = this.authService.currentUserValue;\n    console.log(' Usuario actual:', this.currentUser);\n    this.updateDateTime();\n    \n    // Actualizar fecha y hora cada segundo\n    this.intervalId = setInterval(() => {\n      this.updateDateTime();\n    }, 1000);\n  }\n\n  ngOnDestroy(): void {\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n    }\n  }\n\n  /**\n   * Actualizar fecha y hora actual\n   */\n  private updateDateTime(): void {\n    const now = new Date();\n    const options: Intl.DateTimeFormatOptions = {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n      hour12: false\n    };\n    \n    this.currentDateTime = now.toLocaleDateString('es-ES', options);\n  }\n\n  /**\n   * Obtener iniciales del usuario para el avatar\n   */\n  getUserInitials(): string {\n    if (!this.currentUser?.username) {\n      return 'U';\n    }\n    \n    const username = this.currentUser.username;\n    const parts = username.split(' ');\n    \n    if (parts.length >= 2) {\n      return (parts[0][0] + parts[1][0]).toUpperCase();\n    }\n    \n    return username.substring(0, 2).toUpperCase();\n  }\n\n  /**\n   * Mostrar/ocultar contrasea\n   */\n  togglePasswordVisibility(): void {\n    this.showPassword = !this.showPassword;\n  }\n\n  /**\n   * Manejar cambios en el input de contrasea\n   */\n  onPasswordInput(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    this.password = input.value;\n    this.hasError = false;\n  }\n\n  /**\n   * Abrir modal\n   */\n  open(): void {\n    console.log(' Abriendo modal de confirmacin de contrasea');\n    this.isVisible = true;\n    this.password = '';\n    this.hasError = false;\n    this.errorMessage = '';\n    this.showPassword = false;\n    this.isLoading = false;\n    \n    // Focus en el input despus de la animacin\n    setTimeout(() => {\n      const input = document.getElementById('password') as HTMLInputElement;\n      if (input) {\n        input.focus();\n      }\n    }, 300);\n  }\n\n  /**\n   * Cerrar modal\n   */\n  close(): void {\n    console.log(' Cerrando modal de confirmacin de contrasea');\n    this.isVisible = false;\n    this.password = '';\n    this.hasError = false;\n    this.errorMessage = '';\n  }\n\n  /**\n   * Manejar confirmacin\n   */\n  async onConfirm(): Promise<void> {\n    if (!this.password) {\n      this.hasError = true;\n      this.errorMessage = 'Por favor, ingresa tu contrasea';\n      return;\n    }\n\n    this.isLoading = true;\n    this.hasError = false;\n\n    try {\n      // Verificar contrasea con el backend\n      const username = this.currentUser?.username || '';\n      \n      console.log(' Verificando contrasea para usuario:', username);\n      \n      // Intentar login para verificar contrasea\n      const user = await this.authService.login(username, this.password).toPromise();\n      \n      console.log(' Contrasea verificada correctamente');\n      \n      // Si llega aqu, la contrasea es correcta\n      this.isLoading = false;\n      this.confirmed.emit(this.password);\n      this.close();\n      \n    } catch (error: any) {\n      console.error(' Error al verificar contrasea:', error);\n      this.isLoading = false;\n      this.hasError = true;\n      this.errorMessage = 'Contrasea incorrecta. Intntalo de nuevo.';\n    }\n  }\n\n  /**\n   * Manejar cancelacin\n   */\n  onCancel(): void {\n    console.log(' Usuario cancel la confirmacin de contrasea');\n    this.cancelled.emit();\n    this.close();\n  }\n}","<!-- Modal overlay -->\n<div class=\"modal-overlay\" *ngIf=\"isVisible\" (click)=\"onCancel()\">\n  \n  <!-- Modal container -->\n  <div class=\"modal-container\" (click)=\"$event.stopPropagation()\">\n    \n    <!-- Header con degradado -->\n    <div class=\"modal-header\">\n      <div class=\"header-content\">\n        <div class=\"icon-wrapper\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n            <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n          </svg>\n        </div>\n        <h2>Confirmacin de Seguridad</h2>\n        <p>Por tu seguridad, confirma tu contrasea para continuar</p>\n      </div>\n    </div>\n\n    <!-- Informacin del usuario -->\n    <div class=\"user-info-card\">\n      <div class=\"user-avatar\">\n        <span>{{ getUserInitials() }}</span>\n      </div>\n      <div class=\"user-details\">\n        <h3>{{ currentUser?.username || 'Usuario' }}</h3>\n        <p class=\"user-email\">{{ currentUser?.email || '' }}</p>\n        <div class=\"session-info\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n            <polyline points=\"12 6 12 12 16 14\"></polyline>\n          </svg>\n          <span>{{ currentDateTime }}</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- Formulario de contrasea -->\n    <form (ngSubmit)=\"onConfirm()\" class=\"password-form\">\n      <div class=\"form-group\">\n        <label for=\"password\">Contrasea actual</label>\n        <div class=\"input-wrapper\" [class.error]=\"hasError\">\n          <input \n            type=\"{{ showPassword ? 'text' : 'password' }}\"\n            id=\"password\"\n            [(ngModel)]=\"password\"\n            name=\"password\"\n            placeholder=\"Ingresa tu contrasea\"\n            autocomplete=\"current-password\"\n            [class.invalid]=\"hasError\"\n            (input)=\"hasError = false\"\n            required>\n          <button \n            type=\"button\" \n            class=\"toggle-password\"\n            (click)=\"togglePasswordVisibility()\"\n            tabindex=\"-1\">\n            <svg *ngIf=\"!showPassword\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\n              <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n            </svg>\n            <svg *ngIf=\"showPassword\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <path d=\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24\"></path>\n              <line x1=\"1\" y1=\"1\" x2=\"23\" y2=\"23\"></line>\n            </svg>\n          </button>\n        </div>\n        <p class=\"error-message\" *ngIf=\"hasError\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n            <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\n            <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\n          </svg>\n          {{ errorMessage }}\n        </p>\n      </div>\n\n      <!-- Botones de accin -->\n      <div class=\"button-group\">\n        <button type=\"button\" class=\"btn btn-secondary\" (click)=\"onCancel()\">\n          Cancelar\n        </button>\n        <button \n          type=\"submit\" \n          class=\"btn btn-primary\"\n          [disabled]=\"!password || isLoading\">\n          <span *ngIf=\"!isLoading\">Confirmar</span>\n          <span *ngIf=\"isLoading\" class=\"loading-spinner\"></span>\n        </button>\n      </div>\n    </form>\n\n    <!-- Footer informativo -->\n    <div class=\"modal-footer\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n        <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line>\n        <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line>\n      </svg>\n      <span>Esta accin requiere autenticacin adicional para proteger tu cuenta</span>\n    </div>\n  </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ProductService } from '../../../services/product.service';\nimport { CartService } from '../../../services/cart.service';\nimport { Product } from '../../../models/product';\n\n@Component({\n  selector: 'app-product-detail',\n  templateUrl: './product-detail.component.html',\n  // Eliminamos la referencia al archivo SCSS si no existe\n  styleUrls: []\n})\nexport class ProductDetailComponent implements OnInit {\n  // Datos del producto\n  product: Product | null = null;\n  \n  // Opciones de producto\n  colors: any[] = [];\n  sizes: string[] = [];\n  \n  // Selecciones actuales\n  selectedColor: string = '';\n  selectedSize: string = '';\n  quantity: number = 1;\n  \n  // Estado de carga\n  loading: boolean = true;\n  \n  // Variable para controlar la visibilidad del popup\n  showPopup: boolean = false;\n  \n  // Imgenes\n  currentImageIndex: number = 0;\n  relatedProducts: Product[] = [];\n\n  constructor(\n    private route: ActivatedRoute,\n    public productService: ProductService,\n    private cartService: CartService\n  ) { }\n\n  ngOnInit(): void {\n    this.route.params.subscribe(params => {\n      const productId = +params['id'];\n      this.loadProductDetails(productId);\n      this.loadProductColors(productId);\n      this.loadRelatedProducts(productId);\n    });\n  }\n\n  // Cargar detalles del producto\n  loadProductDetails(productId: number): void {\n    this.loading = true;\n    this.productService.getProduct(productId).subscribe({\n      next: (product: Product) => {\n        this.product = product;\n        this.loading = false;\n      },\n      error: (error: any) => {\n        console.error('Error loading product details', error);\n        this.loading = false;\n      }\n    });\n  }\n\n  // Cargar colores disponibles\n  loadProductColors(productId: number): void {\n    this.productService.getProductColors(productId).subscribe({\n      next: (colors: any[]) => (this.colors = colors),\n      error: (error: any) => console.error('Error loading product colors', error)\n    });\n  }\n\n  // Cargar productos relacionados\n  loadRelatedProducts(productId: number): void {\n    this.productService.getProducts().subscribe({\n      next: (products: Product[]) => {\n        this.relatedProducts = products\n          .filter(p => p.id !== productId)\n          .slice(0, 4);\n      },\n      error: (error: any) => console.error('Error loading related products', error)\n    });\n  }\n\n  // Mtodo para obtener la ruta de la imagen del producto\n  getImagePath(product: Product | null, color?: any): string {\n    if (!product) {\n      return this.productService.defaultImage; // Usar imagen por defecto\n    }\n    return this.productService.getProductImageSrc(product);\n  }\n\n  // Mtodo para cambiar el color del producto\n  changeColor(colorCode: string): void {\n    this.selectedColor = colorCode;\n  }\n\n  // Mtodo para formatear el precio\n  formatPrice(price: number | undefined): string {\n    if (price === undefined) return '0.00';\n    return new Intl.NumberFormat('es-ES', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(price);\n  }\n\n  // Cambiar imagen actual\n  changeImage(index: number): void {\n    this.currentImageIndex = index;\n  }\n\n  // Cambiar tamao seleccionado\n  selectSize(size: string): void {\n    this.selectedSize = size;\n  }\n\n  // Incrementar cantidad\n  incrementQuantity(): void {\n    this.quantity++;\n  }\n\n  // Decrementar cantidad\n  decrementQuantity(): void {\n    if (this.quantity > 1) {\n      this.quantity--;\n    }\n  }\n\n  // Cerrar popup del producto\n  closeProductPopup(): void {\n    this.showPopup = false;\n  }\n\n  // Abrir popup del producto\n  openProductPopup(): void {\n    this.showPopup = true;\n  }\n\n  // Aadir al carrito\n  addToCart(): void {\n    if (this.product) {\n      this.cartService.addToCart(\n        this.product,\n        this.quantity,\n        this.selectedColor,\n        this.selectedSize\n      );\n    }\n  }\n}","<!-- Overlay para el fondo oscurecido -->\n<div class=\"product-overlay\" [class.active]=\"showPopup\"></div>\n\n<!-- Contenedor principal del popup de producto -->\n<div class=\"product-popup\" [class.active]=\"showPopup\">\n  <!-- Cabecera con ttulo y botn de cierre -->\n  <div class=\"product-header\">\n    <h2>{{ product?.nombre }}</h2>\n    <button class=\"close-product\" (click)=\"closeProductPopup()\"></button>\n  </div>\n  \n  <!-- Contenido principal del producto -->\n  <div class=\"product-content\">\n    <!-- Imagen principal -->\n    <div class=\"product-image-container\">\n      <img \n        *ngIf=\"product\"\n        [src]=\"getImagePath(product)\" \n        [alt]=\"product.nombre\"\n        class=\"product-image\"\n    />\n      \n      <!-- Selector de imgenes/colores miniatura -->\n      <div class=\"product-thumbnails\" *ngIf=\"colors.length > 0\">\n        <img \n            *ngFor=\"let color of colors\"\n            [id]=\"color.color\" \n            class=\"thumbnail\" \n            [src]=\"getImagePath(product, color)\" \n            [alt]=\"color.color\"\n            (click)=\"changeColor(color.color)\"\n      />\n      </div>\n    </div>\n    \n    <!-- Detalles del producto -->\n    <div class=\"product-details\">\n      <!-- Precio -->\n      <div class=\"product-price\">\n        {{ formatPrice(product?.precio) }}\n      </div>\n      \n      <!-- Descripcin -->\n      <p class=\"product-description\">{{ product?.descripcion }}</p>\n      \n      <!-- Selector de color -->\n      <div class=\"color-selector\" *ngIf=\"colors.length > 0\">\n        <label for=\"color-select\">Selecciona color:</label>\n        <select id=\"color-select\" [(ngModel)]=\"selectedColor\">\n          <option *ngFor=\"let color of colors\" [value]=\"color.color\">\n            {{ color.color }}\n          </option>\n        </select>\n      </div>\n      \n      <!-- Control de cantidad -->\n      <div class=\"quantity-control\">\n        <label>Cantidad:</label>\n        <div class=\"quantity-buttons\">\n          <button class=\"quantity-btn\" (click)=\"decrementQuantity()\">-</button>\n          <input type=\"number\" [(ngModel)]=\"quantity\" class=\"quantity-input\" min=\"1\" />\n          <button class=\"quantity-btn\" (click)=\"incrementQuantity()\">+</button>\n        </div>\n      </div>\n      \n      <!-- Botn de aadir al carrito -->\n      <button class=\"add-to-cart-btn\" (click)=\"addToCart()\">\n        AADIR AL CARRITO\n      </button>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router, NavigationEnd } from '@angular/router';\nimport { ProductService } from '../../../services/product.service';\nimport { CategoryService } from '../../../services/category.service';\nimport { Product } from '../../../models/product';\nimport { Category } from '../../../models/category';\nimport { filter, map } from 'rxjs/operators';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.component.html',\n  styleUrls: []\n})\nexport class ProductListComponent implements OnInit {\n  // Array para almacenar los productos a mostrar\n  products: Product[] = [];\n\n  // Propiedad para almacenar la categora actual\n  currentCategory: Category | null = null;\n\n  // Propiedad para almacenar el ID de categora (de la URL)\n  categoryId: number | null = null;\n\n  // Variable para mostrar estado de carga\n  loading: boolean = false;\n\n  // Variable para identificar si estamos en la vista \"Ver Todo\"\n  isViewAll: boolean = false;\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    public productService: ProductService,\n    private categoryService: CategoryService,\n    private sanitizer: DomSanitizer\n  ) {\n    // Detectar cambios de ruta para recargar productos cuando cambia la URL\n    this.router.events\n      .pipe(filter(event => event instanceof NavigationEnd))\n      .subscribe(() => {\n        this.checkRouteAndLoadProducts();\n      });\n  }\n\n  ngOnInit(): void {\n    this.checkRouteAndLoadProducts();\n  }\n\n  // Mtodo implementado correctamente para abrir el popup del producto\n  openProductPopup(product: Product, event?: Event) {\n    if (event) { event.preventDefault(); event.stopPropagation(); }\n    this.productService.setSelectedProduct(product);\n  }\n  \n\n  // Mtodo para verificar la ruta actual y cargar los productos correspondientes\n  private checkRouteAndLoadProducts(): void {\n    // Verificar si estamos en la ruta \"ver-todo\"\n    if (this.router.url === '/ver-todo') {\n      console.log('Estamos en Ver Todo - cargando todos los productos');\n      this.isViewAll = true;\n      this.categoryId = null;\n      this.currentCategory = null;\n      this.loadAllProducts();\n    } else {\n      // Tambin obtener datos de la ruta para compatibilidad con data: { isViewAll: true }\n      const routeData = this.route.snapshot.data;\n      if (routeData && routeData['isViewAll']) {\n        console.log('Detectado isViewAll en los datos de la ruta');\n        this.isViewAll = true;\n        this.categoryId = null;\n        this.currentCategory = null;\n        this.loadAllProducts();\n      } else {\n        this.isViewAll = false;\n        const params = this.route.snapshot.params;\n        if (params['id']) {\n          this.categoryId = +params['id'];\n          this.loadCategoryDetails();\n          this.loadProductsByCategory();\n        } else if (this.router.url === '/') {\n          // En la pgina principal, cargar productos destacados o novedades\n          this.categoryId = null;\n          this.currentCategory = null;\n          this.loadFeaturedProducts();\n        }\n      }\n    }\n  }\n\n  // Mtodo para cargar los detalles de la categora actual\n  loadCategoryDetails(): void {\n    this.loading = true;\n    if (this.categoryId) {\n      this.categoryService.getCategory(this.categoryId).subscribe({\n        next: (category: Category) => {\n          this.currentCategory = category;\n          // console.log('Categora cargada:', category);\n          this.loading = false;\n        },\n        error: (error: any) => {\n          // console.error('Error al cargar detalles de categora:', error);\n          this.loading = false;\n        }\n      });\n    }\n  }\n\n  // Mtodo para cargar productos filtrados por categora\n  loadProductsByCategory(): void {\n    this.loading = true;\n    this.products = [];\n\n    if (this.categoryId !== null && this.categoryId !== undefined) {\n      // console.log('Cargando productos para categora ID:', this.categoryId);\n      this.productService.getProductsByCategory(this.categoryId).subscribe({\n        next: (products: Product[]) => {\n          if (Array.isArray(products) && products.length > 0) {\n            this.products = products;\n            // console.log('Productos cargados para categora:', products);\n          } else {\n            this.products = [];\n            // console.log('No se encontraron productos para esta categora');\n          }\n          this.loading = false;\n        },\n        error: (error: any) => {\n          // console.error(`Error al cargar productos para categora ${this.categoryId}:`, error);\n          this.products = [];\n          this.loading = false;\n        }\n      });\n    } else {\n      this.loading = false;\n    }\n  }\n\n  // Mtodo para cargar todos los productos (para la vista \"Ver Todo\")\n  loadAllProducts(): void {\n    this.loading = true;\n    // console.log('Cargando TODOS los productos para Ver Todo...');\n    this.productService.getProducts().subscribe({\n      next: (products: Product[]) => {\n        this.products = products;\n        // console.log('Todos los productos cargados:', products);\n        this.loading = false;\n      },\n      error: (error: any) => {\n        // console.error('Error al cargar todos los productos:', error);\n        this.products = [];\n        this.loading = false;\n      }\n    });\n  }\n\n  // Mtodo para cargar productos destacados (para Home)\n  loadFeaturedProducts(): void {\n    this.loading = true;\n    // console.log('Cargando productos destacados para Home...');\n    // Puedes ajustar esto segn cmo quieras mostrar productos en la pgina principal\n    this.productService.getFeaturedProducts().subscribe({\n      next: (products: Product[]) => {\n        this.products = products;\n        // console.log('Productos destacados cargados:', products);\n        this.loading = false;\n      },\n      error: (error: any) => {\n        // console.error('Error al cargar productos destacados:', error);\n        // Como alternativa, cargar algunos productos aleatorios\n        this.loadSomeProducts();\n      }\n    });\n  }\n\n  // Mtodo alternativo para cargar algunos productos (por si falla getFeaturedProducts)\n  loadSomeProducts(): void {\n    this.productService.getProducts().subscribe({\n      next: (products: Product[]) => {\n        // Tomar solo algunos productos para mostrar (por ejemplo, 8)\n        this.products = products.slice(0, 8);\n        this.loading = false;\n      },\n      error: (error: any) => {\n        console.error('Error al cargar productos:', error);\n        this.products = [];\n        this.loading = false;\n      }\n    });\n  }\n\n  // Mtodo para formatear precio como moneda\n  formatPrice(price: number): string {\n    return new Intl.NumberFormat('es-ES', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(price);\n  }\n\n  // Mtodo para manejar errores de carga de imgenes\n  handleImageError(event: Event): void {\n    const img = event.target as HTMLImageElement;\n    const originalSrc = img.src;\n    console.error(`Error al cargar imagen: ${originalSrc}`);\n    \n    // Usar directamente la imagen por defecto en la raz\n    img.src = 'assets/images/default.jpg';\n    img.onerror = null; // Prevenir bucles infinitos\n  }\n}","<div class=\"product-list-container\">\n  <!-- Mostrar mensaje de carga si corresponde -->\n  <div *ngIf=\"loading\" class=\"loading-indicator\">\n    <p>Cargando productos...</p>\n  </div>\n\n  <!-- Mostrar ttulo de categora si estamos en una categora -->\n  <div *ngIf=\"currentCategory && !isViewAll\" class=\"category-header\">\n    <h1 id=\"titulo\">{{ currentCategory.nombre }}</h1>\n    <p *ngIf=\"currentCategory.descripcion\">{{ currentCategory.descripcion }}</p>\n  </div>\n\n  <!-- Mostrar ttulo \"Ver Todo\" si estamos en la vista Ver Todo -->\n  <div *ngIf=\"isViewAll\" class=\"category-header\">\n    <h1 id=\"titulo\">Ver todo</h1>\n  </div>\n\n  <!-- Mostrar ttulo \"Novedades\" solo en la pgina principal -->\n  <div *ngIf=\"!currentCategory && !isViewAll\" class=\"category-header\">\n    <h1 id=\"titulo\">Novedades</h1>\n  </div>\n\n  <!-- Mensaje si no hay productos -->\n  <div *ngIf=\"!loading && products.length === 0\" class=\"no-products\">\n    <p>No se encontraron productos.</p>\n  </div>\n\n  <!-- Grilla de productos -->\n  <div id=\"articulos\">\n    <div class=\"articulo\" *ngFor=\"let product of products\" (click)=\"openProductPopup(product, $event)\">\n      <!-- Imagen del producto usando el servicio centralizado -->\n      <img [src]=\"productService.getProductImageSrc(product)\" [alt]=\"product.nombre\" \n          (error)=\"handleImageError($event)\" />\n      \n      <!-- Detalles del producto -->\n      <h2>{{ product.nombre }}</h2>\n      <h3>{{ formatPrice(product.precio) }}</h3>\n      <p class=\"description\">{{ product.descripcion }}</p>\n    </div>\n  </div>\n</div>\n\n<!-- Asegurarnos que el componente de popup est incluido -->\n<app-product-popup></app-product-popup>","// src/app/components/product/product-popup/product-popup.component.ts\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Product } from '../../../models/product';\nimport { ProductService } from '../../../services/product.service';\nimport { CartService } from '../../../services/cart.service';\nimport { ProductImageHelper } from '../../../helpers/product-image-helper';\n\n@Component({\n  selector: 'app-product-popup',\n  templateUrl: './product-popup.component.html',\n  styleUrls: ['./product-popup.component.scss']\n})\nexport class ProductPopupComponent implements OnInit, OnDestroy {\n  currentProduct: Product | null = null;\n  isOpen: boolean = false;\n  quantity: number = 1;\n  selectedColor: string = '';\n  availableColors: string[] = [];\n  loading: boolean = false;\n  currentImageSrc: string = '';\n  private subscription: Subscription | null = null;\n\n  constructor(\n    private productService: ProductService,\n    private cartService: CartService\n  ) { }\n\n  ngOnInit(): void {\n    // Suscripcin al observable de producto seleccionado\n    this.subscription = this.productService.selectedProduct$.subscribe(product => {\n      if (product) {\n        console.log(' ProductPopupComponent recibi producto:', product.nombre);\n        this.currentProduct = product;\n        this.isOpen = true;\n        this.resetOptions();\n        this.loadProductColors();\n      } else {\n        this.currentProduct = null;\n        this.isOpen = false;\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  loadProductColors(): void {\n    if (!this.currentProduct) return;\n    \n    this.loading = true;\n    \n    this.productService.getProductColors(this.currentProduct.id).subscribe({\n      next: (colors) => {\n        this.loading = false;\n        let filteredColors = (colors || []).filter(\n          c => !!c && c.toLowerCase() !== \"default\"\n        );\n\n        //  CORRECCIN: Lgica especial por nombre (case-insensitive)\n        const nombre = (this.currentProduct?.nombre || \"\").toLowerCase();\n\n        //  Plug con corazn: SOLO caoba\n        if (nombre.includes(\"plug con corazon\") || nombre.includes(\"plug con corazn\")) {\n          console.log(' Producto \"Plug con corazn\" detectado, forzando color caoba');\n          filteredColors = ['caoba'];\n        }\n        // Otros productos especficos\n        else if (\n          nombre === \"plug\" ||\n          nombre === \"plug de silicona\" ||\n          nombre === \"expander espiral\" ||\n          nombre === \"set de dilatadores\" ||\n          nombre === \"set de dilatadores 6 euros\" ||\n          nombre === \"set de dilatadores 9 euros\" ||\n          nombre === \"set de expanders curvados\"\n        ) {\n          filteredColors = filteredColors.filter(c => c.toLowerCase() !== \"default\");\n        }\n\n        // Si se queda vaco, fallback \"Estndar\"\n        if (filteredColors.length === 0) {\n          filteredColors = ['Estndar'];\n        }\n\n        this.availableColors = filteredColors;\n        this.selectedColor = filteredColors[0] || '';\n        console.log(' Colores cargados:', this.availableColors, '| Seleccionado:', this.selectedColor);\n        this.updateImageForSelectedColor();\n      },\n      error: (err) => {\n        console.error(' Error cargando colores:', err);\n        this.loading = false;\n        \n        // Fallback con la misma lgica\n        const nombre = this.currentProduct?.nombre?.toLowerCase() || \"\";\n        let fallbackColors: string[] = [];\n        \n        if (nombre.includes(\"plug con corazon\") || nombre.includes(\"plug con corazn\")) {\n          console.log(' Error en carga, forzando caoba para \"Plug con corazn\"');\n          fallbackColors = [\"caoba\"];\n        } else {\n          fallbackColors = ProductImageHelper.getAvailableColors(this.currentProduct?.nombre || '')\n            .filter(c => !!c && c.toLowerCase() !== \"default\");\n        }\n\n        if (fallbackColors.length === 0) fallbackColors = ['Estndar'];\n        \n        this.availableColors = fallbackColors;\n        this.selectedColor = fallbackColors[0] || '';\n        console.log(' Colores fallback:', this.availableColors);\n        this.updateImageForSelectedColor();\n      }\n    });\n  }\n\n  /**  CORREGIDO: Mtodo que usa el helper para construir la ruta correcta */\n  updateImageForSelectedColor(): void {\n    if (!this.currentProduct) return;\n    \n    console.log(' Actualizando imagen para:', {\n      producto: this.currentProduct.nombre,\n      color: this.selectedColor\n    });\n\n    //  USAR EL HELPER EN LUGAR DE CONSTRUCCIN MANUAL\n    this.currentImageSrc = ProductImageHelper.getProductImageSrc(\n      this.currentProduct, \n      this.selectedColor\n    );\n    \n    console.log(' Imagen construida por helper:', this.currentImageSrc);\n  }\n\n  /**  MEJORADO: Aadir al carrito con imagen correcta */\n  addToCart(): void {\n    if (!this.currentProduct) return;\n    \n    console.log(' Aadiendo al carrito:', {\n      producto: this.currentProduct.nombre,\n      color: this.selectedColor,\n      cantidad: this.quantity,\n      imagen: this.currentImageSrc\n    });\n\n    //  Crear una copia del producto con la imagen correcta\n    const productWithImage = {\n      ...this.currentProduct,\n      imagenSeleccionada: this.currentImageSrc // Aadir campo extra con imagen\n    };\n\n    // Aadir al carrito\n    this.cartService.addToCart(\n      productWithImage,\n      this.quantity,\n      this.selectedColor\n    );\n\n    console.log(` Producto aadido: ${this.currentProduct.nombre} - Color: ${this.selectedColor} - Cantidad: ${this.quantity}`);\n    \n    // Cerrar el popup\n    this.closePopup();\n  }\n\n  /** Manejar cambio de color */\n  onColorChange(): void {\n    console.log(' Color cambiado a:', this.selectedColor);\n    this.updateImageForSelectedColor();\n  }\n\n  /** Cerrar el popup */\n  closePopup(): void {\n    console.log(' Cerrando popup...');\n    \n    // Primero limpiar el producto actual para ocultar el modal\n    this.currentProduct = null;\n    this.isOpen = false;\n    \n    // Luego limpiar el servicio\n    this.productService.clearSelectedProduct();\n  }\n\n  /** Incrementar cantidad */\n  incrementQuantity(): void {\n    if (this.quantity < 99) {\n      this.quantity++;\n    }\n  }\n\n  /** Decrementar cantidad (mnimo 1) */\n  decrementQuantity(): void {\n    if (this.quantity > 1) {\n      this.quantity--;\n    }\n  }\n\n  /** Resetear opciones al abrir el popup */\n  private resetOptions(): void {\n    this.quantity = 1;\n    this.selectedColor = '';\n    this.availableColors = [];\n    this.currentImageSrc = '';\n  }\n\n  /** Mtodo para obtener la imagen con el color seleccionado */\n  getImagePath(): string {\n    if (this.currentImageSrc) {\n      return this.currentImageSrc;\n    }\n\n    if (!this.currentProduct) {\n      return 'assets/images/default.jpg';\n    }\n\n    return ProductImageHelper.getProductImageSrc(this.currentProduct, this.selectedColor);\n  }\n\n  /** Verificar si hay mltiples colores disponibles */\n  hasMultipleColors(): boolean {\n    return this.availableColors.length > 1;\n  }\n\n  /** Obtener mensaje de colores disponibles */\n  getColorsMessage(): string {\n    if (this.availableColors.length <= 1) {\n      return 'Color nico disponible';\n    }\n    return `${this.availableColors.length} colores disponibles`;\n  }\n}\n","<!-- src/app/components/product/product-popup/product-popup.component.html -->\n\n<!-- Overlay para el fondo oscurecido -->\n<div class=\"product-overlay\" [class.active]=\"currentProduct !== null\"></div>\n\n<!-- Contenedor principal del popup -->\n<div class=\"product-popup\" [class.active]=\"currentProduct !== null\">\n  <!-- Solo mostrar contenido si hay un producto seleccionado -->\n  <ng-container *ngIf=\"currentProduct\">\n    <!-- Cabecera del popup con ttulo y botn de cierre -->\n    <div class=\"product-header\">\n      <h2>{{ currentProduct.nombre }}</h2>\n      <button class=\"close-product\" (click)=\"closePopup()\" aria-label=\"Cerrar ventana\">&times;</button>\n    </div>\n    \n    <!-- Contenido del popup -->\n    <div class=\"product-content\">\n      <!-- Imagen del producto -->\n      <div class=\"product-image-container\">\n        <img \n          [src]=\"getImagePath()\" \n          [alt]=\"currentProduct.nombre\"\n          class=\"product-image\"\n        />\n        \n        <!-- Indicador de colores disponibles -->\n        <div class=\"colors-indicator\" *ngIf=\"availableColors.length > 0\">\n          <small>{{ getColorsMessage() }}</small>\n        </div>\n      </div>\n      \n      <!-- Detalles del producto -->\n      <div class=\"product-details\">\n        <!-- Precio -->\n        <div class=\"product-price\">\n          {{ currentProduct.precio | currency:'EUR':'symbol':'1.2-2' }}\n        </div>\n        \n        <!-- Descripcin -->\n        <p class=\"product-description\">{{ currentProduct.descripcion }}</p>\n        \n        <!-- Selector de color solo si hay mltiples colores -->\n        <div class=\"color-selector\" *ngIf=\"hasMultipleColors()\">\n          <label for=\"color-select\">Selecciona un color:</label>\n          <select \n            id=\"color-select\" \n            [(ngModel)]=\"selectedColor\"\n            (ngModelChange)=\"onColorChange()\">\n            <option *ngFor=\"let color of availableColors\" [value]=\"color\">\n              {{ color | titlecase }}\n            </option>\n          </select>\n        </div>\n        \n        <!-- Mostrar color nico si solo hay uno -->\n        <div class=\"single-color-display\" *ngIf=\"!hasMultipleColors() && availableColors.length > 0\">\n          <label>Color:</label>\n          <span class=\"color-badge\">{{ selectedColor | titlecase }}</span>\n        </div>\n        \n        <!-- Selector de cantidad -->\n        <div class=\"quantity-selector\">\n          <label>Cantidad:</label>\n          <div class=\"quantity-controls\">\n            <button \n              type=\"button\" \n              class=\"quantity-btn\" \n              (click)=\"decrementQuantity()\"\n              [disabled]=\"quantity <= 1\"\n              aria-label=\"Disminuir\">\n              \n            </button>\n            <input \n              type=\"number\" \n              [(ngModel)]=\"quantity\" \n              min=\"1\" \n              max=\"99\"\n              class=\"quantity-input\"\n              readonly>\n            <button \n              type=\"button\" \n              class=\"quantity-btn\" \n              (click)=\"incrementQuantity()\"\n              aria-label=\"Aumentar\">\n              +\n            </button>\n          </div>\n        </div>\n        \n        <!-- Botn de aadir al carrito -->\n        <button \n          class=\"add-to-cart-btn\" \n          (click)=\"addToCart()\"\n          [disabled]=\"loading || !currentProduct\">\n          <span *ngIf=\"!loading\">AADIR AL CARRITO</span>\n          <span *ngIf=\"loading\">CARGANDO...</span>\n        </button>\n      </div>\n    </div>\n  </ng-container>\n</div>\n\n\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ProductService } from '../../../services/product.service';\nimport { Product } from '../../../models/product';\n\n@Component({\n  selector: 'app-search-results',\n  templateUrl: './search-results.component.html',\n  styleUrls: ['./search-results.component.scss']  //  CORREGIDO: Cargar el archivo SCSS\n})\nexport class SearchResultsComponent implements OnInit {\n  // Array para almacenar los productos encontrados\n  products: Product[] = [];\n  \n  // Variable para almacenar el trmino de bsqueda\n  searchTerm: string = '';\n  \n  // Variable para controlar el estado de carga\n  loading: boolean = true;\n\n  constructor(\n    private route: ActivatedRoute,\n    public productService: ProductService //  Hacer pblico para usar en template\n  ) { }\n\n  ngOnInit(): void {\n    // Suscribirse a los cambios en los parmetros de consulta (query parameters)\n    this.route.queryParams.subscribe({\n      next: (params) => {\n        // Obtener el trmino de bsqueda de los parmetros\n        this.searchTerm = params['term'] || '';\n        console.log(' SearchResultsComponent - Trmino recibido:', this.searchTerm);\n        \n        // Si hay un trmino de bsqueda, buscar productos\n        if (this.searchTerm) {\n          this.searchProducts();\n        } else {\n          // Si no hay trmino, inicializar con array vaco\n          this.products = [];\n          this.loading = false;\n        }\n      }\n    });\n  }\n\n  //  Mtodo para buscar productos\n  searchProducts(): void {\n    this.loading = true;\n    console.log(' Iniciando bsqueda para:', this.searchTerm);\n    \n    // Llamar al servicio para buscar productos\n    this.productService.searchProducts(this.searchTerm).subscribe({\n      next: (products) => {\n        console.log(' Productos recibidos:', products.length);\n        // Almacenar los productos encontrados\n        this.products = products;\n        this.loading = false;\n      },\n      error: (error) => {\n        console.error(' Error searching products', error);\n        this.products = [];\n        this.loading = false;\n      }\n    });\n  }\n\n  //  Mtodo auxiliar para formatear precios como moneda\n  formatPrice(price: number): string {\n    return new Intl.NumberFormat('es-ES', { \n      style: 'currency', \n      currency: 'EUR' \n    }).format(price);\n  }\n\n  //  Mtodo para abrir popup de producto\n  openProductPopup(product: Product, event: Event): void {\n    // Prevenir la navegacin por defecto\n    event.preventDefault();\n    event.stopPropagation();\n    \n    console.log(' SearchResults: Abriendo popup para producto:', product.nombre);\n    \n    // Usar el servicio para mostrar el popup\n    this.productService.selectProductForPopup(product);\n  }\n\n  //  Mtodo para manejar errores de carga de imgenes\n  handleImageError(event: Event): void {\n    this.productService.handleImageError(event);\n  }\n}","<div class=\"search-results-container\">\n  <!--  Ttulo de resultados de bsqueda (estructura IDNTICA a product-list) -->\n  <div class=\"category-header\">\n    <h1 id=\"titulo\" *ngIf=\"!loading && products.length > 0\">\n      resultados de la bsqueda para \"{{ searchTerm }}\"\n    </h1>\n    <h1 id=\"titulo\" *ngIf=\"!loading && products.length === 0\">\n      no se han encontrado productos\n    </h1>\n  </div>\n\n  <!-- Indicador de carga mientras se buscan productos -->\n  <div *ngIf=\"loading\" class=\"loading-indicator\">\n    <p>Buscando productos...</p>\n    <div class=\"spinner\"></div>\n  </div>\n  \n  <!-- Mensaje cuando no hay resultados -->\n  <div *ngIf=\"!loading && products.length === 0\" class=\"no-results\">\n    <p>Intenta con otros trminos de bsqueda como:</p>\n    <ul>\n      <li>anillo, banana, labret, barbell</li>\n      <li>plug, tnel, expander</li>\n      <li>piercing, dilatacin</li>\n    </ul>\n  </div>\n  \n  <!--  CONTENEDOR DE RESULTADOS usando la misma estructura que product-list -->\n  <div id=\"articulos\" *ngIf=\"!loading && products.length > 0\">\n    <div class=\"articulo\" \n         *ngFor=\"let product of products\" \n         (click)=\"openProductPopup(product, $event)\">\n      \n      <!--  Imagen del producto usando el servicio centralizado -->\n      <img [src]=\"productService.getProductImageSrc(product)\" \n           [alt]=\"product.nombre\" \n           (error)=\"handleImageError($event)\" />\n      \n      <!--  Detalles del producto -->\n      <h2>{{ product.nombre }}</h2>\n      <h3>{{ formatPrice(product.precio) }}</h3>\n      <p class=\"description\">{{ product.descripcion }}</p>\n    </div>\n  </div>\n</div>\n\n<!--  Incluir el componente popup de producto -->\n<app-product-popup></app-product-popup>","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AuthService } from 'src/app/services/auth.service';\nimport Swal from 'sweetalert2';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-registro-popup',\n  templateUrl: './registro-popup.component.html',\n  styleUrls: ['./registro-popup.component.scss']\n})\nexport class RegistroPopupComponent implements OnInit {\n  @Input() isVisible = false;\n  @Output() closePopup = new EventEmitter();\n  @Output() registroSuccess = new EventEmitter();\n  @Output() switchToLogin = new EventEmitter();\n\n  registerForm: FormGroup;\n  loading = false;\n  submitted = false;\n  showPassword = false;\n\n  private readonly apiKey = 'AIzaSyDY3YQ6aNb7YXoz13RIxq5fVyzdbak7sQ0';\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private router: Router,\n    private authService: AuthService,\n    private http: HttpClient\n  ) {\n    this.registerForm = this.formBuilder.group({\n      username: ['', Validators.required],\n      password: ['', [Validators.required, Validators.minLength(6)]],\n      nombre: ['', Validators.required],\n      email: ['', [Validators.required, Validators.email]],\n      direccion: ['', Validators.required],\n      ciudad: ['', Validators.required],\n      cp: ['', [Validators.required, Validators.pattern(/^\\d{5}$/)]]\n    });\n  }\n\n  ngOnInit() {\n    console.log(' RegistroPopupComponent inicializado');\n  }\n\n  get f() {\n    return this.registerForm.controls;\n  }\n\n  togglePasswordVisibility(): void {\n    this.showPassword = !this.showPassword;\n  }\n\n  close(): void {\n    this.closePopup.emit();\n  }\n\n  onClose(): void {\n    this.close();\n  }\n\n  switchToLoginModal(event: Event): void {\n    event.preventDefault();\n    this.switchToLogin.emit();\n  }\n\n  onSubmit(): void {\n    this.submitted = true;\n    if (this.registerForm.invalid) {\n      return;\n    }\n    this.loading = true;\n    this.authService.register(this.registerForm.value).subscribe({\n      next: (data) => {\n        this.loading = false;\n        this.registerForm.reset();\n        this.submitted = false;\n        this.registroSuccess.emit();\n        Swal.fire({\n          title: 'Cuenta creada!',\n          text: 'Tu cuenta ha sido creada correctamente. Ahora puedes iniciar sesin.',\n          icon: 'success',\n          confirmButtonColor: '#4facfe',\n          confirmButtonText: 'Entendido',\n          timer: 4000,\n          timerProgressBar: true\n        });\n      },\n      error: (error) => {\n        this.loading = false;\n        let errorMessage = 'No se pudo crear la cuenta. Por favor, intenta de nuevo.';\n        if (error.message) errorMessage = error.message;\n        if (error.message && error.message.includes('username')) {\n          errorMessage = 'El nombre de usuario ya est en uso. Elige otro.';\n        }\n        if (error.message && error.message.includes('email')) {\n          errorMessage = 'El email ya est registrado.';\n        }\n        Swal.fire({\n          title: 'Error al crear cuenta',\n          text: errorMessage,\n          icon: 'error',\n          confirmButtonColor: '#dc3545',\n          confirmButtonText: 'Entendido'\n        });\n      }\n    });\n  }\n\n  autoCompleteCP() {\n    const direccion = this.registerForm.get('direccion')?.value;\n    const ciudad = this.registerForm.get('ciudad')?.value;\n    if (!direccion || !ciudad) { return; }\n    const direccionCompleta = encodeURIComponent(`${direccion}, ${ciudad}`);\n    const url = `https://maps.googleapis.com/maps/api/geocode/json?address=${direccionCompleta}&key=${this.apiKey}`;\n\n    this.http.get<any>(url).subscribe({\n      next: (resultado) => {\n        if (\n          resultado.status === 'OK' &&\n          resultado.results &&\n          resultado.results.length > 0\n        ) {\n          const components = resultado.results[0].address_components;\n          const postal = components.find((comp: any) =>\n            comp.types.includes('postal_code')\n          );\n          if (postal) {\n            this.registerForm.get('cp')?.setValue(postal.long_name);\n          }\n        }\n      },\n      error: (err) => {\n        //alert('No se pudo obtener cdigo postal automticamente.'+ err);\n        console.warn('No se pudo obtener cdigo postal automticamente.', err);\n      }\n    });\n  }\n}\n","<div class=\"modal-overlay\" *ngIf=\"isVisible\" (click)=\"onClose()\">\n  <div class=\"modal-container\" (click)=\"$event.stopPropagation()\">\n    <div class=\"modal-header\">\n      <h2>Crear cuenta</h2>\n      <p>Completa tus datos para empezar a comprar</p>\n      <button class=\"close-btn\" (click)=\"onClose()\" aria-label=\"Cerrar\">&times;</button>\n    </div>\n\n    <div class=\"modal-body\">\n      <form [formGroup]=\"registerForm\" (ngSubmit)=\"onSubmit()\">\n        <div class=\"form-section\">\n          <h3>CREDENCIALES DE ACCESO</h3>\n\n          <div class=\"form-row\">\n            <div class=\"form-group full-width\">\n              <label for=\"username\">USUARIO *</label>\n              <input\n                type=\"text\"\n                id=\"username\"\n                formControlName=\"username\"\n                placeholder=\"Elige un nombre de usuario\"\n                [class.invalid]=\"submitted && f['username'].errors\"\n              />\n              <div *ngIf=\"submitted && f['username'].errors\" class=\"error-message\">\n                <span *ngIf=\"f['username'].errors?.['required']\">El nombre de usuario es obligatorio</span>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"form-row\">\n            <div class=\"form-group full-width\">\n              <label for=\"password\">CONTRASEA *</label>\n              <div class=\"password-input-wrapper\">\n                <input\n                  [type]=\"showPassword ? 'text' : 'password'\"\n                  id=\"password\"\n                  formControlName=\"password\"\n                  placeholder=\"Mnimo 6 caracteres\"\n                  [class.invalid]=\"submitted && f['password'].errors\"\n                />\n              <button type=\"button\" class=\"toggle-password\" (click)=\"togglePasswordVisibility()\">\n                <!-- icono ojo aqu -->\n              </button>\n              <div *ngIf=\"submitted && f['password'].errors\" class=\"error-message\">\n                <span *ngIf=\"f['password'].errors?.['required']\">La contrasea es obligatoria</span>\n                <span *ngIf=\"f['password'].errors?.['minlength']\">La contrasea debe tener mnimo 6 caracteres</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-section\">\n          <h3>INFORMACIN PERSONAL</h3>\n\n          <div class=\"form-row\">\n            <div class=\"form-group full-width\">\n              <label for=\"nombre\">NOMBRE COMPLETO *</label>\n              <input\n                type=\"text\"\n                id=\"nombre\"\n                formControlName=\"nombre\"\n                placeholder=\"Tu nombre y apellidos\"\n                [class.invalid]=\"submitted && f['nombre'].errors\"\n              />\n              <div *ngIf=\"submitted && f['nombre'].errors\" class=\"error-message\">\n                <span *ngIf=\"f['nombre'].errors?.['required']\">El nombre completo es obligatorio</span>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"form-row\">\n            <div class=\"form-group full-width\">\n              <label for=\"email\">EMAIL *</label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                formControlName=\"email\"\n                placeholder=\"tu@email.com\"\n                [class.invalid]=\"submitted && f['email'].errors\"\n              />\n              <div *ngIf=\"submitted && f['email'].errors\" class=\"error-message\">\n                <span *ngIf=\"f['email'].errors?.['required']\">El email es obligatorio</span>\n                <span El *ngIf=\"f['email'].errors?.['minlength']\">El email no es vlido</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-section\">\n          <h3>DIRECCIN DE ENVO</h3>\n\n          <div class=\"form-row\">\n            <div class=\"form-group full-width\">\n              <label for=\"direccion\">DIRECCIN *</label>\n              <input\n                type=\"text\"\n                id=\"direccion\"\n                formControlName=\"direccion\"\n                placeholder=\"Calle, nmero, piso\"\n                (blur)=\"autoCompleteCP()\"\n                [class.invalid]=\"submitted && f['direccion'].errors\"\n              />\n              <div *ngIf=\"submitted && f['direccion'].errors\" class=\"error-message\">\n                <span *ngIf=\"f['direccion'].errors?.['required']\">La direccin es obligatoria</span>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"form-row two-columns\">\n            <div class=\"form-group\">\n              <label for=\"ciudad\">CIUDAD *</label>\n              <input\n                type=\"text\"\n                id=\"ciudad\"\n                formControlName=\"ciudad\"\n                placeholder=\"Tu ciudad\"\n                (blur)=\"autoCompleteCP()\"\n                [class.invalid]=\"submitted && f['ciudad'].errors\"\n              />\n              <div *ngIf=\"submitted && f['ciudad'].errors\" class=\"error-message\">\n                <span *ngIf=\"f['ciudad'].errors?.['required']\">La ciudad es obligatoria</span>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"cp\">CDIGO POSTAL *</label>\n              <input\n                type=\"text\"\n                id=\"cp\"\n                formControlName=\"cp\"\n                placeholder=\"00000\"\n                [class.invalid]=\"submitted && f['cp'].errors\"\n              />\n              <div *ngIf=\"submitted && f['cp'].errors\" class=\"error-message\">\n                <span *ngIf=\"f['cp'].errors?.['required']\">El cdigo postal es obligatorio</span>\n                <span *ngIf=\"f['cp'].errors?.['pattern']\">Debe contener 5 dgitos</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <button type=\"submit\" class=\"btn-submit\" [disabled]=\"loading || registerForm.invalid\">\n          CREAR CUENTA\n          <span *ngIf=\"loading\" class=\"loading-spinner\"></span>\n        </button>\n\n        <div class=\"footer-links\">\n          <p>\n            Ya tienes cuenta?\n            <a href=\"#\" (click)=\"switchToLoginModal($event)\">Inicia sesin</a>\n          </p>\n        </div>\n    </div>\n  </form>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['footer.component.scss']\n})\nexport class FooterComponent implements OnInit {\n  // Propiedad para almacenar el ao actual (para el copyright)\n  currentYear: number = new Date().getFullYear();\n  \n  constructor() { }\n\n  ngOnInit(): void {\n    // Posibles inicializaciones adicionales\n  }\n}","<footer>\n      <p>\n      <img src=\"https://angular.io/assets/images/logos/angular/angular.svg\"\n           alt=\"Logo de Angular\" class=\"angular-logo\">Ecommerce con Angular \n           <p>&copy; Txema Serrano Snchez</p>\n    <p>{{ currentYear }} TatooDenda</p>\n  </footer>","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\nexport class HeaderComponent {\n  \n  constructor(private router: Router) { }\n  \n  // Mtodo para navegar a la pgina principal\n  goToHome(): void {\n    this.router.navigate(['/']);\n  }\n}\n","<header>\n    <!-- Ttulo de la aplicacin que funciona como enlace a la pgina principal -->\n    <h1 class=\"home tienda-title\" (click)=\"goToHome()\">Tienda online</h1>\n  </header>","import { Component, OnInit, OnDestroy } from '@angular/core'\nimport { Router } from '@angular/router'\nimport { CategoryService } from '../../../services/category.service'\nimport { AuthService } from '../../../services/auth.service'\nimport { CartService } from '../../../services/cart.service'\nimport { Category } from '../../../models/category'\nimport { User } from '../../../models/user'\nimport { Subscription } from 'rxjs'\n\n@Component({\n  selector: 'app-navbar',\n  templateUrl: './navbar.component.html',\n  styleUrls: ['./navbar.component.css']\n})\nexport class NavbarComponent implements OnInit, OnDestroy {\n  // Propiedades del componente existentes\n  isCartOpen: boolean = false;\n  cartItemCount: number = 0;\n  categories: Category[] = []\n  currentUser: User | null = null\n  searchTerm: string = ''\n\n  // PROPIEDADES PARA LOS POPUPS\n  showLoginPopup: boolean = false;\n  showRegistroPopup: boolean = false;\n  isUserLoggedIn: boolean = false;\n\n  // Suscripciones para evitar memory leaks\n  private userSubscription: Subscription = new Subscription();\n  private cartSubscription: Subscription = new Subscription();\n\n  constructor (\n    private categoryService: CategoryService,\n    private authService: AuthService,\n    public cartService: CartService,\n    public router: Router\n  ) {}\n\n  ngOnInit (): void {\n    // Cargar categoras\n    this.loadCategories()\n\n    // Suscribirse a cambios en el usuario actual\n    this.userSubscription = this.authService.currentUser.subscribe(user => {\n      this.currentUser = user\n      this.isUserLoggedIn = !!user\n      console.log('Estado de login actualizado:', this.isUserLoggedIn, user?.username || user?.nombre)\n    })\n\n    // Suscribirse a cambios en el carrito\n    this.cartSubscription = this.cartService.cart$.subscribe(cart => {\n      this.cartItemCount = cart.reduce((total: number, item) => total + item.cantidad, 0);\n    });\n\n    // Limpiar estado del carrito al inicializar\n    setTimeout(() => {\n      if (this.cartService.isCartOpen) {\n        this.cartService.closeCart()\n      }\n\n      const cartPopup = document.querySelector('.cart-popup') as HTMLElement\n      const cartOverlay = document.querySelector('.cart-overlay') as HTMLElement\n\n      if (cartPopup) cartPopup.classList.remove('active')\n      if (cartOverlay) cartOverlay.classList.remove('active')\n\n      document.body.style.overflow = 'auto'\n    }, 1)\n  }\n\n  ngOnDestroy(): void {\n    // Limpiar suscripciones para evitar memory leaks\n    this.userSubscription.unsubscribe();\n    this.cartSubscription.unsubscribe();\n  }\n\n  // ===== MTODOS PARA LOS POPUPS DE LOGIN Y REGISTRO =====\n\n  /**\n   * Maneja el click en el icono de perfil\n   * Si el usuario est logueado, va al perfil. Si no, muestra el popup de login.\n   */\n  onProfileClick(): void {\n    console.log('Profile clicked. User logged in:', this.isUserLoggedIn)\n    \n    if (this.isUserLoggedIn && this.currentUser) {\n      // Si est logueado, ir al perfil\n      this.router.navigate(['/profile']);\n      console.log('Navegando al perfil del usuario:', this.currentUser.username || this.currentUser.nombre)\n    } else {\n      // Si no est logueado, mostrar popup de login\n      this.showLoginPopup = true;\n      this.showRegistroPopup = false; // Asegurar que registro est cerrado\n      console.log('Mostrando popup de login')\n      \n      // Prevenir scroll del body cuando el popup est abierto\n      document.body.style.overflow = 'hidden';\n    }\n  }\n\n  /**\n   * Cierra el popup de login\n   */\n  onCloseLoginPopup(): void {\n    this.showLoginPopup = false;\n    console.log('Popup de login cerrado')\n    \n    // Restaurar scroll del body\n    document.body.style.overflow = 'auto';\n  }\n\n  /**\n   * Maneja el login exitoso\n   */\n  onLoginSuccess(): void {\n    this.showLoginPopup = false;\n    console.log('Login exitoso - Usuario logueado:', this.currentUser?.username || this.currentUser?.nombre)\n    \n    // Restaurar scroll del body\n    document.body.style.overflow = 'auto';\n    \n    // Opcional: mostrar mensaje de bienvenida\n    if (this.currentUser?.nombre || this.currentUser?.username) {\n      console.log(`Bienvenido/a ${this.currentUser.username || this.currentUser.nombre}!`)\n    }\n  }\n\n  /**\n   * Muestra el popup de registro (desde link \"Regstrate!\" del login)\n   */\n  mostrarRegistroPopup(): void {\n    this.showRegistroPopup = true;\n    this.showLoginPopup = false; // Cerrar login si estaba abierto\n    console.log('Mostrando popup de registro')\n    \n    // Prevenir scroll del body\n    document.body.style.overflow = 'hidden';\n  }\n\n  /**\n   * Cierra el popup de registro\n   */\n  onCloseRegistroPopup(): void {\n    this.showRegistroPopup = false;\n    console.log('Popup de registro cerrado')\n    \n    // Restaurar scroll del body\n    document.body.style.overflow = 'auto';\n  }\n\n  /**\n   * Maneja el registro exitoso\n   */\n  onRegistroSuccess(): void {\n    this.showRegistroPopup = false;\n    console.log('Registro exitoso')\n    \n    // Restaurar scroll del body\n    document.body.style.overflow = 'auto';\n  }\n\n  /**\n   * Cambia del popup de registro al popup de login\n   */\n  switchToLogin(): void {\n    this.showRegistroPopup = false;\n    this.showLoginPopup = true;\n    console.log('Cambiando de registro a login')\n  }\n\n  /**\n   * Cambia del popup de login al popup de registro\n   */\n  switchToRegistro(): void {\n    this.showLoginPopup = false;\n    this.showRegistroPopup = true;\n    console.log('Cambiando de login a registro')\n  }\n\n  // ===== MTODOS EXISTENTES (CONSERVADOS) =====\n\n  /**\n   * Obtiene el ID de una subcategora por nombre\n   */\n  getSubcategoryId(name: string): number {\n    const normalizedSearchName = name.toUpperCase()\n      .normalize(\"NFD\")\n      .replace(/[\\u0300-\\u036f]/g, \"\");\n    \n    const category = this.categories.find(cat => {\n      const normalizedCatName = cat.nombre.toUpperCase()\n        .normalize(\"NFD\")\n        .replace(/[\\u0300-\\u036f]/g, \"\");\n      return normalizedCatName === normalizedSearchName;\n    });\n    \n    // console.log(`Buscando categora: \"${name}\" (normalizado: \"${normalizedSearchName}\")`);\n    if (category) {\n      // console.log(`Categora encontrada: ${category.nombre} (ID: ${category.id})`);\n    } else {\n        console.log('Categora no encontrada. Categoras disponibles:' \n        ,this.categories.map(c => `${c.nombre} (ID: ${c.id})`));\n    }\n    \n    return category ? category.id : 0;\n  }\n\n  /**\n   * Alternar visibilidad del carrito\n   */\n  toggleCartAndLog(): void {\n    console.log('Cart icon clicked');\n    this.cartService.toggleCart();\n    console.log('After toggle, cart is open:', this.cartService.isCartOpen);\n  }\n\n  /**\n   * Carga las categoras desde el servicio\n   */\n  loadCategories (): void {\n    this.categoryService.getCategories().subscribe({\n      next: categories => {\n        console.log('Categoras cargadas:', categories)\n        this.categories = categories\n      },\n      error: error => console.error('Error loading categories', error)\n    })\n  }\n\n  /**\n   * Obtiene la categora DILATACIONES\n   */\n  getDilatacionesCategory (): Category | undefined {\n    return this.categories.find(\n      category => category.nombre.toUpperCase() === 'DILATACIONES'\n    )\n  }\n\n  /**\n   * Obtiene la categora PIERCINGS\n   */\n  getPiercingsCategory (): Category | undefined {\n    return this.categories.find(\n      category => category.nombre.toUpperCase() === 'PIERCINGS'\n    )\n  }\n\n  /**\n   * Obtiene subcategoras para DILATACIONES\n   */\n  getSubcategoriesForDilataciones (): Category[] {\n    const dilataciones = this.getDilatacionesCategory()\n    if (!dilataciones) return []\n\n    const subcategories = this.categories.filter(\n      category =>\n        category.padre === dilataciones.id &&\n        category.nombre.toUpperCase() !== 'DILATACIONES'\n    )\n\n    console.log('Subcategoras de DILATACIONES:', subcategories)\n    return subcategories\n  }\n\n  /**\n   * Obtiene subcategoras filtradas para DILATACIONES\n   */\n  getFilteredSubcategoriesForDilataciones (): Category[] {\n    const dilataciones = this.getDilatacionesCategory()\n    if (!dilataciones) return []\n\n    const excludedNames = ['EXPANDERS', 'PLUGS', 'TUNELES','TNELES']\n\n    return this.categories.filter(\n      category =>\n        category.padre === dilataciones.id &&\n        !excludedNames.includes(category.nombre.toUpperCase())\n    )\n  }\n\n  /**\n   * Obtiene subcategoras filtradas para PIERCINGS\n   */\n  getFilteredSubcategoriesForPiercings(): Category[] {\n    const piercings = this.getPiercingsCategory();\n    if (!piercings) return [];\n    \n    const excludedNames = ['ANILLOS', 'BANANAS', 'BARBELLS', 'CIRCULAR BARBELLS', 'LABRETS'];\n    \n    return this.categories.filter(category => \n      category.padre === piercings.id && \n      !excludedNames.includes(category.nombre.toUpperCase())\n    );\n  }\n\n  /**\n   * Navega a una categora especfica\n   */\n  navigateToCategory (categoryId: number): void {\n    console.log(`Navegando a categora ID: ${categoryId}`)\n    this.router.navigate(['/category', categoryId])\n  }\n\n  /**\n   * Verifica si el usuario actual es administrador\n   */\n  isAdmin (): boolean {\n    return this.currentUser?.username === 'admin' || this.currentUser?.role === 'admin';\n  }\n\n  /**\n   * Cierra la sesin del usuario\n   */\n  logout (): void {\n    this.authService.logout()\n    this.isUserLoggedIn = false\n    this.currentUser = null\n    this.router.navigate(['/'])\n    console.log('Usuario deslogueado')\n  }\n\n  /**\n   * Realiza una bsqueda\n   */\n  search(): void {\n    if (this.searchTerm.trim()) {\n      console.log(' Navbar: Realizando bsqueda:', this.searchTerm);\n      this.router.navigate(['/search'], {\n        queryParams: { term: this.searchTerm.trim() }\n      });\n      //  Limpiar el campo de bsqueda despus de buscar\n      this.searchTerm = '';\n    } else {\n      console.log(' Navbar: Trmino de bsqueda vaco');\n    }\n  }\n}","<!-- Contenedor principal de la barra de navegacin -->\n<nav>\n  <div>\n    <!-- Lista principal del men -->\n    <ul id=\"menu\">\n      <!-- Elemento de navegacin a la pgina principal -->\n      <li class=\"menuitem home\" [routerLink]=\"['/']\">HOME</li>\n\n      <!-- Categora DILATACIONES con desplegable -->\n      <li class=\"menuitem elem\" *ngIf=\"getDilatacionesCategory()\">\n        <span [attr.data_id]=\"getDilatacionesCategory()?.id\" class=\"categoria\">\n          DILATACIONES\n        </span>\n\n        <ul class=\"subcat\">\n          <!-- Categoras especficas de DILATACIONES -->\n          <li class=\"menuitem categoria\" [routerLink]=\"['/category', getSubcategoryId('TUNELES')]\">\n            TNELES\n          </li>\n          <li class=\"menuitem categoria\" [routerLink]=\"['/category', getSubcategoryId('PLUGS')]\">\n            PLUGS\n          </li>\n          <li class=\"menuitem categoria\" [routerLink]=\"['/category', getSubcategoryId('EXPANDERS')]\">\n            EXPANDERS\n          </li>\n        </ul>\n      </li>\n\n      <!-- Elemento para PIERCINGS con subcategoras -->\n      <li class=\"menuitem elem\" *ngIf=\"getPiercingsCategory()\">\n        <span [attr.data_id]=\"getPiercingsCategory()?.id\" class=\"categoria\">\n          PIERCINGS\n        </span>\n\n        <ul class=\"subcat\">\n          <!-- Categoras especficas de PIERCINGS -->\n          <li class=\"menuitem categoria\" [routerLink]=\"['/category', getSubcategoryId('BANANAS')]\">\n            BANANAS\n          </li>\n          <li class=\"menuitem categoria\" [routerLink]=\"['/category', getSubcategoryId('LABRETS')]\">\n            LABRETS\n          </li>\n          <li class=\"menuitem categoria\" [routerLink]=\"['/category', getSubcategoryId('BARBELLS')]\">\n            BARBELLS\n          </li>\n          <li class=\"menuitem categoria\" [routerLink]=\"['/category', getSubcategoryId('CIRCULAR BARBELLS')]\">\n            CIRCULAR BARBELLS\n          </li>\n          <li class=\"menuitem categoria\" [routerLink]=\"['/category', getSubcategoryId('ANILLOS')]\">\n            ANILLOS\n          </li>\n        </ul>\n      </li>\n\n      <!-- Elemento para ver todos los productos -->\n      <li class=\"menuitem\" id=\"fincat\">\n        <a [routerLink]=\"['/ver-todo']\" class=\"nav-link\">VER TODO</a>\n      </li>\n\n      <!-- Elementos a la derecha: bsqueda, perfil y carrito -->\n      <div class=\"right-items\">\n        <!-- Campo de bsqueda -->\n        <li id=\"search\" class=\"menuitem\">\n          <input type=\"text\" id=\"searchinput\" [(ngModel)]=\"searchTerm\" (keyup.enter)=\"search()\" placeholder=\"Buscar artculo......\" />\n          <img id=\"searchicon\" src=\"assets/images/icons/search.png\" alt=\"botn de bsqueda\" (click)=\"search()\">\n        </li>\n\n        <!-- Perfil de usuario - CON NOMBRE E ICONO DE LOGOUT -->\n        <li class=\"menuitem profile-section\">\n          <!-- Si est logueado, mostrar icono + nombre (icono primero) -->\n          <ng-container *ngIf=\"isUserLoggedIn && currentUser\">\n            <div class=\"user-info\" (click)=\"onProfileClick()\">\n              <img src=\"assets/images/icons/login.png\" \n                   id=\"imgprofile\" \n                   [alt]=\"'Perfil de ' + (currentUser.username || currentUser.nombre)\" />\n              <span class=\"username-display\">{{ currentUser.username || currentUser.nombre }}</span>\n            </div>\n            <!-- Icono de logout separado -->\n            <div class=\"logout-icon\" (click)=\"logout()\" title=\"Cerrar sesin\">\n              <img src=\"assets/images/icons/logout.png\" \n                   alt=\"Cerrar sesin\" \n                   class=\"logout-img\" />\n            </div>\n          </ng-container>\n          \n          <!-- Si NO est logueado, solo mostrar icono de login -->\n          <ng-container *ngIf=\"!isUserLoggedIn\">\n            <div class=\"login-only\" (click)=\"onProfileClick()\">\n              <img src=\"assets/images/icons/login.png\" \n                   id=\"imgprofile\" \n                   alt=\"Iniciar sesin\" />\n            </div>\n          </ng-container>\n        </li>\n\n        <!-- Carrito -->\n        <li id=\"carrito\" (click)=\"toggleCartAndLog()\">\n          <img src=\"assets/images/icons/cart.png\" alt=\"Carrito\" />\n          <p *ngIf=\"(cartService.cartItems | async)?.length\">{{ (cartService.cartItems | async)?.length }}</p>\n        </li>\n      </div>\n    </ul>\n  </div>\n</nav>\n\n<!-- POPUPS DE LOGIN Y REGISTRO -->\n\n<!-- Popup de Login -->\n<app-login-popup \n  [isVisible]=\"showLoginPopup\"\n  (closePopup)=\"onCloseLoginPopup()\"\n  (loginSuccess)=\"onLoginSuccess()\"\n  (switchToRegistro)=\"switchToRegistro()\">\n</app-login-popup>\n\n<!-- Popup de Registro -->\n<app-registro-popup \n  [isVisible]=\"showRegistroPopup\"\n  (closePopup)=\"onCloseRegistroPopup()\"\n  (registroSuccess)=\"onRegistroSuccess()\"\n  (switchToLogin)=\"switchToLogin()\">\n</app-registro-popup>","// profile.component.ts - ARCHIVO COMPLETO ACTUALIZADO\n\n// Importaciones necesarias de Angular\nimport { Component, OnInit, ViewChild } from '@angular/core';\n// Importacin para trabajar con formularios reactivos\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n// Importacin de servicios necesarios\nimport { AuthService } from '../../../services/auth.service';\n// Importacin de modelos de datos\nimport { User } from '../../../models/user';\n// Importacin para alertas\nimport Swal from 'sweetalert2';\n//  Importar el nuevo componente de modal\nimport { PasswordConfirmModalComponent } from '../../password-confirm-modal/password-confirm-modal';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.scss']\n})\nexport class ProfileComponent implements OnInit {\n  //  Referencia al modal de confirmacin de contrasea\n  @ViewChild(PasswordConfirmModalComponent) passwordModal!: PasswordConfirmModalComponent;\n  \n  // Propiedad para almacenar datos del usuario actual\n  currentUser: User | null = null;\n  \n  // FormGroup para manejar el formulario de actualizacin de perfil\n  profileForm: FormGroup;\n\n  // Constructor con inyeccin de dependencias\n  constructor(\n    private formBuilder: FormBuilder,     // Para crear formularios reactivos\n    private authService: AuthService      // Para obtener/actualizar datos del usuario\n  ) {\n    // Obtener el usuario actual desde el servicio de autenticacin\n    this.currentUser = this.authService.currentUserValue;\n    \n    // Inicializar el formulario con los datos actuales del usuario\n    this.profileForm = this.formBuilder.group({\n      username: [this.currentUser?.username, Validators.required],\n      password: [''],  // Campo opcional, vaco por defecto\n      email: [this.currentUser?.email, [Validators.required, Validators.email]],\n      nombre: [this.currentUser?.nombre, Validators.required],\n      direccion: [this.currentUser?.direccion, Validators.required],\n      ciudad: [this.currentUser?.ciudad, Validators.required],\n      cp: [this.currentUser?.cp, Validators.required]\n    });\n  }\n\n  // Mtodo que se ejecuta al inicializar el componente\n  ngOnInit() {\n    console.log(' ProfileComponent inicializado');\n    console.log(' Usuario actual:', this.currentUser);\n  }\n\n  /**\n   * Mtodo para iniciar el proceso de actualizacin del perfil\n   * Abre el modal de confirmacin de contrasea\n   */\n  updateProfile(): void {\n    // Validar que el formulario sea vlido\n    if (this.profileForm.invalid) {\n      Swal.fire({\n        title: 'Formulario invlido',\n        text: 'Por favor, completa todos los campos correctamente',\n        icon: 'warning',\n        confirmButtonColor: '#52667a'\n      });\n      return;\n    }\n\n    console.log(' Abriendo modal de confirmacin de contrasea...');\n    \n    //  Abrir el modal profesional\n    this.passwordModal.open();\n  }\n\n  /**\n   * Callback ejecutado cuando el usuario confirma su contrasea correctamente\n   * @param password - La contrasea confirmada (ya verificada)\n   */\n  onPasswordConfirmed(password: string): void {\n    console.log(' Contrasea confirmada, procediendo a actualizar perfil...');\n    \n    if (!this.currentUser) {\n      console.error(' No hay usuario actual');\n      return;\n    }\n\n    // Crear objeto usuario con los datos del formulario\n    const updatedUser: User = {\n      ...this.profileForm.value,\n      id: this.currentUser.id\n    };\n    \n    // Si no se ingres nueva contrasea, eliminar esa propiedad\n    if (!updatedUser.password || updatedUser.password.trim() === '') {\n      delete updatedUser.password;\n    }\n    \n    console.log(' Datos a actualizar:', { ...updatedUser, password: '***' });\n    \n    // Llamar al servicio para actualizar los datos\n    this.authService.updateUser(updatedUser).subscribe({\n      next: (data) => {\n        console.log(' Perfil actualizado exitosamente:', data);\n        \n        // Actualizar el usuario actual en el componente\n        this.currentUser = this.authService.currentUserValue;\n        \n        // Si se cambi la contrasea, limpiar el campo\n        if (updatedUser.password) {\n          this.profileForm.patchValue({ password: '' });\n        }\n        \n        // Mostrar mensaje de xito con diseo moderno\n        Swal.fire({\n          title: 'Perfil actualizado!',\n          text: 'Tus datos se han actualizado correctamente',\n          icon: 'success',\n          confirmButtonColor: '#667eea',\n          confirmButtonText: 'Entendido',\n          timer: 3000,\n          timerProgressBar: true\n        });\n      },\n      error: (error) => {\n        console.error(' Error al actualizar perfil:', error);\n        \n        // Mostrar mensaje de error detallado\n        Swal.fire({\n          title: 'Error al actualizar',\n          text: error.message || 'No se pudieron actualizar los datos. Por favor, intenta de nuevo.',\n          icon: 'error',\n          confirmButtonColor: '#dc3545',\n          confirmButtonText: 'Entendido'\n        });\n      }\n    });\n  }\n\n  /**\n   * Callback ejecutado cuando el usuario cancela la confirmacin de contrasea\n   */\n  onPasswordCancelled(): void {\n    console.log(' Actualizacin de perfil cancelada por el usuario');\n    \n    // Opcional: Mostrar un mensaje sutil\n    Swal.fire({\n      title: 'Actualizacin cancelada',\n      text: 'No se realizaron cambios en tu perfil',\n      icon: 'info',\n      confirmButtonColor: '#52667a',\n      timer: 2000,\n      timerProgressBar: true,\n      showConfirmButton: false\n    });\n  }\n}","<!-- profile.component.html - ARCHIVO COMPLETO FINAL -->\n\n<!-- Seccin de datos del usuario -->\n<div id=\"divdatos\">\n  <h1 id=\"titulo\">Datos</h1>\n  <!-- Formulario para editar datos personales -->\n  <form [formGroup]=\"profileForm\" (ngSubmit)=\"updateProfile()\">\n    <table>\n      <!-- Campo: Nombre de usuario -->\n      <tr>\n        <td>Nombre de usuario:</td>\n        <td><input type=\"text\" id=\"txtusername\" formControlName=\"username\" size=\"10\"/></td>\n      </tr>\n      <!-- Campo: Contrasea (opcional) -->\n      <tr>\n        <td>Contrasea:</td>\n        <td><input type=\"password\" id=\"txtpass\" formControlName=\"password\" size=\"10\" placeholder=\"Dejar vaco para no cambiar\"/></td>\n      </tr>\n      <!-- Campo: Email -->\n      <tr>\n        <td>E-mail:</td>\n        <td><input type=\"email\" id=\"txtemail\" formControlName=\"email\" size=\"20\"/></td>\n      </tr>\n      <!-- Campo: Nombre completo -->\n      <tr>\n        <td>Nombre completo:</td>\n        <td><input type=\"text\" id=\"txtnombre\" formControlName=\"nombre\" size=\"25\"/></td>\n      </tr>\n      <!-- Campo: Direccin -->\n      <tr>\n        <td>Direccin:</td>\n        <td><input type=\"text\" id=\"txtdireccion\" formControlName=\"direccion\" size=\"30\"/></td>\n      </tr>\n      <!-- Campo: Ciudad -->\n      <tr>\n        <td>Ciudad:</td>\n        <td><input type=\"text\" id=\"txtciudad\" formControlName=\"ciudad\" size=\"15\"/></td>\n      </tr>\n      <!-- Campo: Cdigo postal -->\n      <tr>\n        <td>Cdigo postal:</td>\n        <td><input type=\"text\" id=\"txtcp\" formControlName=\"cp\" size=\"5\"/></td>\n      </tr>\n      <!-- Botn para actualizar datos -->\n      <tr>\n        <td colspan=\"2\" style=\"text-align: center\">\n          <input type=\"submit\" id=\"actualizarDatos\" value=\"ACTUALIZAR DATOS\" [disabled]=\"!profileForm.valid\" />\n        </td>\n      </tr>\n    </table>\n  </form>\n</div>\n\n<!-- Usar el componente dedicado para historial de pedidos -->\n<app-historial-pedidos></app-historial-pedidos>\n\n<!--  Modal profesional de confirmacin de contrasea -->\n<app-password-confirm-modal\n  (confirmed)=\"onPasswordConfirmed($event)\"\n  (cancelled)=\"onPasswordCancelled()\">\n</app-password-confirm-modal>","// src/app/guards/auth.guard.ts - ARCHIVO COMPLETO\n\nimport { Injectable } from '@angular/core';\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { AuthService } from '../services/auth.service';\nimport { LoginPopupService } from './../services/login-popup.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard implements CanActivate {\n\n  constructor(\n    private router: Router,\n    private authService: AuthService,\n    private loginPopupService: LoginPopupService\n  ) {}\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    console.log(' AuthGuard verificando acceso a:', state.url);\n    \n    const currentUser = this.authService.currentUserValue;\n    \n    if (currentUser) {\n      console.log(' Usuario autenticado:', currentUser.username);\n      return true;\n    }\n\n    console.log(' Usuario no autenticado, abriendo popup de login');\n    \n    //  SOLO abrir popup, NO navegar\n    this.loginPopupService.openForCheckout(state.url);\n    \n    //  Simplemente retornar false para bloquear la navegacin\n    return false;\n  }\n}","// src/app/helpers/product-image-helper.ts - VERSIN COMPLETA CORREGIDA\n\nexport class ProductImageHelper {\n  //  MAPEO COMPLETO ACTUALIZADO\n  private static readonly PRODUCT_FOLDER_MAP: {\n    [key: string]: { folder: string; colors: string[]; fallbackColor: string }\n  } = {\n    // ========== ANILLOS (dentro de piercing/) ==========\n    'anillo con corazn': {\n      folder: 'piercing/anillo/anillo-corazon',\n      colors: ['dorado', 'negro', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n    'anillo corazn': {\n      folder: 'piercing/anillo/anillo-corazon',\n      colors: ['dorado', 'negro', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n    'anillo con corazon': {\n      folder: 'piercing/anillo/anillo-corazon',\n      colors: ['dorado', 'negro', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n    'anillo corazon': {\n      folder: 'piercing/anillo/anillo-corazon',\n      colors: ['dorado', 'negro', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n\n    'anillo con bisagra': {\n      folder: 'piercing/anillo/anillo-bisagra',\n      colors: ['dorado', 'azul', 'cobre', 'negro', 'multicolor'],\n      fallbackColor: 'dorado'\n    },\n    'anillo bisagra': {\n      folder: 'piercing/anillo/anillo-bisagra',\n      colors: ['dorado', 'azul', 'cobre', 'negro', 'multicolor'],\n      fallbackColor: 'dorado'\n    },\n    'anillo fino': {\n      folder: 'piercing/anillo/anillo-bisagra',\n      colors: ['azul', 'cobre', 'dorado', 'negro', 'multicolor'],\n      fallbackColor: 'dorado'\n    },\n\n    'aro para nostril': {\n      folder: 'piercing/anillo/aro-nostril',\n      colors: ['azul', 'multicolor', 'negro'],\n      fallbackColor: 'azul'\n    },\n    'aro nostril': {\n      folder: 'piercing/anillo/aro-nostril',\n      colors: ['azul', 'multicolor', 'negro'],\n      fallbackColor: 'azul'\n    },\n\n    'segment ring': {\n      folder: 'piercing/anillo/segment-ring',\n      colors: ['dorado','azul', 'multicolor', 'rosa'],\n      fallbackColor: 'dorado'\n    },\n\n    // ========== BANANAS (dentro de piercing/) ==========\n    'banana con rosa': {\n      folder: 'piercing/banana/banana-flor',\n      colors: ['rosa','azul', 'celeste', 'rojo', 'verde'],\n      fallbackColor: 'rosa'\n    },\n    'banana flor': {\n      folder: 'piercing/banana/banana-flor',\n      colors: ['azul', 'celeste', 'rojo', 'rosa', 'verde'],\n      fallbackColor: 'rosa'\n    },\n    'banana con flor': {\n      folder: 'piercing/banana/banana-flor',\n      colors: ['rosa','azul', 'celeste', 'rojo', 'verde'],\n      fallbackColor: 'rosa'\n    },\n\n    'banana con gema': {\n      folder: 'piercing/banana/banana-gema',\n      colors: ['azul', 'morado', 'transparente', 'rojo', 'verde', 'trebol'],\n      fallbackColor: 'azul'\n    },\n    'banana gema': {\n      folder: 'piercing/banana/banana-gema',\n      colors: ['azul', 'morado', 'transparente', 'rojo', 'verde', 'trebol'],\n      fallbackColor: 'azul'\n    },\n\n    'banana simple': {\n      folder: 'piercing/banana/banana-simple',\n      colors: ['dorado', 'plateado', 'multicolor'],\n      fallbackColor: 'dorado'\n    },\n    'banana para ombligo dorada': {\n      folder: 'piercing/banana/banana-simple',\n      colors: ['dorado'],\n      fallbackColor: 'dorado'\n    },\n    'banana para ombligo plateada': {\n      folder: 'piercing/banana/banana-simple',\n      colors: ['plateado'],\n      fallbackColor: 'plateado'\n    },\n\n    // ========== BARBELLS (dentro de piercing/) ==========\n    'barbell con alas': {\n      folder: 'piercing/barbell/barbell-alas',\n      colors: ['plateado'],\n      fallbackColor: 'plateado'\n    },\n    'barbells alas': {\n      folder: 'piercing/barbell/barbell-alas',\n      colors: ['plateado'],\n      fallbackColor: 'plateado'\n    },\n    'barbell alas': {\n      folder: 'piercing/barbell/barbell-alas',\n      colors: ['plateado'],\n      fallbackColor: 'plateado'\n    },\n\n    'barbell flecha': {\n      folder: 'piercing/barbell/barbell-flecha',\n      colors: ['dorado', 'negro', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n    'barbells flecha': {\n      folder: 'piercing/barbell/barbell-flecha',\n      colors: ['dorado', 'negro', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n    'barbell con flecha': {\n      folder: 'piercing/barbell/barbell-flecha',\n      colors: ['dorado', 'negro', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n\n    'barbell largo': {\n      folder: 'piercing/barbell/barbell-largo',\n      colors: ['dorado','azul', 'cobre', 'multicolor'],\n      fallbackColor: 'dorado'\n    },\n    'barbells largo': {\n      folder: 'piercing/barbell/barbell-largo',\n      colors: ['dorado','azul', 'cobre', 'multicolor'],\n      fallbackColor: 'dorado'\n    },\n\n    // ========== CIRCULAR BARBELLS (dentro de piercing/) ==========\n    'circular barbell con piedra': {\n      folder: 'piercing/circular-barbell/circular-barbell-piedra',\n      colors: ['cristal', 'negro'],\n      fallbackColor: 'cristal'\n    },\n    'circular barbell piedra': {\n      folder: 'piercing/circular-barbell/circular-barbell-piedra',\n      colors: ['cristal', 'negro'],\n      fallbackColor: 'cristal'\n    },\n\n    'circular barbell con flecha': {\n      folder: 'piercing/circular-barbell/circular-barbell-coni',\n      colors: ['dorado', 'cobre', 'negro'],\n      fallbackColor: 'dorado'\n    },\n    'circular barbell flecha': {\n      folder: 'piercing/circular-barbell/circular-barbell-coni',\n      colors: ['dorado', 'cobre', 'negro'],\n      fallbackColor: 'dorado'\n    },\n    'circular barbell con bola cni': {\n      folder: 'piercing/circular-barbell/circular-barbell-coni',\n      colors: ['dorado', 'cobre', 'negro'],\n      fallbackColor: 'dorado'\n    },\n    'circular barbell con bola coni': {\n      folder: 'piercing/circular-barbell/circular-barbell-coni',\n      colors: ['dorado', 'cobre', 'negro'],\n      fallbackColor: 'dorado'\n    },\n\n    // ========== LABRETS (dentro de piercing/) ==========\n    'labret corazn': {\n      folder: 'piercing/labret/labret-corazon',\n      colors: ['dorado', 'negro', 'plateado', 'rosa'],\n      fallbackColor: 'dorado'\n    },\n    'labret con corazn': {\n      folder: 'piercing/labret/labret-corazon',\n      colors: ['dorado', 'negro', 'plateado', 'rosa'],\n      fallbackColor: 'dorado'\n    },\n    'labret corazon': {\n      folder: 'piercing/labret/labret-corazon',\n      colors: ['dorado', 'negro', 'plateado', 'rosa'],\n      fallbackColor: 'dorado'\n    },\n\n    'labret simple': {\n      folder: 'piercing/labret/labret-simple',\n      colors: ['dorado','cobre',  'negro', 'multicolor'],\n      fallbackColor: 'dorado'\n    },\n\n    'labret tringulo': {\n      folder: 'piercing/labret/labret-triangulos',\n      colors: ['dorado', 'negro', 'plateado', 'rosa'],\n      fallbackColor: 'dorado'\n    },\n    'labret triangulo': {\n      folder: 'piercing/labret/labret-triangulos',\n      colors: ['dorado', 'negro', 'plateado', 'rosa'],\n      fallbackColor: 'dorado'\n    },\n    'labret con tringulo': {\n      folder: 'piercing/labret/labret-triangulos',\n      colors: ['dorado', 'negro', 'plateado', 'rosa'],\n      fallbackColor: 'dorado'\n    },\n    'labret triangulos': {\n      folder: 'piercing/labret/labret-triangulos',\n      colors: ['dorado', 'negro', 'plateado', 'rosa'],\n      fallbackColor: 'dorado'\n    },\n\n    // ========== PLUGS - CORRECCIN CRTICA ==========\n    \"plug\": {\n      folder: 'dilatador/plug/plug-simple',\n      colors: [ 'verde','azul','blanco','morado','negro'],\n      fallbackColor: 'verde'\n    },\n\n    'plug simple': {\n      folder: 'dilatador/plug/plug-simple',\n      colors: [ 'verde','azul','blanco','morado','negro'],\n      fallbackColor: 'verde'\n    },\n\n    'plug de acrlico': {\n      folder: 'dilatador/plug/plug-simple',\n      colors: [ 'verde','azul','blanco','morado','negro'],\n      fallbackColor: 'verde'\n    },\n    'plug de acrilico': {\n      folder: 'dilatador/plug/plug-simple',\n      colors: [ 'verde','azul','blanco','morado','negro'],\n      fallbackColor: 'verde'\n    },\n    'plug de silicona': {\n      folder: 'dilatador/plug/plug-dobles',\n      colors: ['azul', 'beige', 'morado', 'rojo', 'verde'],\n      fallbackColor: 'azul'\n    },\n    'plug silicona': {\n      folder: 'dilatador/plug/plug-dobles',\n      colors: ['azul', 'beige', 'morado', 'rojo', 'verde'],\n      fallbackColor: 'azul'\n    },\n\n    //  CRTICO: Plug con corazn - SOLO CAOBA\n    //  VERSIN CORRECTA (cmbiala por esta):\n    'plug con corazn': {\n      folder: 'dilatador/plug/plug-dobles',\n      colors: ['caoba'], //  SOLO caoba\n      fallbackColor: 'caoba'\n    },\n    'plug con corazon': {\n      folder: 'dilatador/plug/plug-dobles',\n      colors: ['caoba'], //  SOLO caoba\n      fallbackColor: 'caoba'\n    },\n\n    'plug doble': {\n      folder: 'dilatador/plug/plug-dobles',\n      colors: ['azul', 'beige', 'morado', 'rojo', 'verde'],\n      fallbackColor: 'azul'\n    },\n    'plug dobles': {\n      folder: 'dilatador/plug/plug-dobles',\n      colors: ['azul', 'beige', 'morado', 'rojo', 'verde'],\n      fallbackColor: 'azul'\n    },\n\n\n    // ========== DILATADORES Y EXPANDERS ==========\n    'set de dilatadores': {\n      folder: 'dilatador/set-dilatadores',\n      colors: ['rosa','blanco', 'plateado', 'violeta'],\n      fallbackColor: 'rosa'\n    },\n    'set dilatadores': {\n      folder: 'dilatador/set-dilatadores',\n      colors: ['rosa','blanco', 'plateado', 'violeta'],\n      fallbackColor: 'rosa'\n    },\n    'set de expanders de 1.1 a 15 mm': {\n      folder: 'dilatador/set-dilatadores',\n      colors: ['blanco', 'rosa', 'plateado', 'violeta'],\n      fallbackColor: 'rosa'\n    },\n    'set de expanders de 1,1 a 15 mm': {\n      folder: 'dilatador/set-dilatadores',\n      colors: ['blanco', 'rosa', 'plateado', 'violeta'],\n      fallbackColor: 'rosa'\n    },\n\n    dilatador: {\n      folder: 'dilatador/dilatador simple',\n      colors: [ 'negro', 'rojo'],\n      fallbackColor: 'negro'\n    },\n    dilatadores: {\n      folder: 'dilatador/dilatador simple',\n      colors: ['negro', 'rojo'],\n      fallbackColor: 'negro'\n    },\n\n    'expander duo': {\n      folder: 'dilatador/expander/expander-duo',\n      colors: ['celeste', 'dorado', 'verde'],\n      fallbackColor: 'celeste'\n    },\n    'expander con duo': {\n      folder: 'dilatador/expander/expander-duo',\n      colors: ['celeste', 'dorado', 'verde'],\n      fallbackColor: 'celeste'\n    },\n\n    'expander medusa': {\n      folder: 'dilatador/expander/expander-medusa',\n      colors: ['negro', 'verde'],\n      fallbackColor: 'negro'\n    },\n    'expander con medusa': {\n      folder: 'dilatador/expander/expander-medusa',\n      colors: ['negro', 'verde'],\n      fallbackColor: 'negro'\n    },\n\n    'expander espiral': {\n      folder: 'dilatador/expander/expander-duo',\n      colors: ['celeste', 'morado', 'verde'],\n      fallbackColor: 'celeste'\n    },\n    'expander en espiral': {\n      folder: 'dilatador/expander/expander-duo',\n      colors: ['celeste', 'morado', 'verde'],\n      fallbackColor: 'celeste'\n    },\n\n    'set de expanders curvados': {\n      folder: 'dilatador/expander/expander-medusa',\n      colors: ['negro', 'verde'],\n      fallbackColor: 'negro'\n    },\n    'set de expanders': {\n      folder: 'dilatador/set-dilatadores',\n      colors: ['blanco', 'rosa', 'plateado', 'violeta'],\n      fallbackColor: 'blanco'\n    },\n    'set expanders curvados': {\n      folder: 'dilatador/expander/expander-medusa',\n      colors: ['negro', 'verde'],\n      fallbackColor: 'negro'\n    },\n    'set expanders': {\n      folder: 'dilatador/set-dilatadores',\n      colors: ['blanco', 'rosa', 'plateado', 'violeta'],\n      fallbackColor: 'blanco'\n    },\n\n    // ========== TNELES ==========\n    'tnel de acrlico': {\n      folder: 'dilatador/tunel/tunel-acrilico',\n      colors: ['rojo','azul', 'blanco',  'negro', 'amarillo'],\n      fallbackColor: 'rojo'\n    },\n    'tunel de acrlico': {\n      folder: 'dilatador/tunel/tunel-acrilico',\n      colors: ['rojo','azul', 'blanco',  'negro', 'amarillo'],\n      fallbackColor: 'rojo'\n    },\n    'tnel acrlico': {\n      folder: 'dilatador/tunel/tunel-acrilico',\n      colors: ['rojo','azul', 'blanco',  'negro', 'amarillo'],\n      fallbackColor: 'rojo'\n    },\n    'tunel acrilico': {\n      folder: 'dilatador/tunel/tunel-acrilico',\n      colors: ['rojo','azul', 'blanco',  'negro', 'amarillo'],\n      fallbackColor: 'rojo'\n    },\n\n    'tnel de metal': {\n      folder: 'dilatador/tunel/tunel-metal',\n      colors: ['dorado','azul', 'cobre'],\n      fallbackColor: 'dorado'\n    },\n    'tunel de metal': {\n      folder: 'dilatador/tunel/tunel-metal',\n      colors: ['dorado','azul', 'cobre'],\n      fallbackColor: 'dorado'\n    },\n    'tnel metal': {\n      folder: 'dilatador/tunel/tunel-metal',\n      colors: ['dorado','azul', 'cobre'],\n      fallbackColor: 'dorado'\n    },\n    'tunel metal': {\n      folder: 'dilatador/tunel/tunel-metal',\n      colors: ['dorado','azul', 'cobre'],\n      fallbackColor: 'dorado'\n    },\n    'tnel de acero': {\n      folder: 'dilatador/tunel/tunel-metal',\n      colors: ['dorado','azul', 'cobre'],\n      fallbackColor: 'dorado'\n    },\n    'tunel de acero': {\n      folder: 'dilatador/tunel/tunel-metal',\n      colors: ['dorado','azul', 'cobre'],\n      fallbackColor: 'dorado'\n    },\n\n    'tnel orfebre': {\n      folder: 'dilatador/tunel/tunel-orfebre',\n      colors: ['dorado', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n    'tunel orfebre': {\n      folder: 'dilatador/tunel/tunel-orfebre',\n      colors: ['dorado', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n    'tnel mandala': {\n      folder: 'dilatador/tunel/tunel-orfebre',\n      colors: ['dorado', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n    'tunel mandala': {\n      folder: 'dilatador/tunel/tunel-orfebre',\n      colors: ['dorado', 'plateado'],\n      fallbackColor: 'dorado'\n    },\n\n    'tnel de silicona': {\n      folder: 'dilatador/tunel/tunel-silicona',\n      colors: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n      fallbackColor: 'azul'\n    },\n    'tunel de silicona': {\n      folder: 'dilatador/tunel/tunel-silicona',\n      colors: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n      fallbackColor: 'azul'\n    },\n    'tnel silicona': {\n      folder: 'dilatador/tunel/tunel-silicona',\n      colors: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n      fallbackColor: 'azul'\n    },\n    'tunel silicona': {\n      folder: 'dilatador/tunel/tunel-silicona',\n      colors: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n      fallbackColor: 'azul'\n    },\n\n    tnel: {\n      folder: 'dilatador/tunel/tunel-silicona',\n      colors: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n      fallbackColor: 'azul'\n    },\n    tunel: {\n      folder: 'dilatador/tunel/tunel-silicona',\n      colors: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n      fallbackColor: 'azul'\n    },\n\n    piercing: {\n      folder: 'piercing/anillo/anillo-bisagra',\n      colors: ['cobre', 'dorado', 'negro', 'multicolor'],\n      fallbackColor: 'dorado'\n    }\n  }\n\n  static getProductImageSrc(product: any, selectedColor?: string): string {\n    if (!product || !product.nombre) {\n      return this.getFallbackImage();\n    }\n  \n    const nombre = product.nombre\n      .normalize(\"NFD\")\n      .replace(/[\\u0300-\\u036f]/g, \"\")\n      .toLowerCase()\n      .trim();\n  \n    console.log(' getProductImageSrc:', {\n      nombre,\n      nombreOriginal: product.nombre,\n      selectedColor,\n      carpetaimg: product.carpetaimg\n    });\n  \n    //  REGLA ESPECIAL 1: Plug con corazn - HARDCODED\n    if (nombre.includes('plug con corazon') || nombre.includes('plug con corazn')) {\n      console.log(' PLUG CON CORAZN detectado');\n      return 'assets/images/dilatador/plug/plug-dobles/caoba.jpg';\n    }\n  \n    //  REGLA ESPECIAL 2: \"Plug\" genrico SOLO si es EXACTAMENTE \"plug\"\n    //  IMPORTANTE: Debe ir DESPUS de buscar en el mapeo\n    // Para que \"plug de silicona\", \"plug doble\", etc. se procesen primero\n  \n    // ESTRATEGIA 1: Buscar configuracin especfica PRIMERO\n    const productConfig = this.findProductConfig(nombre);\n    if (productConfig) {\n      console.log(' Config encontrada:', productConfig.folder);\n      const imagePath = this.getImagePathForProduct(productConfig, selectedColor, nombre);\n      console.log(' Ruta final:', imagePath);\n      return imagePath;\n    }\n  \n    // ESTRATEGIA 2: Buscar por palabras clave\n    const keywordConfig = this.findByKeywords(nombre);\n    if (keywordConfig) {\n      console.log(' Keyword config:', keywordConfig.folder);\n      const imagePath = this.getImagePathForProduct(keywordConfig, selectedColor, nombre);\n      console.log(' Ruta final:', imagePath);\n      return imagePath;\n    }\n  \n    // ESTRATEGIA 3: Buscar por tipo\n    const typeConfig = this.findByProductType(nombre);\n    if (typeConfig) {\n      console.log(' Type config:', typeConfig.folder);\n      const imagePath = this.getImagePathForProduct(typeConfig, selectedColor, nombre);\n      console.log(' Ruta final:', imagePath);\n      return imagePath;\n    }\n  \n    //  SOLO SI NO SE ENCONTR NADA y es exactamente \"plug\", usar fallback de plug genrico\n    if (nombre === \"plug\") {\n      console.log(' PLUG GENRICO detectado como ltimo recurso');\n      return 'assets/images/dilatador/plug/plug-simple/negro.jpg';\n    }\n  \n    // ESTRATEGIA 4: Fallback\n    console.warn(' No se encontr configuracin para:', nombre);\n    return this.getFallbackImage();\n  }\n\n  /**\n   *  OBTENER COLORES DISPONIBLES\n   */\n  static getAvailableColors(productName: string): string[] {\n    const nombre = productName\n      .normalize(\"NFD\")\n      .replace(/[\\u0300-\\u036f]/g, \"\")\n      .toLowerCase()\n      .trim();\n  \n    console.log(' getAvailableColors para:', nombre);\n  \n    //  REGLA ESPECIAL: Plug con corazn\n    if (nombre.includes('plug con corazon') || nombre.includes('plug con corazn')) {\n      console.log(' Retornando solo [caoba]');\n      return ['caoba'];\n    }\n  \n    const config = this.findProductConfig(nombre) ||\n      this.findByKeywords(nombre) ||\n      this.findByProductType(nombre);\n  \n    if (config) {\n      // Filtrar \"default\" de los colores visibles\n      const colorsFiltered = config.colors.filter(c => c.toLowerCase() !== 'default');\n      return colorsFiltered.length > 0 ? colorsFiltered : ['Estndar'];\n    }\n  \n    return ['Estndar'];\n  }\n\n  /**\n   *  FALLBACK IMAGE\n   */\n  private static getFallbackImage (): string {\n    return 'assets/images/default.jpg'\n  }\n\n  /**\n   *  BUSCAR CONFIGURACIN ESPECFICA\n   */\n  private static findProductConfig (\n    productName: string\n  ): { folder: string; colors: string[]; fallbackColor: string } | null {\n    const normalizedName = productName\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .toLowerCase()\n      .trim()\n\n    for (const [key, config] of Object.entries(this.PRODUCT_FOLDER_MAP)) {\n      const normalizedKey = key\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '')\n        .toLowerCase()\n        .trim()\n\n      if (normalizedName === normalizedKey) {\n        console.log(` Configuracin exacta: ${key}`)\n        return config\n      }\n    }\n\n    return null\n  }\n\n  /**\n   *  BUSCAR POR PALABRAS CLAVE\n   */\n  private static findByKeywords (\n    productName: string\n  ): { folder: string; colors: string[]; fallbackColor: string } | null {\n    if (\n      productName.includes('plug con corazon') ||\n      productName.includes('plug con corazn')\n    ) {\n      return null\n    }\n\n    const keywordMap: {\n      [key: string]: { folder: string; colors: string[]; fallbackColor: string }\n    } = {\n      bisagra: {\n        folder: 'piercing/anillo/anillo-bisagra',\n        colors: ['dorado','azul', 'cobre', 'negro', 'multicolor'],\n        fallbackColor: 'dorado'\n      },\n      corazon: {\n        folder: 'piercing/anillo/anillo-corazon',\n        colors: ['dorado', 'negro', 'plateado'],\n        fallbackColor: 'dorado'\n      },\n      triangulo: {\n        folder: 'piercing/labret/labret-triangulos',\n        colors: ['dorado', 'negro', 'plateado', 'rosa'],\n        fallbackColor: 'dorado'\n      },\n      flecha: {\n        folder: 'piercing/barbell/barbell-flecha',\n        colors: ['dorado', 'negro', 'plateado'],\n        fallbackColor: 'plateado'\n      },\n      alas: {\n        folder: 'piercing/barbell/barbell-alas',\n        colors: ['plateado'],\n        fallbackColor: 'plateado'\n      },\n      gema: {\n        folder: 'piercing/banana/banana-gema',\n        colors: ['azul', 'morado', 'transparente', 'rojo', 'verde'],\n        fallbackColor: 'azul'\n      },\n      acrilico: {\n        folder: 'dilatador/tunel/tunel-acrilico',\n        colors: ['azul', 'blanco', 'rojo', 'negro', 'amarillo'],\n        fallbackColor: 'azul'\n      },\n      acrlico: {\n        folder: 'dilatador/tunel/tunel-acrilico',\n        colors: ['azul', 'blanco', 'rojo', 'negro', 'amarillo'],\n        fallbackColor: 'azul'\n      },\n      metal: {\n        folder: 'dilatador/tunel/tunel-metal',\n        colors: ['azul', 'cobre', 'dorado'],\n        fallbackColor: 'dorado'\n      },\n      acero: {\n        folder: 'dilatador/tunel/tunel-metal',\n        colors: ['azul', 'cobre', 'dorado'],\n        fallbackColor: 'dorado'\n      },\n      orfebre: {\n        folder: 'dilatador/tunel/tunel-orfebre',\n        colors: ['dorado', 'plateado'],\n        fallbackColor: 'dorado'\n      },\n      mandala: {\n        folder: 'dilatador/tunel/tunel-orfebre',\n        colors: ['dorado', 'plateado'],\n        fallbackColor: 'dorado'\n      },\n      silicona: {\n        folder: 'dilatador/tunel/tunel-silicona',\n        colors: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n        fallbackColor: 'azul'\n      },\n      nostril: {\n        folder: 'piercing/anillo/aro-nostril',\n        colors: ['azul', 'multicolor', 'negro'],\n        fallbackColor: 'azul'\n      },\n      ombligo: {\n        folder: 'piercing/banana/banana-simple',\n        colors: ['dorado', 'plateado', 'multicolor'],\n        fallbackColor: 'dorado'\n      },\n      piedra: {\n        folder: 'piercing/circular-barbell/circular-barbell-piedra',\n        colors: ['cristal', 'negro'],\n        fallbackColor: 'cristal'\n      },\n      cni: {\n        folder: 'piercing/circular-barbell/circular-barbell-coni',\n        colors: ['dorado', 'cobre', 'negro'],\n        fallbackColor: 'dorado'\n      },\n      coni: {\n        folder: 'piercing/circular-barbell/circular-barbell-coni',\n        colors: ['dorado', 'cobre', 'negro'],\n        fallbackColor: 'dorado'\n      },\n      bola: {\n        folder: 'piercing/circular-barbell/circular-barbell-coni',\n        colors: ['dorado', 'cobre', 'negro'],\n        fallbackColor: 'dorado'\n      },\n      duo: {\n        folder: 'dilatador/expander/expander-duo',\n        colors: ['celeste', 'dorado', 'verde'],\n        fallbackColor: 'celeste'\n      },\n      medusa: {\n        folder: 'dilatador/expander/expander-medusa',\n        colors: ['negro', 'verde'],\n        fallbackColor: 'negro'\n      },\n      espiral: {\n        folder: 'dilatador/expander/expander-duo',\n        colors: ['celeste', 'dorado', 'verde'],\n        fallbackColor: 'celeste'\n      },\n      curvados: {\n        folder: 'dilatador/expander/expander-medusa',\n        colors: ['negro', 'verde'],\n        fallbackColor: 'negro'\n      },\n      curvado: {\n        folder: 'dilatador/expander/expander-medusa',\n        colors: ['negro', 'verde'],\n        fallbackColor: 'negro'\n      },\n      rosa: {\n        folder: 'piercing/banana/banana-flor',\n        colors: ['azul', 'celeste', 'rojo', 'rosa', 'verde'],\n        fallbackColor: 'rosa'\n      },\n      flor: {\n        folder: 'piercing/banana/banana-flor',\n        colors: ['azul', 'celeste', 'rojo', 'rosa', 'verde'],\n        fallbackColor: 'rosa'\n      }\n    }\n\n    for (const [keyword, config] of Object.entries(keywordMap)) {\n      if (productName.includes(keyword)) {\n        console.log(` Keyword match: \"${keyword}\"`)\n        return config\n      }\n    }\n\n    return null\n  }\n\n  /**\n   *  BUSCAR POR TIPO DE PRODUCTO\n   */\n  private static findByProductType (\n    productName: string\n  ): { folder: string; colors: string[]; fallbackColor: string } | null {\n    const typeMap: {\n      [key: string]: { folder: string; colors: string[]; fallbackColor: string }\n    } = {\n      anillo: {\n        folder: 'piercing/anillo/anillo-bisagra',\n        colors: ['dorado','azul', 'cobre', 'negro', 'multicolor'],\n        fallbackColor: 'dorado'\n      },\n      aro: {\n        folder: 'piercing/anillo/aro-nostril',\n        colors: ['azul', 'multicolor', 'negro'],\n        fallbackColor: 'azul'\n      },\n      banana: {\n        folder: 'piercing/banana/banana-simple',\n        colors: ['dorado', 'plateado', 'multicolor'],\n        fallbackColor: 'dorado'\n      },\n      barbell: {\n        folder: 'piercing/barbell/barbell-flecha',\n        colors: ['dorado', 'negro', 'plateado'],\n        fallbackColor: 'plateado'\n      },\n      labret: {\n        folder: 'piercing/labret/labret-simple',\n        colors: ['cobre', 'dorado', 'negro', 'multicolor'],\n        fallbackColor: 'dorado'\n      },\n      plug: {\n        folder: 'dilatador/plug/plug-simple',\n        colors: [\n          'amarillo',\n          'azul',\n          'blanco',\n          'morado',\n          'negro',\n          'verde'\n        ],\n        fallbackColor: 'negro'\n      },\n      tunel: {\n        folder: 'dilatador/tunel/tunel-silicona',\n        colors: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n        fallbackColor: 'azul'\n      },\n      tnel: {\n        folder: 'dilatador/tunel/tunel-silicona',\n        colors: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n        fallbackColor: 'azul'\n      },\n      expander: {\n        folder: 'dilatador/expander/expander-duo',\n        colors: ['celeste', 'dorado', 'verde'],\n        fallbackColor: 'celeste'\n      },\n      dilatador: {\n        folder: 'dilatador/dilatador simple',\n        colors: ['negro', 'rojo'],\n        fallbackColor: 'negro'\n      },\n      piercing: {\n        folder: 'piercing/anillo/anillo-bisagra',\n        colors: ['dorado','azul', 'cobre', 'negro', 'multicolor'],\n        fallbackColor: 'dorado'\n      },\n      circular: {\n        folder: 'piercing/circular-barbell/circular-barbell-piedra',\n        colors: ['cristal', 'negro'],\n        fallbackColor: 'cristal'\n      },\n      set: {\n        folder: 'dilatador/set-dilatadores',\n        colors: ['blanco', 'rosa', 'plateado', 'violeta'],\n        fallbackColor: 'rosa'\n      }\n    }\n\n    for (const [type, config] of Object.entries(typeMap)) {\n      if (productName.includes(type)) {\n        console.log(` Type match: \"${type}\"`)\n        return config\n      }\n    }\n\n    return null\n  }\n\n  /**\n   *  OBTENER RUTA DE IMAGEN\n   */\nprivate static getImagePathForProduct(\n  config: { folder: string; colors: string[]; fallbackColor: string },\n  selectedColor?: string,\n  productName?: string\n): string {\n  const { folder, colors, fallbackColor } = config;\n\n  console.log(' getImagePathForProduct:', {\n    folder,\n    selectedColor,\n    fallbackColor,\n    colors: colors.slice(0, 3) // Solo mostrar primeros 3 para no saturar logs\n  });\n\n  //  PASO 1: Si hay un color seleccionado y est disponible\n  if (selectedColor) {\n    const colorLower = selectedColor.toLowerCase();\n    const colorsLower = colors.map(c => c.toLowerCase());\n    \n    if (colorsLower.includes(colorLower)) {\n      const imagePath = `assets/images/${folder}/${colorLower}.jpg`;\n      console.log(' Color seleccionado:', imagePath);\n      return imagePath;\n    }\n  }\n\n  //  PASO 2: Usar el color de fallback\n  if (fallbackColor) {\n    const fallbackLower = fallbackColor.toLowerCase();\n    const colorsLower = colors.map(c => c.toLowerCase());\n    \n    if (colorsLower.includes(fallbackLower)) {\n      const imagePath = `assets/images/${folder}/${fallbackLower}.jpg`;\n      console.log(' Usando fallback:', imagePath);\n      return imagePath;\n    }\n  }\n\n  //  PASO 3: Usar el primer color disponible\n  if (colors.length > 0) {\n    const firstColor = colors[0].toLowerCase();\n    const imagePath = `assets/images/${folder}/${firstColor}.jpg`;\n    console.log(' Usando primer color:', imagePath);\n    return imagePath;\n  }\n\n  //  PASO 4: Fallback final\n  console.warn(' Sin colores disponibles para:', folder);\n  return this.getFallbackImage();\n}\n\n  /**\n   *  VERIFICAR SI EXISTE VARIANTE DE COLOR\n   */\n  static hasColorVariant (productName: string, color: string): boolean {\n    const availableColors = this.getAvailableColors(productName)\n    return availableColors.includes(color.toLowerCase())\n  }\n\n  /**\n   *  OBTENER CARPETA DEL PRODUCTO\n   */\n  static getProductFolder (productName: string): string {\n    const config =\n      this.findProductConfig(productName.toLowerCase()) ||\n      this.findByKeywords(productName.toLowerCase()) ||\n      this.findByProductType(productName.toLowerCase())\n    return config ? config.folder : 'default'\n  }\n\n  /**\n   *  DEBUG DEL PRODUCTO\n   */\n  static debugProduct (productName: string): void {\n    console.group(` Debug para producto: ${productName}`)\n\n    const config =\n      this.findProductConfig(productName.toLowerCase()) ||\n      this.findByKeywords(productName.toLowerCase()) ||\n      this.findByProductType(productName.toLowerCase())\n\n    if (config) {\n      console.log(' Carpeta:', config.folder)\n      console.log(' Colores disponibles:', config.colors)\n      console.log(' Color de fallback:', config.fallbackColor)\n      console.log(\n        ' Imagen por defecto:',\n        this.getImagePathForProduct(config, undefined, productName)\n      )\n\n      config.colors.forEach(color => {\n        console.log(\n          `   ${color}: ${this.getImagePathForProduct(\n            config,\n            color,\n            productName\n          )}`\n        )\n      })\n    } else {\n      console.log(' No se encontraron configuraciones para este producto')\n    }\n\n    console.groupEnd()\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n\n  constructor(private authService: AuthService) {}\n\n  intercept(request: HttpRequest<unknown>, next: HttpHandler): Observable<HttpEvent<unknown>> {\n    // Obtener el usuario actual completo\n    const currentUser = this.authService.currentUserValue;\n    const token = currentUser?.token;\n    \n    console.log(' AuthInterceptor - Interceptando peticin:', {\n      url: request.url,\n      method: request.method,\n      hasUser: !!currentUser,\n      hasToken: !!token,\n      tokenPreview: token ? token.substring(0, 20) + '...' : 'NO TOKEN'\n    });\n\n    // Si existe token, aadirlo a los headers\n    if (token) {\n      request = request.clone({\n        setHeaders: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(' Token JWT aadido a la peticin');\n    } else {\n      console.warn(' No hay token disponible para aadir a la peticin');\n      console.warn(' Estado del usuario:', {\n        hasCurrentUser: !!currentUser,\n        username: currentUser?.username,\n        userKeys: currentUser ? Object.keys(currentUser) : []\n      });\n    }\n\n    return next.handle(request);\n  }\n}","import { Injectable } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor,\n  HttpErrorResponse\n} from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\n@Injectable()\nexport class ErrorInterceptor implements HttpInterceptor {\n  constructor() {}\n\n  intercept(request: HttpRequest<unknown>, next: HttpHandler): Observable<HttpEvent<unknown>> {\n    return next.handle(request).pipe(\n      catchError((error: HttpErrorResponse) => {\n        // Aadir informacin detallada sobre el error\n        let errorMessage = '';\n        if (error.error instanceof ErrorEvent) {\n          // Error del lado del cliente\n          errorMessage = `Error del cliente: ${error.error.message}`;\n        } else {\n          // Error del lado del servidor\n          errorMessage = `Cdigo de error: ${error.status}\\nMensaje: ${error.message}`;\n          \n          // Informacin adicional sobre la solicitud que fall\n          const url = request.urlWithParams;\n          const method = request.method;\n          \n          console.error('Error en solicitud HTTP:', {\n            url,\n            method,\n            status: error.status,\n            statusText: error.statusText,\n            error: error.error,\n            headers: request.headers\n          });\n          \n          // Manejo especfico segn el cdigo de error\n          switch (error.status) {\n            case 0:\n              console.error('No se pudo conectar al servidor. Verifica tu conexin a internet o si el servidor est en funcionamiento.');\n              break;\n            case 404:\n              console.error(`El recurso solicitado no existe: ${url}`);\n              break;\n            case 401:\n              console.error('No autorizado. Por favor, inicia sesin nuevamente.');\n              break;\n            case 403:\n              console.error('Acceso prohibido. No tienes permiso para acceder a este recurso.');\n              break;\n            case 500:\n              console.error('Error interno del servidor. Por favor, intenta ms tarde.');\n              break;\n            default:\n              console.error(`Error HTTP desconocido: ${error.status}`);\n              break;\n          }\n        }\n        \n        // Devolver el error para que los componentes puedan manejarlo\n        return throwError(() => error);\n      })\n    );\n  }\n}","// src/app/models/order.ts - Interfaces completas y corregidas\n\n/**\n * Interfaz para items del carrito\n * Compatible con cart.service.ts y checkout.component.ts\n */\nexport interface CartItem {\n  id: number;\n  producto?: any; // Objeto Product completo (opcional)\n  cantidad: number;\n  color?: string;\n  talla?: string;\n  precio: number;\n  nombre?: string;\n  imagen?: string;\n  quantity?: number; // Alias de cantidad para compatibilidad\n}\n\n/**\n * Interfaz para lneas de pedido (frontend)\n * Usa 'cantidad' para mantener consistencia en el frontend\n */\nexport interface OrderLine {\n  id?: number;\n  idpedido: number;\n  idprod: number;\n  color: string;\n  cantidad: number; //  Frontend usa 'cantidad'\n  nombre?: string;\n  precio?: number; //  AADIDO: Precio unitario\n  product?: any; //  AADIDO: Objeto producto completo\n}\n\n/**\n * Interfaz para lneas de pedido (backend)\n * Mapea 'cantidad' -> 'cant' para el backend\n */\nexport interface OrderLineBackend {\n  id?: number;\n  idpedido: number;\n  idprod: number;\n  color: string;\n  cant: number; //  Backend espera 'cant'\n  nombre?: string;\n  precio?: number; //  AADIDO: Precio unitario\n  product?: any; //  AADIDO: Objeto producto completo\n}\n\n/**\n * Interfaz para pedidos (frontend)\n * Estructura simplificada para el frontend\n */\nexport interface Order {\n  id?: number;\n  usuario_id: number; // ID del usuario (se mapea a iduser en backend)\n  fecha: string; // Fecha en formato ISO string\n  total: number;\n  estado: string; // Estado de la peticin\n  lineas?: OrderLine[]; // Lneas con 'cantidad'\n}\n\n/**\n * Interfaz para pedidos (backend)\n * Lo que realmente espera el backend\n */\nexport interface OrderBackend {\n  id?: number;\n  iduser: number; //  Backend espera 'iduser'\n  fecha: string; // Fecha en formato YYYY-MM-DD\n  total: number;\n  estado?: string;\n  lineas?: OrderLineBackend[]; // Lneas con 'cant'\n}\n\n/**\n * Interfaz para respuesta completa de pedido (con relaciones)\n */\nexport interface OrderDetail extends Order {\n  user?: {\n    id: number;\n    username: string;\n    nombre: string;\n    email: string;\n  };\n  lineas: Array<OrderLine & {\n    product?: {\n      id: number;\n      nombre: string;\n      precio: number;\n      imagen: string;\n      carpetaimg: string;\n    }\n  }>;\n}\n\n/**\n * Interfaz para el estado de checkout\n */\nexport interface CheckoutState {\n  currentUser: any;\n  cartItems: CartItem[];\n  total: number;\n  loading: boolean;\n  useUserDataDirectly: boolean;\n}\n\n/**\n * Interfaz para datos de envo del formulario\n */\nexport interface ShippingData {\n  nombre: string;\n  direccion: string;\n  ciudad: string;\n  cp: string;\n  telefono?: string;\n}\n\n/**\n * Funciones de utilidad para conversin entre formatos\n */\nexport class OrderUtils {\n  \n  /**\n   * Convierte Order (frontend) a OrderBackend\n   */\n  static toBackendFormat(order: Order): OrderBackend {\n    return {\n      id: order.id,\n      iduser: order.usuario_id,\n      fecha: order.fecha.split('T')[0], // Asegurar formato YYYY-MM-DD\n      total: order.total,\n      lineas: order.lineas?.map(line => ({\n        id: line.id,\n        idpedido: line.idpedido,\n        idprod: line.idprod,\n        color: line.color,\n        cant: line.cantidad, // cantidad -> cant\n        nombre: line.nombre,\n        precio: line.precio, //  PRESERVAR: Precio unitario\n        product: line.product //  PRESERVAR: Objeto producto\n      }))\n    };\n  }\n\n  /**\n   *  CORREGIDO: Convierte OrderBackend a Order (frontend)\n   * Ahora preserva el precio y el objeto product\n   */\n  static fromBackendFormat(orderBackend: OrderBackend): Order {\n    console.log(' Transformando OrderBackend a Order:', orderBackend);\n  \n    return {\n      id: orderBackend.id,\n      usuario_id: orderBackend.iduser,\n      fecha: orderBackend.fecha,\n      total: orderBackend.total,\n      estado: orderBackend.estado || '', // <-- Aade esta lnea. Valor por defecto si no existe.\n      lineas: orderBackend.lineas?.map(line => {\n        const transformedLine = {\n          id: line.id,\n          idpedido: line.idpedido,\n          idprod: line.idprod,\n          color: line.color,\n          cantidad: line.cant,\n          nombre: line.nombre,\n          precio: line.precio || 0,\n          product: line.product\n        };\n        console.log(` Lnea transformada: ${transformedLine.nombre} - Precio: ${transformedLine.precio}`);\n        return transformedLine;\n      })\n    };\n  }\n  \n\n  /**\n   * Convierte CartItem[] a OrderLine[]\n   */\n  static cartItemsToOrderLines(cartItems: CartItem[], orderId: number = 0): OrderLine[] {\n    return cartItems.map(item => ({\n      idpedido: orderId,\n      idprod: item.id,\n      color: item.color || 'Estndar',\n      cantidad: item.cantidad,\n      nombre: item.nombre || '',\n      precio: item.precio, //  AADIDO: Incluir precio del carrito\n      product: item.producto //  AADIDO: Incluir producto\n    }));\n  }\n\n  /**\n   * Valida que un pedido tenga todos los campos requeridos\n   */\n  static validateOrder(order: Order): { valid: boolean; errors: string[] } {\n    const errors: string[] = [];\n\n    if (!order.usuario_id || order.usuario_id <= 0) {\n      errors.push('ID de usuario requerido');\n    }\n\n    if (!order.total || order.total <= 0) {\n      errors.push('Total debe ser mayor a 0');\n    }\n\n    if (!order.lineas || order.lineas.length === 0) {\n      errors.push('El pedido debe contener al menos un producto');\n    }\n\n    if (order.lineas) {\n      order.lineas.forEach((line, index) => {\n        if (!line.idprod || line.idprod <= 0) {\n          errors.push(`Lnea ${index + 1}: ID de producto requerido`);\n        }\n        if (!line.cantidad || line.cantidad <= 0) {\n          errors.push(`Lnea ${index + 1}: Cantidad debe ser mayor a 0`);\n        }\n        if (!line.color) {\n          errors.push(`Lnea ${index + 1}: Color requerido`);\n        }\n      });\n    }\n\n    return {\n      valid: errors.length === 0,\n      errors\n    };\n  }\n}","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'imageUrl'\r\n})\r\nexport class ImageUrlPipe implements PipeTransform {\r\n  transform(imagen: string, carpetaimg?: string, categoriaId?: number): string {\r\n    if (!imagen) {\r\n      return 'assets/images/background/placeholder.jpg';\r\n    }\r\n\r\n    // Mapeo de categoras a nombres de carpetas (basado en tu estructura real)\r\n    const categoryFolderMap: { [key: number]: string } = {\r\n      1: 'anillo',\r\n      2: 'tuneles',\r\n      3: 'tuneles',\r\n      4: 'plug',\r\n      5: 'expander',\r\n      6: 'banana',\r\n      7: 'labret',\r\n      8: 'barbell',\r\n      9: 'circular-barbel',\r\n      10: 'anillo'\r\n    };\r\n    \r\n    // Determinar la carpeta a usar\r\n    let folder = 'background'; // carpeta por defecto\r\n    \r\n    if (carpetaimg && carpetaimg.trim() !== '') {\r\n      // Usar la carpeta especificada en el producto\r\n      folder = carpetaimg;\r\n    } else if (categoriaId && categoryFolderMap[categoriaId]) {\r\n      // Usar la carpeta basada en la categora\r\n      folder = categoryFolderMap[categoriaId];\r\n    }\r\n    \r\n    console.log(`Generando ruta de imagen: assets/images/${folder}/${imagen}`);\r\n    return `assets/images/${folder}/${imagen}`;\r\n  }\r\n}","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { BehaviorSubject, Observable, throwError } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport { User } from '../models/user';\nimport { Router } from '@angular/router';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  private apiUrl = `${environment.apiUrl}/users`;\n  private currentUserSubject: BehaviorSubject<User | null>;\n  public currentUser: Observable<User | null>;\n\n  constructor(private http: HttpClient, private router: Router) {\n    console.log(' AuthService inicializado');\n    console.log(' API URL:', this.apiUrl);\n    \n    const storedUser = localStorage.getItem('currentUser');\n    this.currentUserSubject = new BehaviorSubject<User | null>(\n      storedUser ? JSON.parse(storedUser) : null\n    );\n    this.currentUser = this.currentUserSubject.asObservable();\n    \n    if (storedUser) {\n      console.log(' Usuario restaurado del localStorage:', JSON.parse(storedUser));\n    }\n  }\n\n  public get currentUserValue(): User | null {\n    return this.currentUserSubject.value;\n  }\n\n  login(username: string, password: string): Observable<User> {\n    console.log(' Intentando login para usuario:', username);\n    console.log(' URL de login:', `${this.apiUrl}/login`);\n    \n    const loginData = { username, password };\n    console.log(' Datos de login:', { username, password: '***' });\n\n    return this.http.post<User>(`${this.apiUrl}/login`, loginData)\n      .pipe(\n        map(user => {\n          console.log(' Login exitoso, respuesta del servidor:', user);\n          \n          // Guardar en localStorage\n          localStorage.setItem('currentUser', JSON.stringify(user));\n          console.log(' Usuario guardado en localStorage');\n          \n          // Actualizar BehaviorSubject\n          this.currentUserSubject.next(user);\n          console.log(' Usuario actualizado en BehaviorSubject');\n          \n          return user;\n        }),\n        catchError(this.handleError('login'))\n      );\n  }\n\n  register(user: any): Observable<User> {\n    console.log(' Intentando registro de usuario:', user.username);\n    console.log(' URL de registro:', `${this.apiUrl}/register`);\n    console.log(' Datos de registro:', { ...user, password: '***' });\n\n    return this.http.post<User>(`${this.apiUrl}/register`, user)\n      .pipe(\n        map(response => {\n          console.log(' Registro exitoso, respuesta del servidor:', response);\n          return response;\n        }),\n        catchError(this.handleError('registro'))\n      );\n  }\n\n  updateUser(user: User): Observable<User> {\n    console.log(' Actualizando usuario:', user.id);\n    console.log(' URL de actualizacin:', `${this.apiUrl}/${user.id}`);\n\n    return this.http.put<User>(`${this.apiUrl}/${user.id}`, user)\n      .pipe(\n        map(updatedUser => {\n          console.log(' Usuario actualizado:', updatedUser);\n          \n          if (this.currentUserValue && this.currentUserValue.id === updatedUser.id) {\n            const userToStore = { ...updatedUser };\n            delete userToStore.password;\n            \n            localStorage.setItem('currentUser', JSON.stringify(userToStore));\n            this.currentUserSubject.next(userToStore);\n            console.log(' Usuario actual actualizado');\n          }\n          \n          return updatedUser;\n        }),\n        catchError(this.handleError('actualizacin de usuario'))\n      );\n  }\n\n  logout() {\n    console.log(' Cerrando sesin de usuario');\n    localStorage.removeItem('currentUser');\n    this.currentUserSubject.next(null);\n    this.router.navigate(['/']);\n  }\n\n  isAdmin(): boolean {\n    const isAdminUser = this.currentUserValue?.username === 'admin';\n    console.log(' Verificando si es admin:', isAdminUser);\n    return isAdminUser;\n  }\n\n  /**\n   * Obtener el token JWT del usuario actual\n   * AADIDO: Para compatibilidad con OrderService\n   */\n  getToken(): string | null {\n    const currentUser = this.currentUserValue;\n    if (currentUser && currentUser.token) {\n      console.log(' Token obtenido para usuario:', currentUser.username);\n      return currentUser.token;\n    }\n    console.warn(' No hay token disponible - usuario no autenticado');\n    return null;\n  }\n\n  /**\n   * Verificar si el usuario est autenticado\n   * AADIDO: Para compatibilidad con OrderService\n   */\n  isLoggedIn(): boolean {\n    const user = this.currentUserValue;\n    const hasToken = this.getToken();\n    const isAuthenticated = !!(user && hasToken);\n    \n    console.log(' Verificando autenticacin:', {\n      hasUser: !!user,\n      hasToken: !!hasToken,\n      isAuthenticated\n    });\n    \n    return isAuthenticated;\n  }\n\n  // Mtodo mejorado para manejo de errores\n  private handleError(operation = 'operation') {\n    return (error: HttpErrorResponse): Observable<never> => {\n      console.error(` Error en ${operation}:`, error);\n      \n      let userMessage = 'Ha ocurrido un error inesperado';\n      \n      if (error.error instanceof ErrorEvent) {\n        // Error del lado del cliente\n        console.error(' Error del cliente:', error.error.message);\n        userMessage = 'Error de conexin. Verifica tu internet.';\n      } else {\n        // Error del servidor\n        console.error(` Error del servidor ${error.status}:`, error.error);\n        \n        switch (error.status) {\n          case 0:\n            userMessage = 'No se puede conectar al servidor. Est el backend ejecutndose?';\n            console.error(' CORS o servidor no accesible en:', this.apiUrl);\n            break;\n          case 401:\n            userMessage = 'Usuario o contrasea incorrectos';\n            break;\n          case 400:\n            userMessage = error.error?.message || 'Datos invlidos';\n            break;\n          case 409:\n            userMessage = 'El usuario ya existe';\n            break;\n          case 500:\n            userMessage = 'Error interno del servidor';\n            break;\n          default:\n            userMessage = `Error del servidor: ${error.status}`;\n        }\n      }\n      \n      console.error(' Mensaje para el usuario:', userMessage);\n      \n      // Crear un error con el mensaje para el usuario\n      const clientError = new Error(userMessage);\n      (clientError as any).originalError = error;\n      \n      return throwError(() => clientError);\n    };\n  }\n}","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { Product } from '../models/product';\n\n// Interfaz para los elementos del carrito\nexport interface CartItem {\n  id: number;\n  producto?: Product;\n  cantidad: number;\n  color?: string;\n  talla?: string;\n  precio: number;\n  nombre?: string; // Aadido para compatibilidad\n  imagen?: string; // Aadido para compatibilidad\n  quantity?: number; // Alias de cantidad para compatibilidad con algunos componentes\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService {\n  \n  private _cartItems = new BehaviorSubject<CartItem[]>([]);\n  private _isCartOpen = new BehaviorSubject<boolean>(false);\n\n  // Getters para los observables\n  get cartItems() {\n    return this._cartItems.asObservable();\n  }\n  \n  // Aadido: Alias para cartItems como cart$ para solucionar el error en navbar.component.ts\n  get cart$() {\n    return this._cartItems.asObservable();\n  }\n  \n  // Getter y setter para isCartOpen\n  get isCartOpen(): boolean {\n    return this._isCartOpen.value;\n  }\n  \n  set isCartOpen(value: boolean) {\n    this._isCartOpen.next(value);\n  }\n  \n  // Observable para isCartOpen (por si se necesita suscribir)\n  get isCartOpenObservable() {\n    return this._isCartOpen.asObservable();\n  }\n\n  constructor() {\n    // Recuperar carrito del localStorage al iniciar\n    this.loadCart();\n  }\n\n  // Cargar carrito desde localStorage\n  private loadCart(): void {\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      try {\n        const items = JSON.parse(savedCart);\n        // Asegurar compatibilidad - aadir quantity como alias de cantidad\n        const updatedItems = items.map((item: CartItem) => ({\n          ...item,\n          quantity: item.cantidad // Agregar quantity como alias de cantidad\n        }));\n        this._cartItems.next(updatedItems);\n      } catch (e) {\n        console.error('Error parsing cart from localStorage:', e);\n        this._cartItems.next([]);\n      }\n    }\n  }\n\n  // Mtodos para abrir/cerrar el carrito\n  openCart(): void {\n    console.log('CartService.openCart: Abriendo carrito...');\n    \n    // Establecer el estado\n    this._isCartOpen.next(true);\n    this.isCartOpen = true;\n    \n    // Manipular el DOM directamente para asegurar visibilidad\n    setTimeout(() => {\n      // Aadir clase a body\n      document.body.classList.add('cart-open');\n      \n      // Obtener referencias a los elementos del carrito\n      const cartModal = document.querySelector('.cart-modal') as HTMLElement;\n      const cartPopup = document.querySelector('.cart-popup') as HTMLElement;\n      const cartOverlay = document.querySelector('.cart-overlay') as HTMLElement;\n      \n      // Aplicar clases active\n      if (cartModal) {\n        cartModal.classList.add('active');\n        console.log('CartService: Aadida clase active a .cart-modal');\n      } else {\n        console.warn('CartService: No se encontr elemento .cart-modal');\n      }\n      \n      if (cartPopup) {\n        cartPopup.classList.add('active');\n        // Asegurar visibilidad con estilos inline\n        cartPopup.style.display = 'flex';\n        cartPopup.style.transform = 'translateX(0)';\n        console.log('CartService: Aadida clase active a .cart-popup');\n      } else {\n        console.warn('CartService: No se encontr elemento .cart-popup');\n      }\n      \n      if (cartOverlay) {\n        cartOverlay.classList.add('active');\n        // Asegurar visibilidad con estilos inline\n        cartOverlay.style.display = 'block';\n        console.log('CartService: Aadida clase active a .cart-overlay');\n      } else {\n        console.warn('CartService: No se encontr elemento .cart-overlay');\n      }\n      \n      // Truco fallback adicional para estilos problemticos\n      const styleEl = document.createElement('style');\n      styleEl.id = 'cart-force-styles';\n      styleEl.innerHTML = `\n        .cart-popup.active {\n          display: flex !important;\n          transform: translateX(0) !important;\n          opacity: 1 !important;\n          visibility: visible !important;\n        }\n        .cart-overlay.active {\n          display: block !important;\n          opacity: 1 !important;\n        }\n      `;\n      // Eliminar si ya existe\n      const existingStyle = document.getElementById('cart-force-styles');\n      if (existingStyle) {\n        existingStyle.remove();\n      }\n      document.head.appendChild(styleEl);\n      \n      console.log('CartService.openCart: Carrito abierto y visible');\n    }, 0);\n  }\n\n  closeCart(): void {\n    console.log('CartService.closeCart: Cerrando carrito...');\n    \n    // Establecer el estado\n    this._isCartOpen.next(false);\n    this.isCartOpen = false;\n    \n    // Manipular el DOM directamente para asegurar ocultamiento\n    setTimeout(() => {\n      // Quitar clase del body\n      document.body.classList.remove('cart-open');\n      \n      // Obtener referencias a los elementos del carrito\n      const cartModal = document.querySelector('.cart-modal') as HTMLElement;\n      const cartPopup = document.querySelector('.cart-popup') as HTMLElement;\n      const cartOverlay = document.querySelector('.cart-overlay') as HTMLElement;\n      \n      // Quitar clases active\n      if (cartModal) {\n        cartModal.classList.remove('active');\n      }\n      \n      if (cartPopup) {\n        cartPopup.classList.remove('active');\n        // Opcional: resetear el transform para que la prxima apertura tenga animacin\n        setTimeout(() => {\n          if (!this.isCartOpen) { // Verificamos que no se haya abierto de nuevo\n            cartPopup.style.transform = 'translateX(100%)';\n          }\n        }, 300); // Esperamos a que termine la transicin\n      }\n      \n      if (cartOverlay) {\n        cartOverlay.classList.remove('active');\n      }\n      \n      console.log('CartService.closeCart: Carrito cerrado correctamente');\n    }, 0);\n  }\n\n  // Mtodo para alternar la visibilidad del carrito\n  toggleCart(): void {\n    if (this.isCartOpen) {\n      this.closeCart();\n    } else {\n      this.openCart();\n    }\n  }\n\n  // Mtodo compatible con la nueva implementacin\n  setCartVisibility(isVisible: boolean): void {\n    if (isVisible) {\n      this.openCart();\n    } else {\n      this.closeCart();\n    }\n  }\n\n  // Guardar carrito en localStorage\n  private saveCart(items: CartItem[]): void {\n    // Asegurar que cada item tenga quantity como alias de cantidad\n    const itemsWithQuantity = items.map(item => ({\n      ...item,\n      quantity: item.cantidad\n    }));\n    \n    this._cartItems.next(itemsWithQuantity);\n    localStorage.setItem('cart', JSON.stringify(itemsWithQuantity));\n  }\n\n  // Obtener elementos del carrito actual\n  getCartItems(): CartItem[] {\n    return this._cartItems.getValue();\n  }\n\n  // Aadir producto al carrito\n  addToCart(\n    product: Product,\n    quantity: number = 1,\n    color?: string,\n    size?: string\n  ): void {\n    const currentItems = this.getCartItems();\n  \n    // Buscar si el producto ya est en el carrito con las mismas opciones\n    const existingItemIndex = currentItems.findIndex(\n      item =>\n        item.producto?.id === product.id &&\n        item.color === color &&\n        item.talla === size\n    );\n  \n    if (existingItemIndex !== -1) {\n      // Si ya existe, incrementamos la cantidad\n      const updatedItems = [...currentItems];\n      updatedItems[existingItemIndex].cantidad += quantity;\n      updatedItems[existingItemIndex].quantity = updatedItems[existingItemIndex].cantidad;\n      this._cartItems.next(updatedItems);\n    } else {\n      // Si no existe, aadimos un nuevo item\n      const newItem: CartItem = {\n        id: product.id || Date.now(),\n        producto: product, // Guardar el producto completo\n        cantidad: quantity,\n        quantity: quantity,\n        color: color,\n        talla: size,\n        precio: product.precio,\n        nombre: product.nombre,\n        // Esta lnea es opcional ahora que usamos producto\n        imagen: `assets/images/${product.carpetaimg}/${product.imagen}`\n      };\n      this._cartItems.next([...currentItems, newItem]);\n    }\n  \n    // Guardar en localStorage\n    this.saveCart(this.getCartItems());\n    \n    // Abrir el carrito automticamente al aadir producto\n    // this.openCart();\n  }\n\n  // Actualizar cantidad de un item\n  updateQuantity(itemId: number, quantity: number): void {\n    if (quantity <= 0) {\n      this.removeItem(itemId);\n      return;\n    }\n\n    const currentItems = this.getCartItems();\n    const updatedItems = currentItems.map(item =>\n      item.id === itemId ? { ...item, cantidad: quantity, quantity: quantity } : item\n    );\n\n    this._cartItems.next(updatedItems);\n    this.saveCart(updatedItems);\n  }\n\n  // Para compatibilidad con cdigo existente\n  updateItemQuantity(\n    itemId: number,\n    color: string,\n    quantity: number\n  ): void {\n    if (quantity <= 0) {\n      this.removeItem(itemId, color);\n      return;\n    }\n\n    const currentItems = this.getCartItems();\n    const updatedItems = currentItems.map(item => {\n      if (item.id === itemId && item.color === color) {\n        return { ...item, cantidad: quantity, quantity: quantity };\n      }\n      return item;\n    });\n\n    this._cartItems.next(updatedItems);\n    this.saveCart(updatedItems);\n  }\n\n  // Eliminar un item del carrito\n  removeItem(itemId: number, color?: string): void {\n    const currentItems = this.getCartItems();\n    let updatedItems;\n\n    if (color) {\n      // Si se especifica el color, filtramos por ID y color\n      updatedItems = currentItems.filter(\n        item => !(item.id === itemId && item.color === color)\n      );\n    } else {\n      // Si no se especifica color, filtramos solo por ID\n      updatedItems = currentItems.filter(item => item.id !== itemId);\n    }\n\n    this._cartItems.next(updatedItems);\n    this.saveCart(updatedItems);\n    \n    // IMPORTANTE: Comentado para evitar el cierre automtico del carrito\n    // Ahora dejamos que el componente decida cundo cerrar el carrito\n    // if (updatedItems.length === 0) {\n    //   this.closeCart();\n    // }\n  }\n\n  // Vaciar el carrito\n  clearCart(): void {\n    this._cartItems.next([]);\n    localStorage.removeItem('cart');\n    \n    // Cerrar el carrito al vaciarlo\n    this.closeCart();\n  }\n\n  // Calcular el total del carrito\n  getTotal(): number {\n    return this.getCartItems().reduce(\n      (total: number, item) => total + item.precio * item.cantidad,\n      0\n    );\n  }\n\n  // Alias para getTotal (para compatibilidad)\n  getCartTotal(): number {\n    return this.getTotal();\n  }\n\n  // Obtener el nmero de items en el carrito\n  getItemCount(): number {\n    return this.getCartItems().reduce((count, item) => count + item.cantidad, 0);\n  }\n}","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, throwError, of } from 'rxjs';\nimport { catchError, tap, map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport { Category } from '../models/category';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CategoryService {\n  // Corregido: Usando la ruta correcta\n  private apiUrl = `${environment.apiUrl}/categorias`;\n  \n  // Cache para almacenar categoras\n  private categoriesCache: Category[] | null = null;\n  private categoryCache: { [key: number]: Category } = {};\n\n  constructor(private http: HttpClient) { }\n\n  // Obtener todas las categoras\n  getCategories(): Observable<Category[]> {\n    // Si ya tenemos las categoras en cach, las devolvemos directamente\n    if (this.categoriesCache) {\n      console.log('Devolviendo categoras desde cach');\n      return of(this.categoriesCache);\n    }\n    \n    console.log('Solicitando categoras desde:', this.apiUrl);\n    return this.http.get<Category[]>(this.apiUrl).pipe(\n      tap(categories => {\n        console.log('Categoras obtenidas del servidor:', categories);\n        // Guardar en cach para futuras solicitudes\n        this.categoriesCache = categories;\n      }),\n      catchError(error => this.handleError(error))\n    );\n  }\n\n  // Obtener una categora especfica por ID\n  getCategory(id: number): Observable<Category> {\n    // Si ya tenemos esta categora en cach, la devolvemos directamente\n    if (this.categoryCache[id]) {\n      console.log(`Devolviendo categora ${id} desde cach`);\n      return of(this.categoryCache[id]);\n    }\n    \n    // Si tenemos todas las categoras en cach, buscamos la que necesitamos\n    if (this.categoriesCache) {\n      const category = this.categoriesCache.find(c => c.id === id);\n      if (category) {\n        console.log(`Categora ${id} encontrada en el cach general`);\n        this.categoryCache[id] = category; // Guardar en cach individual\n        return of(category);\n      }\n    }\n    \n    // Si no est en cach, la solicitamos al servidor\n    console.log(`Solicitando categora ${id} desde: ${this.apiUrl}/${id}`);\n    return this.http.get<Category>(`${this.apiUrl}/${id}`).pipe(\n      tap(category => {\n        console.log(`Categora ${id} obtenida del servidor:`, category);\n        // Guardar en cach para futuras solicitudes\n        this.categoryCache[id] = category;\n      }),\n      catchError(error => this.handleError(error))\n    );\n  }\n\n  // Obtener subcategoras de una categora especfica\n  getSubcategories(parentId: number): Observable<Category[]> {\n    // Si ya tenemos todas las categoras en cach, filtramos las subcategoras\n    if (this.categoriesCache) {\n      const subcategories = this.categoriesCache.filter(c => c.padre === parentId);\n      console.log(`Subcategoras de ${parentId} obtenidas de cach:`, subcategories);\n      return of(subcategories);\n    }\n    \n    // Si no tenemos el cach, obtenemos todas las categoras y luego filtramos\n    return this.getCategories().pipe(\n      map(categories => {\n        const subcategories = categories.filter(c => c.padre === parentId);\n        console.log(`Subcategoras de ${parentId}:`, subcategories);\n        return subcategories;\n      })\n    );\n  }\n\n  // Aadir una nueva categora\n  addCategory(category: Category): Observable<Category> {\n    return this.http.post<Category>(this.apiUrl, category).pipe(\n      tap(newCategory => {\n        console.log('Nueva categora aadida:', newCategory);\n        // Invalidar cach para que se recarguen los datos\n        this.clearCache();\n      }),\n      catchError(error => this.handleError(error))\n    );\n  }\n\n  // Actualizar una categora existente\n  updateCategory(id: number, category: Partial<Category>): Observable<Category> {\n    return this.http.put<Category>(`${this.apiUrl}/${id}`, category).pipe(\n      tap(updatedCategory => {\n        console.log(`Categora ${id} actualizada:`, updatedCategory);\n        // Invalidar cach para que se recarguen los datos\n        this.clearCache();\n      }),\n      catchError(error => this.handleError(error))\n    );\n  }\n\n  // Eliminar una categora\n  deleteCategory(id: number): Observable<any> {\n    return this.http.delete(`${this.apiUrl}/${id}`).pipe(\n      tap(() => {\n        console.log(`Categora ${id} eliminada`);\n        // Invalidar cach para que se recarguen los datos\n        this.clearCache();\n      }),\n      catchError(error => this.handleError(error))\n    );\n  }\n\n  // Limpiar cach\n  clearCache(): void {\n    this.categoriesCache = null;\n    this.categoryCache = {};\n    console.log('Cach de categoras limpiado');\n  }\n\n  // Mtodo para manejar errores que retorna un Observable\n  private handleError(error: any): Observable<never> {\n    console.error('Error en CategoryService:', error);\n    return throwError(() => error);\n  }\n}","// login-popup.service.ts\n\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n//  Interface para el estado del popup\nexport interface LoginPopupState {\n  isOpen: boolean;\n  returnUrl: string;\n  fromCheckout: boolean;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoginPopupService {\n  //  BehaviorSubject privado con estado inicial\n  private loginPopupStateSubject = new BehaviorSubject<LoginPopupState>({\n    isOpen: false,\n    returnUrl: '',\n    fromCheckout: false\n  });\n\n  //  Observable pblico para que los componentes se suscriban\n  public loginPopupState$: Observable<LoginPopupState> = this.loginPopupStateSubject.asObservable();\n\n  constructor() {\n    console.log(' LoginPopupService inicializado');\n  }\n\n  /**\n   * Abrir el popup de login\n   */\n  open(returnUrl: string = '', fromCheckout: boolean = false): void {\n    console.log(' LoginPopupService: Abriendo popup', { returnUrl, fromCheckout });\n    this.loginPopupStateSubject.next({\n      isOpen: true,\n      returnUrl,\n      fromCheckout\n    });\n  }\n\n  /**\n   * Abrir desde checkout (mtodo especfico)\n   */\n  openForCheckout(returnUrl: string = ''): void {\n    console.log(' LoginPopupService: Abriendo desde checkout');\n    this.open(returnUrl, true);\n  }\n\n  /**\n   * Cerrar el popup de login\n   */\n  close(): void {\n    console.log(' LoginPopupService: Cerrando popup');\n    this.loginPopupStateSubject.next({\n      isOpen: false,\n      returnUrl: '',\n      fromCheckout: false\n    });\n  }\n\n  /**\n   * Obtener el estado actual\n   */\n  getCurrentState(): LoginPopupState {\n    return this.loginPopupStateSubject.value;\n  }\n}","// src/app/services/order.service.ts - VERSIN CORREGIDA\n\nimport { Injectable } from '@angular/core'\nimport {\n  HttpClient,\n  HttpHeaders,\n  HttpErrorResponse\n} from '@angular/common/http'\nimport { Observable, throwError } from 'rxjs'\nimport { catchError, map } from 'rxjs/operators'\nimport { environment } from '../../environments/environment'\nimport { Order, OrderBackend, OrderDetail, OrderUtils } from '../models/order'\nimport { AuthService } from './auth.service'\nimport { OrderLine } from '../models/order' // Ajusta la ruta si tu modelo est en otra carpeta\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class OrderService {\n  private apiUrl = `${environment.apiUrl}/pedidos`\n\n  constructor (private http: HttpClient, private authService: AuthService) {\n    console.log(' OrderService inicializado')\n    console.log(' API URL:', this.apiUrl)\n  }\n\n  /**\n   *  Mtodo privado para obtener headers con autenticacin JWT\n   */\n  private getAuthHeaders (): HttpHeaders {\n    const token = this.authService.getToken()\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`\n    })\n\n    console.log(' Headers de autenticacin creados:', {\n      hasToken: !!token,\n      tokenPreview: token ? token.substring(0, 20) + '...' : 'No token'\n    })\n\n    return headers\n  }\n\n  /**\n   *  Verificar si el usuario est autenticado\n   */\n  private checkAuthentication (): boolean {\n    if (!this.authService.isLoggedIn()) {\n      console.error(' Usuario no autenticado')\n      throw new Error('Usuario no autenticado. Por favor, inicia sesin.')\n    }\n    console.log(' Usuario autenticado correctamente')\n    return true\n  }\n\n  /**\n   *  CORREGIDO: Obtener todos los pedidos de un usuario especfico por su ID\n   */\n  getOrders ({ userId }: { userId: number }): Observable<Order[]> {\n    console.log(' Obteniendo pedidos para usuario:', userId)\n    this.checkAuthentication()\n    const headers = this.getAuthHeaders()\n\n    return this.http\n      .get<any>(`${this.apiUrl}/user/${userId}`, { headers })\n      .pipe(\n        map(response => {\n          console.log(' Respuesta del backend (getOrders):', response)\n\n          //  MANEJO DE DIFERENTES FORMATOS DE RESPUESTA\n          let ordersBackend: OrderBackend[]\n\n          if (Array.isArray(response)) {\n            // El backend devuelve directamente un array\n            ordersBackend = response\n          } else if (response && Array.isArray(response.data)) {\n            // El backend devuelve { data: [...] }\n            ordersBackend = response.data\n          } else if (response && Array.isArray(response.pedidos)) {\n            // El backend devuelve { pedidos: [...] }\n            ordersBackend = response.pedidos\n          } else {\n            // No hay pedidos o formato desconocido\n            console.warn(\n              ' Formato de respuesta inesperado o sin pedidos:',\n              response\n            )\n            return []\n          }\n\n          console.log(` Se encontraron ${ordersBackend.length} pedidos`)\n\n          // Transformar cada pedido del formato backend al frontend\n          return ordersBackend.map(orderBackend =>\n            OrderUtils.fromBackendFormat(orderBackend)\n          )\n        }),\n        catchError(this.handleError('obtener pedidos'))\n      )\n  }\n\n  /**\n   *  Obtener un pedido especfico por su ID\n   */\n  getOrder (id: number): Observable<OrderDetail> {\n    console.log(' Obteniendo pedido con ID:', id)\n    this.checkAuthentication()\n    const headers = this.getAuthHeaders()\n\n    return this.http\n      .get<OrderDetail>(`${this.apiUrl}/${id}`, { headers })\n      .pipe(catchError(this.handleError('obtener pedido')))\n  }\n\n  /**\n   *  Crear un nuevo pedido (VERSIN CORREGIDA)\n   */\n  createOrder (order: Order): Observable<Order> {\n    console.log(' Creando nuevo pedido:', order)\n\n    // Verificar autenticacin\n    this.checkAuthentication()\n    const currentUser = this.authService.currentUserValue\n\n    if (!currentUser || !currentUser.id) {\n      console.error(' No hay usuario actual disponible o sin ID')\n      throw new Error('Usuario no autenticado o sin ID vlido')\n    }\n\n    //  CRTICO: Asegurar que userId est presente\n    const userId = order.usuario_id || currentUser.id\n\n    console.log(' Usuario ID final:', userId)\n\n    //  Validar el pedido antes de enviarlo\n    const validation = OrderUtils.validateOrder(order)\n    if (!validation.valid) {\n      console.error(' Pedido invlido:', validation.errors)\n      throw new Error(`Pedido invlido: ${validation.errors.join(', ')}`)\n    }\n\n    //  Preparar datos para el backend con verificacin explcita\n    const orderBackendData = {\n      iduser: userId,\n      fecha: new Date().toISOString().split('T')[0],\n      total: Number(order.total.toFixed(2)),\n      // CRTICO: enva las lneas bajo la clave 'lineas'\n      lineas: order.lineas?.map(line => ({\n        idprod: line.idprod,\n        color: line.color || 'Estndar',\n        cant: line.cantidad,\n        nombre: line.nombre || '',\n        precio: line.precio !== undefined ? line.precio : line.product.precio\n      })) || []\n    };\n\n    //  VERIFICACIN ADICIONAL antes de enviar\n    if (!orderBackendData.iduser || orderBackendData.iduser <= 0) {\n      console.error(\n        ' CRTICO: iduser invlido antes de enviar:',\n        orderBackendData\n      )\n      throw new Error('ID de usuario invlido')\n    }\n\n    console.log(\n      ' Datos finales a enviar al backend:',\n      JSON.stringify(orderBackendData, null, 2)\n    )\n\n    const headers = this.getAuthHeaders()\n\n    //  Realizar peticin HTTP con manejo de respuesta\n    console.log(\"Datos finales a enviar al backend\", JSON.stringify(orderBackendData, null, 2));\n\n    return this.http.post(this.apiUrl, orderBackendData, { headers }).pipe(\n      map((response:any) => {\n        console.log(\n          ' Respuesta completa del backend (createOrder):',\n          response\n        )\n\n        //  MANEJO DE DIFERENTES FORMATOS DE RESPUESTA\n        let orderBackend: OrderBackend\n\n        // EXTRA CRTICO - slo el pedido!\n        if (response.data && response.data.pedido) {\n          orderBackend = response.data.pedido //  PEDIDO DIRECTO\n        } else if (response.pedido) {\n          orderBackend = response.pedido\n        } else if (response.id) {\n          orderBackend = response\n        } else {\n          orderBackend = response\n        }\n\n        console.log(' OrderBackend extrado:', orderBackend)\n        // Transformar al formato frontend\n        const orderFrontend = OrderUtils.fromBackendFormat(orderBackend)\n\n        console.log(' Order Frontend (con ID):', orderFrontend)\n        console.log(' NMERO DE PEDIDO:', orderFrontend.id)\n\n        return orderFrontend //  DEVUELVE SOLO EL PEDIDO\n      }),\n      catchError(this.handleError('crear pedido'))\n    )\n  }\n  /**\n   *  Obtener pedidos del usuario actual\n   */\n  getUserOrders (): Observable<Order[]> {\n    console.log(' Obteniendo pedidos del usuario actual')\n    const currentUser = this.authService.currentUserValue\n    if (!currentUser || !currentUser.id) {\n      throw new Error('Usuario no autenticado o sin ID')\n    }\n\n    return this.getOrders({ userId: currentUser.id })\n  }\n\n  /**\n   *  Alias para getOrder (mejor nombre)\n   */\n  getOrderById (orderId: number): Observable<OrderDetail> {\n    return this.getOrder(orderId)\n  }\n\n  /**\n   *  Cancelar un pedido\n   */\n  cancelOrder (orderId: number): Observable<any> {\n    console.log(' Cancelando pedido:', orderId)\n    this.checkAuthentication()\n    const headers = this.getAuthHeaders()\n\n    return this.http\n      .patch(`${this.apiUrl}/${orderId}/cancel`, {}, { headers })\n      .pipe(catchError(this.handleError('cancelar pedido')))\n  }\n\n  /**\n   *  Actualizar estado de un pedido (admin)\n   */\n  updateOrderStatus (orderId: number, status: string): Observable<any> {\n    console.log(' Actualizando estado del pedido:', orderId, 'a:', status)\n    this.checkAuthentication()\n    const headers = this.getAuthHeaders()\n\n    return this.http\n      .patch(`${this.apiUrl}/${orderId}/status`, { status }, { headers })\n      .pipe(catchError(this.handleError('actualizar estado del pedido')))\n  }\n\n  /**\n   *  Obtener resumen de pedidos del usuario\n   */\n  getOrdersSummary (): Observable<any> {\n    console.log(' Obteniendo resumen de pedidos del usuario actual')\n    this.checkAuthentication()\n    const headers = this.getAuthHeaders()\n\n    return this.http\n      .get(`${this.apiUrl}/summary`, { headers })\n      .pipe(catchError(this.handleError('obtener resumen de pedidos')))\n  }\n\n  /**\n   *  Mtodo mejorado para manejo de errores\n   */\n  private handleError (operation = 'operation') {\n    return (error: HttpErrorResponse): Observable<never> => {\n      console.error(` Error en ${operation}:`, error)\n\n      let userMessage = 'Ha ocurrido un error inesperado'\n\n      if (error.error instanceof ErrorEvent) {\n        // Error del lado del cliente\n        console.error(' Error del cliente:', error.error.message)\n        userMessage = 'Error de conexin. Verifica tu internet.'\n      } else {\n        // Error del servidor\n        console.error(` Error del servidor ${error.status}:`, error.error)\n\n        switch (error.status) {\n          case 0:\n            userMessage =\n              'No se puede conectar al servidor. Est el backend ejecutndose?'\n            console.error(' CORS o servidor no accesible en:', this.apiUrl)\n            break\n          case 401:\n            userMessage =\n              'Tu sesin ha expirado. Por favor, inicia sesin nuevamente.'\n            this.authService.logout()\n            break\n          case 403:\n            userMessage = 'No tienes permisos para realizar esta operacin.'\n            break\n          case 400:\n            userMessage =\n              error.error?.message || 'Datos invlidos enviados al servidor.'\n            break\n          case 404:\n            userMessage =\n              'Recurso no encontrado. Puede que el pedido no exista.'\n            break\n          case 422:\n            userMessage = 'Error de validacin en los datos enviados.'\n            break\n          case 500:\n            userMessage = 'Error interno del servidor. Intntalo ms tarde.'\n            break\n          default:\n            userMessage = `Error del servidor: ${error.status}. ${\n              error.error?.message || ''\n            }`\n        }\n      }\n\n      console.error(' Mensaje para el usuario:', userMessage)\n\n      const clientError = new Error(userMessage)\n      ;(clientError as any).originalError = error\n      ;(clientError as any).status = error.status\n\n      return throwError(() => clientError)\n    }\n  }\n\n  /**\n   *  Mtodo de utilidad para debug\n   */\n  debug (): void {\n    console.log(' OrderService Debug Info:', {\n      apiUrl: this.apiUrl,\n      isLoggedIn: this.authService.isLoggedIn(),\n      currentUser: this.authService.currentUserValue,\n      hasToken: !!this.authService.getToken()\n    })\n  }\n\n  // Aade esto en la clase OrderService\n\n  /**\n   * Obtener las lneas de un pedido concreto por su ID\n   */\n  getOrderLines (pedidoId: number): Observable<OrderLine[]> {\n    const headers = this.getAuthHeaders()\n    return this.http.get<OrderLine[]>(`${this.apiUrl}/${pedidoId}/lineas`, {\n      headers\n    })\n  }\n\n  /**\n   *  Enviar albarn por email\n   */\n  enviarAlbaranPorEmail (\n    pedido: any,\n    usuario: any,\n    pdfBase64: string\n  ): Observable<any> {\n    this.checkAuthentication()\n    const headers = this.getAuthHeaders()\n    return this.http\n      .post(\n        `${this.apiUrl}/enviar-albaran-email`,\n        { pedido, usuario, pdfBase64 },\n        { headers }\n      )\n      .pipe(catchError(this.handleError('enviar albarn por email')))\n  }\n}\n","// ============================================\n// PDF SERVICE - SOLO PARA FRONTEND (ANGULAR)\n// src/app/services/pdf.service.ts\n// ============================================\n\nimport { Injectable } from '@angular/core';\nimport jsPDF from 'jspdf';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PdfService {\n  constructor() { }\n\n  /** MTODO AUXILIAR: Agregar pie de pgina */\n  private agregarPieDePagina(pdf: jsPDF, numeroPagina: number): void {\n    const pageWidth = pdf.internal.pageSize.getWidth();\n    const pageHeight = pdf.internal.pageSize.getHeight();\n    const yPosition = pageHeight - 20;\n\n    pdf.setFontSize(8);\n    pdf.setTextColor(150, 150, 150);\n    pdf.text('Este documento fue generado automticamente', 20, yPosition);\n    pdf.text(`Pgina ${numeroPagina}`, pageWidth - 30, yPosition);\n  }\n\n  /** MTODO AUXILIAR: Agregar encabezado de tabla */\n  private agregarEncabezadoTabla(pdf: jsPDF, yPosition: number): number {\n    const pageWidth = pdf.internal.pageSize.getWidth();\n    const lightGray: [number, number, number] = [242, 243, 244];\n\n    pdf.setFillColor(lightGray[0], lightGray[1], lightGray[2]);\n    pdf.rect(20, yPosition - 5, pageWidth - 40, 8, 'F');\n\n    pdf.setFontSize(9);\n    pdf.setTextColor(0, 0, 0);\n    pdf.setFont('helvetica', 'bold');\n    pdf.text('Producto', 25, yPosition);\n    pdf.text('Color', 120, yPosition);\n    pdf.text('Cantidad', 160, yPosition, { align: 'right' });\n    pdf.text('Precio', pageWidth - 25, yPosition, { align: 'right' });\n\n    pdf.setFont('helvetica', 'normal');\n    return yPosition + 10;\n  }\n\n  /** Genera un albarn PDF y lo retorna como Blob */\n  generarAlbaran(pedido: any, lineas: any[], usuario?: any): Promise<Blob> {\n    return new Promise((resolve, reject) => {\n      try {\n        const pdf = new jsPDF('p', 'mm', 'a4');\n        const pageWidth = pdf.internal.pageSize.getWidth();\n        const pageHeight = pdf.internal.pageSize.getHeight();\n        let yPosition = 20;\n        let numeroPagina = 1;\n        const primaryColor: [number, number, number] = [82, 102, 122];\n\n        // ========== ENCABEZADO ==========\n        pdf.setFillColor(primaryColor[0], primaryColor[1], primaryColor[2]);\n        pdf.rect(0, 0, pageWidth, 40, 'F');\n        pdf.setTextColor(255, 255, 255);\n        pdf.setFontSize(24);\n        pdf.text('ALBARN', 20, 25);\n        pdf.setFontSize(10);\n        pdf.text(`Ref: #${pedido.id}`, 20, 32);\n\n        // ========== INFORMACIN DEL COMPRADOR ==========\n        yPosition = 55;\n        if (usuario) {\n          pdf.setTextColor(0, 0, 0);\n          pdf.setFontSize(12);\n          pdf.text('Informacin del Comprador', 20, yPosition);\n          yPosition += 10;\n          pdf.setFontSize(10);\n          pdf.text(`Nombre: ${usuario.nombre || 'N/A'}`, 20, yPosition);\n          yPosition += 7;\n          pdf.text(`Email: ${usuario.email || 'N/A'}`, 20, yPosition);\n          yPosition += 7;\n          pdf.text(`Direccin: ${usuario.direccion || 'N/A'}`, 20, yPosition);\n          yPosition += 7;\n          pdf.text(`Ciudad: ${usuario.ciudad || 'N/A'} - CP: ${usuario.cp || 'N/A'}`, 20, yPosition);\n          yPosition += 15;\n        }\n\n        // ========== INFORMACIN DEL PEDIDO ==========\n        pdf.setTextColor(0, 0, 0);\n        pdf.setFontSize(12);\n        pdf.text('Informacin del Pedido', 20, yPosition);\n        yPosition += 10;\n        pdf.setFontSize(10);\n        pdf.text(`Fecha: ${this.formatearFecha(pedido.fecha)}`, 20, yPosition);\n        yPosition += 7;\n        pdf.text(`Referencia: #${pedido.id}`, 20, yPosition);\n        yPosition += 7;\n        pdf.text(`${pedido.total.toFixed(2)} `, 20, yPosition);  // <--- Cambio aqu\n\n        // ========== TABLA DE PRODUCTOS ==========\n        yPosition += 20;\n        pdf.setFontSize(11);\n        pdf.setFont('helvetica', 'bold');\n        pdf.text('Productos', 20, yPosition);\n        yPosition += 10;\n\n        yPosition = this.agregarEncabezadoTabla(pdf, yPosition);\n\n        // ========== FILAS DE PRODUCTOS ==========\n        pdf.setFont('helvetica', 'normal');\n        lineas.forEach((linea: any) => {\n          const nombre = linea.nombre || 'Sin nombre';\n          const color = linea.color || 'N/A';\n          const cantidadRaw = linea.cantidad !== undefined ? linea.cantidad : linea.cant;\n          const cantidad = parseInt(cantidadRaw) || 0;\n          const precioRaw = linea.precio !== undefined ? linea.precio : linea.product?.precio;\n          const precio = parseFloat(precioRaw) || 0;\n          const precioLinea = precio * cantidad;\n\n          if (yPosition > pageHeight - 40) {\n            this.agregarPieDePagina(pdf, numeroPagina);\n            pdf.addPage();\n            numeroPagina++;\n            yPosition = 20;\n            yPosition = this.agregarEncabezadoTabla(pdf, yPosition);\n          }\n\n          pdf.text(nombre, 25, yPosition);\n          pdf.text(color, 120, yPosition);\n          pdf.text(cantidad.toString(), 160, yPosition, { align: 'right' });\n          pdf.text(`${precioLinea.toFixed(2)} `, pageWidth - 25, yPosition, { align: 'right' }); // <--- Cambio aqu\n\n          yPosition += 8;\n        });\n\n        // ========== LNEA SEPARADORA Y TOTAL ==========\n        yPosition += 5;\n        pdf.setDrawColor(200, 200, 200);\n        pdf.line(20, yPosition, pageWidth - 20, yPosition);\n        yPosition += 10;\n        pdf.setFont('helvetica', 'bold');\n        pdf.setFontSize(12);\n        pdf.text('TOTAL:', 20, yPosition);\n        pdf.text(`${pedido.total.toFixed(2)} `, pageWidth - 21, yPosition, { align: 'right' }); // <--- Cambio aqu\n\n        this.agregarPieDePagina(pdf, numeroPagina);\n\n        const pdfBlob = pdf.output('blob');\n        resolve(pdfBlob);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  private formatearFecha(fecha: any): string {\n    if (!fecha) return '';\n    try {\n      const date = new Date(fecha);\n      return date.toLocaleDateString('es-ES', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric'\n      });\n    } catch (e) {\n      return '';\n    }\n  }\n}\n","import { Injectable } from '@angular/core'\nimport { HttpClient } from '@angular/common/http'\n// Importaciones correctas de RxJS\nimport { Observable, of } from 'rxjs'\nimport { BehaviorSubject } from 'rxjs'\nimport { catchError } from 'rxjs/operators'\nimport { map } from 'rxjs/operators'\nimport { Product } from '../models/product'\nimport { Category } from '../models/category'\nimport { environment } from '../../environments/environment'\nimport { ProductImageHelper } from '../helpers/product-image-helper'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProductService {\n  // Corregido: Usando la ruta correcta\n  private apiUrl = `${environment.apiUrl}/productos`\n  private categoryUrl = `${environment.apiUrl}/categorias`\n\n  // Subject para el popup de producto\n  // En product.service.ts\n\n  private selectedProductSubject = new BehaviorSubject<Product | null>(null)\n  public selectedProduct$ = this.selectedProductSubject.asObservable()\n\n  setSelectedProduct (product: Product) {\n    this.selectedProductSubject.next(product)\n  }\n\n  // Mtodo para limpiar el producto seleccionado\n  clearSelectedProduct (): void {\n    console.log('Limpiando producto seleccionado')\n    this.selectedProductSubject.next(null)\n  }\n\n  //  MAPEO ACTUALIZADO BASADO EN LA ESTRUCTURA REAL DE ASSETS\n  private readonly PRODUCT_COLORS_MAP: { [key: string]: string[] } = {\n    // ========== ANILLOS (dentro de piercing/) ==========\n    'anillo con corazn': ['dorado', 'negro', 'plateado'],\n    'anillo corazn': ['dorado', 'negro', 'plateado'],\n    'anillo con corazon': ['dorado', 'negro', 'plateado'],\n    'anillo corazon': ['dorado', 'negro', 'plateado'],\n\n    'anillo fino': ['azul', 'cobre', 'dorado', 'negro', 'multicolor'],\n    'anillo con bisagra': ['azul', 'cobre', 'dorado', 'negro', 'multicolor'],\n    'anillo bisagra': ['azul', 'cobre', 'dorado', 'negro', 'multicolor'],\n\n    'aro para nostril': ['azul', 'multicolor', 'negro'],\n    'aro nostril': ['azul', 'multicolor', 'negro'],\n\n    'segment ring': ['azul', 'dorado', 'multicolor', 'rosa'],\n\n    // ========== BANANAS (dentro de piercing/) ==========\n    'banana con rosa': ['azul', 'celeste', 'rojo', 'rosa', 'verde'],\n    'banana flor': ['azul', 'celeste', 'rojo', 'rosa', 'verde'],\n    'banana con flor': ['azul', 'celeste', 'rojo', 'rosa', 'verde'],\n\n    'banana con gema': [\n      'azul',\n      'morado',\n      'transparente',\n      'rojo',\n      'verde',\n      'trebol'\n    ],\n    'banana gema': [\n      'azul',\n      'morado',\n      'transparente',\n      'rojo',\n      'verde',\n      'trebol'\n    ],\n\n    'banana simple': ['dorado', 'plateado', 'multicolor'],\n    'banana para el ombligo': ['dorado', 'plateado', 'multicolor'],\n    'banana para ombligo': ['dorado', 'plateado', 'multicolor'],\n\n    // ========== BARBELLS (dentro de piercing/) ==========\n    'barbell con alas': ['plateado'],\n    'barbells alas': ['plateado'],\n    'barbell alas': ['plateado'],\n\n    'barbell flecha': ['dorado', 'negro', 'plateado'],\n    'barbells flecha': ['dorado', 'negro', 'plateado'],\n    'barbell con flecha': ['dorado', 'negro', 'plateado'],\n\n    'barbell largo': ['azul', 'cobre', 'dorado', 'mulicolor'],\n    'barbells largo': ['azul', 'cobre', 'dorado', 'mulicolor'],\n\n    // ========== CIRCULAR BARBELLS (dentro de piercing/) ==========\n    'circular barbell con flecha': ['dorado', 'cobrejpg', 'negro'],\n    'circular barbell flecha': ['dorado', 'cobrejpg', 'negro'],\n\n    'circular barbell con piedra': ['cristal', 'negro'],\n    'circular barbell piedra': ['cristal', 'negro'],\n\n    // ========== LABRETS (dentro de piercing/) ==========\n    'labret corazn': ['dorado', 'negro', 'plateado', 'rosa'],\n    'labret con corazn': ['dorado', 'negro', 'plateado', 'rosa'],\n    'labret corazon': ['dorado', 'negro', 'plateado', 'rosa'],\n\n    'labret simple': ['cobre', 'dorado', 'negro', 'multicolor'],\n\n    'labret tringulo': ['dorado', 'negro', 'plateado', 'rosa'],\n    'labret triangulo': ['dorado', 'negro', 'plateado', 'rosa'],\n    'labret con tringulo': ['dorado', 'negro', 'plateado', 'rosa'],\n    'labret triangulos': ['dorado', 'negro', 'plateado', 'rosa'],\n\n    // ========== PLUGS ==========\n    'plug simple': ['amarillo', 'azul', 'morado', 'negro', 'blanco', 'verde'],\n    plug: ['amarillo', 'azul', 'morado', 'negro', 'blanco', 'verde'],\n\n    'plug doble': [\n      'amarillo',\n      'azul',\n      'beige',\n      'caoba',\n      'morado',\n      'rojo',\n      'verde'\n    ],\n    'plug dobles': [\n      'amarillo',\n      'azul',\n      'beige',\n      'caoba',\n      'morado',\n      'rojo',\n      'verde'\n    ],\n    'plug de silicona': [\n      'amarillo',\n      'azul',\n      'beige',\n      'morado',\n      'rojo',\n      'verde'\n    ],\n    'plug silicona': [\n      'amarillo',\n      'azul',\n      'beige',\n      'morado',\n      'rojo',\n      'verde'\n    ],\n\n    // ========== DILATADORES Y EXPANDERS ==========\n    'set de dilatadores': ['blanco', 'rosa', 'plateado', 'violeta'],\n    dilatadores: ['negro', 'rojo'],\n    dilatador: ['negro', 'rojo'],\n\n    'expander duo': ['celeste', 'dorado', 'verde'],\n    'expander con duo': ['celeste', 'dorado', 'verde'],\n\n    'expander medusa': ['negro', 'verde'],\n    'expander con medusa': ['negro', 'verde'],\n\n    // ========== TNELES (organizados por material) ==========\n    'tnel de acrlico': ['azul', 'blanco', 'rojo', 'negro', 'amarillo'],\n    'tunel de acrlico': ['azul', 'blanco', 'rojo', 'negro', 'amarillo'],\n    'tnel acrlico': ['azul', 'blanco', 'rojo', 'negro', 'amarillo'],\n    'tunel acrilico': ['azul', 'blanco', 'rojo', 'negro', 'amarillo'],\n\n    'tnel de metal': ['azul', 'cobre', 'dorado'],\n    'tunel de metal': ['azul', 'cobre', 'dorado'],\n    'tnel metal': ['azul', 'cobre', 'dorado'],\n    'tunel metal': ['azul', 'cobre', 'dorado'],\n\n    'tnel orfebre': ['dorado', 'plateado'],\n    'tunel orfebre': ['dorado', 'plateado'],\n    'tnel mandala': ['dorado', 'plateado'],\n    'tunel mandala': ['dorado', 'plateado'],\n\n    'tnel de silicona': ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n    'tunel de silicona': ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n    'tnel silicona': ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n    'tunel silicona': ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n\n    // ========== GENRICOS ==========\n    'tnel simple': ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n    'tunel simple': ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n    tnel: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n    tunel: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n\n    // ========== PIERCINGS GENERALES ==========\n    piercing: ['azul', 'cobre', 'dorado', 'negro', 'multicolor']\n  }\n\n  // Imagen por defect\n  defaultImage = 'assets/images/default.jpg'\n\n  constructor (private http: HttpClient) {}\n\n  // Mtodo para obtener todos los productos\n  getProducts (): Observable<Product[]> {\n    return this.http.get<Product[]>(this.apiUrl).pipe(\n      catchError(error => {\n        console.error('Error al obtener productos:', error)\n        return of([])\n      })\n    )\n  }\n\n  // Mtodo para obtener un producto especfico\n  getProduct (id: number): Observable<Product> {\n    const url = `${this.apiUrl}/${id}`\n    return this.http.get<Product>(url).pipe(\n      catchError(error => {\n        console.error(`Error al obtener producto ${id}:`, error)\n        throw error\n      })\n    )\n  }\n\n  // Mtodo pour obtener productos por categora\n  getProductsByCategory (categoryId: number): Observable<Product[]> {\n    const url = `${this.apiUrl}/categoria/${categoryId}`\n    console.log(\n      'Solicitando productos por categora:',\n      categoryId,\n      'desde:',\n      url\n    )\n    return this.http.get<Product[]>(url).pipe(\n      catchError(error => {\n        return of([])\n      })\n    )\n  }\n\n  // Mtodo para obtener una categora especfica\n  getCategory (id: number): Observable<Category> {\n    const url = `${this.categoryUrl}/${id}`\n    return this.http.get<Category>(url)\n  }\n\n  //  MTODO MEJORADO PARA OBTENER COLORES ESPECFICOS DEL PRODUCTO\n  getProductColors (productId: number): Observable<string[]> {\n    console.log(' Obteniendo colores para producto ID:', productId)\n\n    // Primero obtenemos el producto para conocer su nombre\n    return this.getProduct(productId).pipe(\n      map(product => {\n        if (!product || !product.nombre) {\n          console.warn(' Producto no encontrado o sin nombre')\n          return ['Estndar']\n        }\n\n        const productName = product.nombre.toLowerCase().trim()\n        console.log(' Buscando colores para:', productName)\n\n        // Usar ProductImageHelper para obtener colores consistentes\n        const availableColors =\n          ProductImageHelper.getAvailableColors(productName)\n\n        console.log(' Colores disponibles:', availableColors)\n        return availableColors.length > 0 ? availableColors : ['Estndar']\n      }),\n      catchError(error => {\n        console.error(' Error obteniendo colores del producto:', error)\n        return of(['Estndar'])\n      })\n    )\n  }\n\n  //  MTODO ALTERNATIVO PARA OBTENER COLORES (usando mapeo local como fallback)\n  private getAvailableColorsForProduct (productName: string): string[] {\n    // Normalizar el nombre del producto\n    const normalizedName = productName\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '') // Quitar tildes\n      .trim()\n\n    console.log(' Nombre normalizado:', normalizedName)\n\n    // PASO 1: Buscar coincidencias exactas primero\n    for (const [key, colors] of Object.entries(this.PRODUCT_COLORS_MAP)) {\n      const normalizedKey = key\n        .toLowerCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '')\n        .trim()\n\n      if (normalizedName === normalizedKey) {\n        console.log(\n          ` Coincidencia exacta: \"${key}\" -> [${colors.join(', ')}]`\n        )\n        return colors\n      }\n    }\n\n    // PASO 2: Estrategia de coincidencias parciales flexibles\n    const bestMatch = this.findBestPartialMatch(normalizedName)\n    if (bestMatch.length > 0) {\n      return bestMatch\n    }\n\n    // PASO 3: Buscar por palabras clave especficas\n    const keywordMatch = this.findByKeywords(normalizedName)\n    if (keywordMatch.length > 0) {\n      return keywordMatch\n    }\n\n    // PASO 4: Buscar por tipo de producto\n    const typeMatch = this.findByProductType(normalizedName)\n    if (typeMatch.length > 0) {\n      return typeMatch\n    }\n\n    // Si no hay coincidencias especficas, devolver colores por defecto\n    console.log(' No se encontraron colores especficos, usando por defecto')\n    return ['Estndar']\n  }\n\n  //  ESTRATEGIA 3: Coincidencias parciales flexibles mejoradas\n  private findBestPartialMatch (productName: string): string[] {\n    let bestMatch: { key: string; colors: string[]; score: number } = {\n      key: '',\n      colors: [],\n      score: 0\n    }\n\n    for (const [key, colors] of Object.entries(this.PRODUCT_COLORS_MAP)) {\n      const normalizedKey = key\n        .toLowerCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '')\n        .trim()\n\n      // Calcular puntuacin de similitud\n      const score = this.calculateSimilarityScore(productName, normalizedKey)\n\n      if (score > bestMatch.score && score > 0.6) {\n        // Umbral de similitud\n        bestMatch = { key, colors, score }\n      }\n    }\n\n    if (bestMatch.score > 0.6) {\n      console.log(\n        ` Mejor coincidencia parcial: \"${\n          bestMatch.key\n        }\" (score: ${bestMatch.score.toFixed(2)}) -> [${bestMatch.colors.join(\n          ', '\n        )}]`\n      )\n      return bestMatch.colors\n    }\n\n    return []\n  }\n\n  //  Calcular puntuacin de similitud entre dos strings\n  private calculateSimilarityScore (str1: string, str2: string): number {\n    const words1 = str1.split(' ').filter(w => w.length > 2) // Solo palabras de ms de 2 caracteres\n    const words2 = str2.split(' ').filter(w => w.length > 2)\n\n    if (words1.length === 0 || words2.length === 0) return 0\n\n    let matchCount = 0\n    let totalWords = Math.max(words1.length, words2.length)\n\n    // Contar palabras que coinciden exactamente\n    for (const word1 of words1) {\n      if (words2.includes(word1)) {\n        matchCount += 1\n      } else {\n        // Buscar coincidencias parciales (una palabra contiene a la otra)\n        for (const word2 of words2) {\n          if (word1.includes(word2) || word2.includes(word1)) {\n            matchCount += 0.7 // Puntuacin menor para coincidencias parciales\n            break\n          }\n        }\n      }\n    }\n\n    return matchCount / totalWords\n  }\n\n  //  Bsqueda por palabras clave especficas\n  private findByKeywords (productName: string): string[] {\n    const keywordMatches: { [key: string]: string[] } = {\n      bisagra: ['azul', 'cobre', 'dorado', 'negro', 'multicolor'],\n      corazon: ['dorado', 'negro', 'plateado', 'rosa'],\n      triangulo: ['dorado', 'negro', 'plateado', 'rosa'],\n      flecha: ['dorado', 'negro', 'plateado'],\n      alas: ['plateado'],\n      gema: ['azul', 'morado', 'transparente', 'rojo', 'verde'],\n      acrilico: ['azul', 'blanco', 'rojo', 'negro', 'amarillo'],\n      acrlico: ['azul', 'blanco', 'rojo', 'negro', 'amarillo'],\n      silicona: ['azul', 'blanco', 'rojo', 'rosa', 'negro', 'verde'],\n      metal: ['azul', 'cobre', 'dorado'],\n      orfebre: ['dorado', 'plateado'],\n      mandala: ['dorado', 'plateado'],\n      nostril: ['azul', 'multicolor', 'negro'],\n      ombligo: ['dorado', 'plateado', 'multicolor'],\n      piedra: ['cristal', 'negro'],\n      duo: ['celeste', 'dorado', 'verde'],\n      medusa: ['negro', 'verde'],\n      rosa: ['azul', 'celeste', 'rojo', 'rosa', 'verde'],\n      flor: ['azul', 'celeste', 'rojo', 'rosa', 'verde']\n    }\n\n    for (const [keyword, colors] of Object.entries(keywordMatches)) {\n      if (productName.includes(keyword)) {\n        console.log(` Keyword match: \"${keyword}\" -> [${colors.join(', ')}]`)\n        return colors\n      }\n    }\n\n    return []\n  }\n\n  //  Bsqueda por tipo de producto\n  private findByProductType (productName: string): string[] {\n    const typeMatches: { [key: string]: string[] } = {\n      anillo: ['azul', 'cobre', 'dorado', 'negro', 'multicolor'],\n      aro: ['azul', 'multicolor', 'negro'],\n      banana: ['azul', 'dorado', 'plateado', 'verde', 'rojo'],\n      barbell: ['azul', 'cobre', 'dorado', 'negro', 'plateado'],\n      labret: ['cobre', 'dorado', 'negro', 'plateado', 'rosa'],\n      plug: ['amarillo', 'azul', 'negro', 'blanco', 'verde'],\n      tunel: ['azul', 'blanco', 'dorado', 'plateado', 'rojo', 'verde'],\n      tnel: ['azul', 'blanco', 'dorado', 'plateado', 'rojo', 'verde'],\n      expander: ['celeste', 'dorado', 'negro', 'verde'],\n      dilatador: ['blanco', 'negro', 'rosa', 'rojo', 'plateado', 'violeta'],\n      piercing: ['azul', 'cobre', 'dorado', 'negro', 'multicolor']\n    }\n\n    for (const [type, colors] of Object.entries(typeMatches)) {\n      if (productName.includes(type)) {\n        console.log(` Type match: \"${type}\" -> [${colors.join(', ')}]`)\n        return colors\n      }\n    }\n\n    return []\n  }\n\n  // Mtodo para seleccionar un producto para el popup\n  selectProductForPopup (product: Product): void {\n    this.selectedProductSubject.next(product)\n  }\n\n  // Mtodo para cerrar el popup\n  closeProductPopup (): void {\n    this.selectedProductSubject.next(null)\n  }\n\n  // Mtodo para aadir un nuevo producto\n  addProduct (product: Product): Observable<Product> {\n    return this.http.post<Product>(this.apiUrl, product)\n  }\n\n  // Mtodo para subir imgenes de productos\n  uploadProductImages (productId: number, files: File[]): Observable<any> {\n    const formData = new FormData()\n    files.forEach((file, index) => {\n      formData.append('images', file, file.name)\n    })\n    return this.http.post<any>(`${this.apiUrl}/${productId}/images`, formData)\n  }\n\n  // Mtodo para actualizar un producto existente\n  updateProduct (productId: number, product: Product): Observable<Product> {\n    const url = `${this.apiUrl}/${productId}`\n    return this.http.put<Product>(url, product)\n  }\n\n  // Mtodo para eliminar un producto\n  deleteProduct (productId: number): Observable<any> {\n    const url = `${this.apiUrl}/${productId}`\n    return this.http.delete<any>(url)\n  }\n\n  // Mtodo para buscar productos\n  searchProducts (term: string): Observable<Product[]> {\n    const url = `${this.apiUrl}/search?q=${term}`\n    return this.http.get<Product[]>(url).pipe(\n      catchError(error => {\n        console.error(`Error al buscar productos con trmino \"${term}\":`, error)\n        return of([])\n      })\n    )\n  }\n\n  // Mtodo para obtener la ruta de la imagen del producto\n  getProductImageSrc (product: Product, selectedColor?: string): string {\n    return ProductImageHelper.getProductImageSrc(product, selectedColor)\n  }\n\n  // Mtodo para obtener productos destacados (para la pgina principal)\n  getFeaturedProducts (): Observable<Product[]> {\n    console.log('Solicitando productos destacados desde:', this.apiUrl)\n\n    return this.getProducts().pipe(\n      map(products => {\n        return products.slice(0, 8)\n      })\n    )\n  }\n\n  // Mtodo mejorado para manejar errores de carga de imgenes\n  handleImageError (event: Event): void {\n    const img = event.target as HTMLImageElement\n    const originalSrc = img.src\n    console.error(`Error al cargar imagen: ${originalSrc}`)\n\n    img.src = this.defaultImage\n    img.onerror = null\n  }\n}\n","// src/environments/environment.ts\nexport const environment = {\n  production: false,\n  apiUrl: 'http://localhost:3000/api' // Asegrate de que este puerto coincida con tu backend\n};","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\n\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":["RouterModule","AuthGuard","HomeComponent","CheckoutComponent","ProfileComponent","ProductListComponent","ProductDetailComponent","SearchResultsComponent","HistorialPedidosComponent","routes","path","component","data","title","redirectTo","pathMatch","isViewAll","canActivate","requiresAuth","AppRoutingModule","constructor","console","log","imports","forRoot","enableTracing","scrollPositionRestoration","anchorScrolling","onSameUrlNavigation","i1","exports","NavigationEnd","filter","AppComponent","router","loginPopupService","showLoginPopup","loginReturnUrl","loginFromCheckout","showRegistroPopup","ngOnInit","loginPopupState$","subscribe","state","isOpen","returnUrl","fromCheckout","events","pipe","event","window","scrollTo","onLoginPopupClose","close","onLoginSuccess","navigate","onSwitchToRegister","setTimeout","onCloseRegistroPopup","onRegistroSuccess","onSwitchToLogin","i0","directiveInject","Router","i2","LoginPopupService","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","element","elementStart","listener","AppComponent_Template_app_login_popup_closePopup_6_listener","AppComponent_Template_app_login_popup_loginSuccess_6_listener","$event","AppComponent_Template_app_login_popup_switchToRegistro_6_listener","elementEnd","AppComponent_Template_app_registro_popup_closePopup_7_listener","AppComponent_Template_app_registro_popup_registroSuccess_7_listener","AppComponent_Template_app_registro_popup_switchToLogin_7_listener","advance","property","BrowserModule","HttpClientModule","HTTP_INTERCEPTORS","FormsModule","ReactiveFormsModule","AuthInterceptor","ErrorInterceptor","NavbarComponent","FooterComponent","ProductPopupComponent","CartComponent","AdminComponent","CategoryManagerComponent","ProductManagerComponent","OrderLineComponent","BannerComponent","HeaderComponent","ImageUrlPipe","LoginPopupComponent","RegistroPopupComponent","PasswordConfirmModalComponent","PdfService","AppModule","bootstrap","provide","useClass","multi","declarations","AdminComponent_Template","text","Validators","cat_r6","id","ctx_r0","editMode","selectedCategoryId","textInterpolate1","nombre","CategoryManagerComponent_input_18_Template_input_click_0_listener","restoreView","_r8","ctx_r7","nextContext","resetView","cancelEdit","textInterpolate","ctx_r3","error","ctx_r4","success","CategoryManagerComponent_table_25_tr_8_Template_input_click_6_listener","restoredCtx","_r12","category_r10","$implicit","ctx_r11","editCategory","CategoryManagerComponent_table_25_tr_8_Template_input_click_8_listener","ctx_r13","deleteCategory","attribute","padre","ctx_r9","getParentName","template","CategoryManagerComponent_table_25_tr_8_Template","ctx_r5","categories","fb","categoryService","categoryForm","createForm","loadCategories","getCategories","next","alert","group","required","minLength","descripcion","tipo","onSubmit","valid","updateCategory","createCategory","Object","keys","controls","forEach","key","get","markAsTouched","categoryData","value","addCategory","createdCategory","category","setValue","updatedCategory","index","findIndex","c","resetForm","confirm","reset","parentId","parent","find","FormBuilder","CategoryService","CategoryManagerComponent_Template","CategoryManagerComponent_Template_form_ngSubmit_6_listener","CategoryManagerComponent_option_16_Template","CategoryManagerComponent_input_18_Template","CategoryManagerComponent_div_22_Template","CategoryManagerComponent_div_23_Template","CategoryManagerComponent_div_24_Template","CategoryManagerComponent_table_25_Template","loading","length","category_r3","category_r5","ProductManagerComponent_div_49_Template_form_ngSubmit_3_listener","_r7","ctx_r6","updateProduct","ProductManagerComponent_div_49_option_30_Template","ProductManagerComponent_div_49_Template_input_click_32_listener","ctx_r8","ctx_r1","editProductForm","ProductManagerComponent_tr_63_Template_input_click_8_listener","_r11","product_r9","ctx_r10","editProduct","ProductManagerComponent_tr_63_Template_input_click_10_listener","ctx_r12","deleteProduct","ctx_r2","formatPrice","precio","categoria_id","undefined","getCategoryName","productService","products","submitting","showEditForm","currentProductId","selectedFiles","previewUrls","newProductForm","min","stock","categoryId","loadProducts","getProducts","onFileSelect","input","target","files","Array","from","file","reader","FileReader","onload","e","push","result","readAsDataURL","addProduct","invalid","newProduct","createdProduct","uploadProductImages","product","productId","updatedProduct","price","Intl","NumberFormat","style","currency","format","ProductService","i3","ProductManagerComponent_Template","ProductManagerComponent_Template_form_ngSubmit_6_listener","ProductManagerComponent_option_33_Template","ProductManagerComponent_Template_input_change_45_listener","ProductManagerComponent_div_49_Template","ProductManagerComponent_tr_63_Template","BannerComponent_div_0_Template_button_click_1_listener","_r2","prevBanner","BannerComponent_div_0_Template_button_click_4_listener","nextBanner","bannerImages","currentBannerIndex","sanitizeUrl","loadBannerImages","startBannerRotation","ngOnDestroy","bannerInterval","clearInterval","setInterval","BannerComponent_Template","BannerComponent_div_0_Template","Swal","CartComponent_div_8_tr_17_Template_img_error_2_listener","_r6","handleImageError","CartComponent_div_8_tr_17_Template_button_click_9_listener","item_r4","decrementarCantidad","CartComponent_div_8_tr_17_Template_button_click_13_listener","incrementarCantidad","CartComponent_div_8_tr_17_Template_button_click_22_listener","eliminarItem","getImageSrc","color","cantidad","pipeBind2","CartComponent_div_8_tr_17_Template","CartComponent_div_8_Template_button_click_25_listener","procesarCompra","cartItems","total","CartComponent_ng_template_9_Template_button_click_5_listener","_r13","continuarComprando","cartService","authService","zone","renderer","orderLines","isRemoving","cartSubscription","cartVisibilitySubscription","handleOutsideClick","closest","isCartOpen","closeCart","addDOMObserver","items","map","item","producto","imagen","carpetaimg","convertCartItemsToOrderLines","Math","round","getCartTotal","fixPriceFormat","listenToCartVisibilityChanges","patchCartServiceCloseMethod","enhanceCartSize","script","createElement","text","appendChild","document","head","totalElement","querySelector","rawValue","parseFloat","toString","isNaN","textContent","toFixed","itemTotals","querySelectorAll","element","trim","replace","styleEl","innerHTML","ngAfterViewInit","unsubscribe","removeEventListener","customStyles","getElementById","remove","isCartOpenObservable","originalCloseMethod","call","orderLine","idpedido","idprod","cerrarCarrito","getProductImageSrc","updateItemQuantity","confirmRemoveItem","calcularTotal","checkout","fire","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","allowOutsideClick","allowEscapeKey","then","run","isConfirmed","itemsRemaining","removeItem","updateQuantity","line","newQuantity","currentUserValue","openForCheckout","CartService","AuthService","NgZone","i4","Renderer2","i5","CartComponent_Template","CartComponent_Template_div_click_1_listener","CartComponent_Template_button_click_6_listener","CartComponent_div_8_Template","CartComponent_ng_template_9_Template","templateRefExtractor","pureFunction1","_c0","_r1","CheckoutComponent_div_0_tr_48_Template_img_error_2_listener","CheckoutComponent_div_0_Template_button_click_2_listener","closeCheckout","CheckoutComponent_div_0_tr_48_Template","CheckoutComponent_div_0_Template_button_click_57_listener","placeOrder","CheckoutComponent_div_0_span_58_Template","CheckoutComponent_div_0_span_59_Template","currentUser","email","direccion","cp","ciudad","formBuilder","orderService","showOrder","showDelivery","showPayment","useUserDataDirectly","checkoutForm","pattern","telefono","body","overflow","username","warn","queryParams","hasCompleteUserData","JSON","stringify","userData","preprocessUserData","patchValue","updateValueAndValidity","errors","getFormErrors","values","addEventListener","handleEscapeKey","bind","user","control","productoObj","parse","shippingData","errorMessages","field","getErrorMessage","join","Number","cant","order","usuario_id","fecha","Date","toISOString","split","lineas","estado","createOrder","response","clearCart","mensajeExito","errorMessage","message","status","logout","goToDelivery","goToPayment","goToOrder","hasError","touched","requiredLength","convertOrderLinesToCartItems","findCartItemPrice","findCartItemImage","findCartItemProducto","i","OrderService","i6","CheckoutComponent_Template","CheckoutComponent_div_0_Template","HistorialPedidosComponent_div_4_div_1_div_15_button_2_Template_button_click_0_listener","_r10","pedido_r3","descargarAlbaran","linea_r11","HistorialPedidosComponent_div_4_div_1_div_15_button_2_Template","HistorialPedidosComponent_div_4_div_1_div_15_tr_15_Template","HistorialPedidosComponent_div_4_div_1_Template_div_click_1_listener","_r14","expanded","HistorialPedidosComponent_div_4_div_1_div_15_Template","HistorialPedidosComponent_div_4_div_1_Template","pedidos","pdfService","loadPedidos","subscription","getUserOrders","orders","sort","a","b","dateB","getTime","dateA","p","err","pedidoId","pedido","getOrderLines","generarYDescargarPDF","didOpen","showLoading","generarAlbaran","pdfBlob","url","URL","createObjectURL","link","href","download","click","removeChild","revokeObjectURL","timer","showConfirmButton","catch","HistorialPedidosComponent_Template","HistorialPedidosComponent_div_3_Template","HistorialPedidosComponent_div_4_Template","HomeComponent_div_4_div_2_Template_div_click_0_listener","product_r4","openProductPopup","HomeComponent_div_4_div_2_Template_img_error_1_listener","HomeComponent_div_4_div_1_Template","HomeComponent_div_4_div_2_Template","randomProducts","selectRandomProducts","productsCopy","numToSelect","randomIndex","floor","random","splice","preventDefault","stopPropagation","selectProductForPopup","HomeComponent_Template","HomeComponent_div_0_Template","HomeComponent_div_4_Template","EventEmitter","LoginPopupComponent_div_0_Template_div_click_0_listener","onOverlayClick","LoginPopupComponent_div_0_Template_div_keydown_0_listener","onKeyDown","LoginPopupComponent_div_0_Template_button_click_2_listener","cerrarPopup","LoginPopupComponent_div_0_Template_form_ngSubmit_8_listener","iniciarSesion","LoginPopupComponent_div_0_Template_input_ngModelChange_13_listener","usuario","LoginPopupComponent_div_0_Template_input_keypress_13_listener","onKeyPress","LoginPopupComponent_div_0_Template_input_ngModelChange_17_listener","contrasena","LoginPopupComponent_div_0_Template_input_keypress_17_listener","LoginPopupComponent_div_0_div_18_Template","LoginPopupComponent_div_0_span_20_Template","LoginPopupComponent_div_0_span_21_Template","LoginPopupComponent_div_0_Template_a_click_25_listener","ctx_r14","irARegistro","classProp","isVisible","isLoading","closePopup","loginSuccess","switchToRegistro","handleBodyScroll","ngOnChanges","emit","currentTarget","login","inputs","outputs","features","NgOnChangesFeature","LoginPopupComponent_Template","LoginPopupComponent_div_0_Template","pipeBind4","productPrice","removeLine","productImage","loadProductData","getProduct","removeOrderLine","incrementQuantity","decrementQuantity","onQuantityChange","parseInt","OrderLineComponent_Template","OrderLineComponent_Template_button_click_12_listener","OrderLineComponent_Template_input_change_14_listener","OrderLineComponent_Template_button_click_15_listener","OrderLineComponent_div_18_Template","OrderLineComponent_div_19_Template","OrderLineComponent_Template_button_click_21_listener","namespaceSVG","PasswordConfirmModalComponent_div_0_Template_div_click_0_listener","onCancel","PasswordConfirmModalComponent_div_0_Template_div_click_1_listener","namespaceHTML","PasswordConfirmModalComponent_div_0_Template_form_ngSubmit_27_listener","onConfirm","PasswordConfirmModalComponent_div_0_Template_input_ngModelChange_32_listener","password","PasswordConfirmModalComponent_div_0_Template_input_input_32_listener","PasswordConfirmModalComponent_div_0_Template_button_click_33_listener","togglePasswordVisibility","PasswordConfirmModalComponent_div_0__svg_svg_34_Template","PasswordConfirmModalComponent_div_0__svg_svg_35_Template","PasswordConfirmModalComponent_div_0_p_36_Template","PasswordConfirmModalComponent_div_0_Template_button_click_38_listener","PasswordConfirmModalComponent_div_0_span_41_Template","PasswordConfirmModalComponent_div_0_span_42_Template","getUserInitials","currentDateTime","propertyInterpolate","showPassword","confirmed","cancelled","updateDateTime","intervalId","now","options","year","month","day","hour","minute","second","hour12","toLocaleDateString","parts","toUpperCase","substring","onPasswordInput","open","focus","_this","_asyncToGenerator","toPromise","PasswordConfirmModalComponent_Template","PasswordConfirmModalComponent_div_0_Template","getImagePath","ProductDetailComponent_div_10_img_1_Template_img_click_0_listener","color_r4","changeColor","ProductDetailComponent_div_10_img_1_Template","colors","color_r8","ProductDetailComponent_div_16_Template_select_ngModelChange_3_listener","selectedColor","ProductDetailComponent_div_16_option_4_Template","route","sizes","selectedSize","quantity","showPopup","currentImageIndex","relatedProducts","params","loadProductDetails","loadProductColors","loadRelatedProducts","getProductColors","slice","defaultImage","colorCode","changeImage","selectSize","size","closeProductPopup","addToCart","ActivatedRoute","ProductDetailComponent_Template","ProductDetailComponent_Template_button_click_5_listener","ProductDetailComponent_img_9_Template","ProductDetailComponent_div_10_Template","ProductDetailComponent_div_16_Template","ProductDetailComponent_Template_button_click_21_listener","ProductDetailComponent_Template_input_ngModelChange_23_listener","ProductDetailComponent_Template_button_click_24_listener","ProductDetailComponent_Template_button_click_26_listener","currentCategory","ProductListComponent_div_2_p_3_Template","ProductListComponent_div_7_Template_div_click_0_listener","_r9","product_r7","ProductListComponent_div_7_Template_img_error_1_listener","sanitizer","checkRouteAndLoadProducts","setSelectedProduct","loadAllProducts","routeData","snapshot","loadCategoryDetails","loadProductsByCategory","loadFeaturedProducts","getCategory","getProductsByCategory","isArray","getFeaturedProducts","loadSomeProducts","img","originalSrc","src","onerror","DomSanitizer","ProductListComponent_Template","ProductListComponent_div_1_Template","ProductListComponent_div_2_Template","ProductListComponent_div_3_Template","ProductListComponent_div_4_Template","ProductListComponent_div_5_Template","ProductListComponent_div_7_Template","ProductImageHelper","getColorsMessage","color_r7","pipeBind1","ProductPopupComponent_ng_container_2_div_16_Template_select_ngModelChange_3_listener","onColorChange","ProductPopupComponent_ng_container_2_div_16_option_4_Template","availableColors","elementContainerStart","ProductPopupComponent_ng_container_2_Template_button_click_4_listener","ProductPopupComponent_ng_container_2_div_9_Template","ProductPopupComponent_ng_container_2_div_16_Template","ProductPopupComponent_ng_container_2_div_17_Template","ProductPopupComponent_ng_container_2_Template_button_click_22_listener","ProductPopupComponent_ng_container_2_Template_input_ngModelChange_24_listener","ProductPopupComponent_ng_container_2_Template_button_click_25_listener","ctx_r15","ProductPopupComponent_ng_container_2_Template_button_click_27_listener","ctx_r16","ProductPopupComponent_ng_container_2_span_28_Template","ProductPopupComponent_ng_container_2_span_29_Template","elementContainerEnd","currentProduct","hasMultipleColors","currentImageSrc","selectedProduct$","resetOptions","filteredColors","toLowerCase","includes","updateImageForSelectedColor","fallbackColors","getAvailableColors","productWithImage","imagenSeleccionada","clearSelectedProduct","ProductPopupComponent_Template","ProductPopupComponent_ng_container_2_Template","searchTerm","SearchResultsComponent_div_6_div_1_Template_div_click_0_listener","product_r6","SearchResultsComponent_div_6_div_1_Template_img_error_1_listener","SearchResultsComponent_div_6_div_1_Template","searchProducts","SearchResultsComponent_Template","SearchResultsComponent_h1_2_Template","SearchResultsComponent_h1_3_Template","SearchResultsComponent_div_4_Template","SearchResultsComponent_div_5_Template","SearchResultsComponent_div_6_Template","RegistroPopupComponent_div_0_div_19_span_1_Template","f","RegistroPopupComponent_div_0_div_27_span_1_Template","RegistroPopupComponent_div_0_div_27_span_2_Template","RegistroPopupComponent_div_0_div_36_span_1_Template","RegistroPopupComponent_div_0_div_42_span_1_Template","RegistroPopupComponent_div_0_div_42_span_2_Template","RegistroPopupComponent_div_0_div_51_span_1_Template","RegistroPopupComponent_div_0_div_57_span_1_Template","RegistroPopupComponent_div_0_div_62_span_1_Template","RegistroPopupComponent_div_0_div_62_span_2_Template","RegistroPopupComponent_div_0_Template_div_click_0_listener","_r20","ctx_r19","onClose","RegistroPopupComponent_div_0_Template_div_click_1_listener","RegistroPopupComponent_div_0_Template_button_click_7_listener","ctx_r22","RegistroPopupComponent_div_0_Template_form_ngSubmit_10_listener","ctx_r23","RegistroPopupComponent_div_0_div_19_Template","RegistroPopupComponent_div_0_Template_button_click_26_listener","ctx_r24","RegistroPopupComponent_div_0_div_27_Template","RegistroPopupComponent_div_0_div_36_Template","RegistroPopupComponent_div_0_div_42_Template","RegistroPopupComponent_div_0_Template_input_blur_50_listener","ctx_r25","autoCompleteCP","RegistroPopupComponent_div_0_div_51_Template","RegistroPopupComponent_div_0_Template_input_blur_56_listener","ctx_r26","RegistroPopupComponent_div_0_div_57_Template","RegistroPopupComponent_div_0_div_62_Template","RegistroPopupComponent_div_0_span_65_Template","RegistroPopupComponent_div_0_Template_a_click_69_listener","ctx_r27","switchToLoginModal","registerForm","submitted","http","registroSuccess","switchToLogin","apiKey","register","timerProgressBar","direccionCompleta","encodeURIComponent","resultado","results","components","address_components","postal","comp","types","long_name","HttpClient","RegistroPopupComponent_Template","RegistroPopupComponent_div_0_Template","currentYear","getFullYear","FooterComponent_Template","goToHome","HeaderComponent_Template","HeaderComponent_Template_h1_click_1_listener","Subscription","tmp_0_0","getDilatacionesCategory","getSubcategoryId","getPiercingsCategory","NavbarComponent_ng_container_15_Template_div_click_1_listener","onProfileClick","NavbarComponent_ng_container_15_Template_div_click_5_listener","NavbarComponent_ng_container_16_Template_div_click_1_listener","cartItemCount","isUserLoggedIn","userSubscription","cart$","cart","reduce","cartPopup","cartOverlay","classList","onCloseLoginPopup","mostrarRegistroPopup","name","normalizedSearchName","normalize","cat","normalizedCatName","toggleCartAndLog","toggleCart","getSubcategoriesForDilataciones","dilataciones","subcategories","getFilteredSubcategoriesForDilataciones","excludedNames","getFilteredSubcategoriesForPiercings","piercings","navigateToCategory","isAdmin","role","search","term","NavbarComponent_Template","NavbarComponent_li_5_Template","NavbarComponent_li_6_Template","NavbarComponent_Template_input_ngModelChange_12_listener","NavbarComponent_Template_input_keyup_enter_12_listener","NavbarComponent_Template_img_click_13_listener","NavbarComponent_ng_container_15_Template","NavbarComponent_ng_container_16_Template","NavbarComponent_Template_li_click_17_listener","NavbarComponent_p_19_Template","NavbarComponent_Template_app_login_popup_closePopup_21_listener","NavbarComponent_Template_app_login_popup_loginSuccess_21_listener","NavbarComponent_Template_app_login_popup_switchToRegistro_21_listener","NavbarComponent_Template_app_registro_popup_closePopup_22_listener","NavbarComponent_Template_app_registro_popup_registroSuccess_22_listener","NavbarComponent_Template_app_registro_popup_switchToLogin_22_listener","pureFunction0","_c1","_c2","tmp_7_0","profileForm","updateProfile","passwordModal","onPasswordConfirmed","updatedUser","updateUser","onPasswordCancelled","viewQuery","ProfileComponent_Query","ProfileComponent_Template_form_ngSubmit_3_listener","ProfileComponent_Template_app_password_confirm_modal_confirmed_44_listener","ProfileComponent_Template_app_password_confirm_modal_cancelled_44_listener","inject","factory","fac","providedIn","PRODUCT_FOLDER_MAP","folder","fallbackColor","dilatador","dilatadores","tnel","tunel","piercing","getFallbackImage","nombreOriginal","productConfig","findProductConfig","imagePath","getImagePathForProduct","keywordConfig","findByKeywords","typeConfig","findByProductType","productName","config","colorsFiltered","normalizedName","entries","normalizedKey","keywordMap","bisagra","corazon","triangulo","flecha","alas","gema","acrilico","acrlico","metal","acero","orfebre","mandala","silicona","nostril","ombligo","piedra","cni","coni","bola","duo","medusa","espiral","curvados","curvado","rosa","flor","keyword","typeMap","anillo","aro","banana","barbell","labret","plug","expander","circular","set","type","colorLower","colorsLower","fallbackLower","firstColor","hasColorVariant","getProductFolder","debugProduct","groupEnd","intercept","request","token","method","hasUser","hasToken","tokenPreview","clone","setHeaders","Authorization","hasCurrentUser","userKeys","handle","throwError","catchError","ErrorEvent","urlWithParams","statusText","headers","OrderUtils","toBackendFormat","iduser","fromBackendFormat","orderBackend","transformedLine","cartItemsToOrderLines","orderId","validateOrder","transform","categoriaId","categoryFolderMap","pure","BehaviorSubject","environment","apiUrl","storedUser","localStorage","getItem","currentUserSubject","asObservable","loginData","post","setItem","handleError","put","userToStore","isAdminUser","getToken","isLoggedIn","isAuthenticated","operation","userMessage","clientError","Error","originalError","_cartItems","_isCartOpen","loadCart","savedCart","updatedItems","openCart","add","cartModal","display","existingStyle","setCartVisibility","saveCart","itemsWithQuantity","getCartItems","getValue","currentItems","existingItemIndex","talla","newItem","itemId","getTotal","getItemCount","count","of","tap","categoriesCache","categoryCache","getSubcategories","newCategory","clearCache","delete","loginPopupStateSubject","getCurrentState","HttpHeaders","getAuthHeaders","checkAuthentication","getOrders","userId","ordersBackend","getOrder","validation","orderBackendData","orderFrontend","getOrderById","cancelOrder","patch","updateOrderStatus","getOrdersSummary","debug","enviarAlbaranPorEmail","pdfBase64","jsPDF","agregarPieDePagina","pdf","numeroPagina","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","yPosition","setFontSize","setTextColor","agregarEncabezadoTabla","lightGray","setFillColor","rect","setFont","align","Promise","resolve","reject","primaryColor","formatearFecha","linea","cantidadRaw","precioRaw","precioLinea","addPage","setDrawColor","output","date","selectedProductSubject","categoryUrl","PRODUCT_COLORS_MAP","getAvailableColorsForProduct","bestMatch","findBestPartialMatch","keywordMatch","typeMatch","score","calculateSimilarityScore","str1","str2","words1","w","words2","matchCount","totalWords","max","word1","word2","keywordMatches","typeMatches","formData","FormData","append","production","__NgCli_bootstrap_1","platformBrowser","bootstrapModule"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
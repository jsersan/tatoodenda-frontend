<!-- app.component.html - ARCHIVO COMPLETO -->

<!-- ✅ Overlay de carga mientras se despierta el backend -->
<div class="loading-overlay" *ngIf="showLoadingOverlay">
  <div class="loading-container">
    <div class="loading-spinner"></div>
    <h2 class="loading-title">Tatoodenda</h2>
    <p class="loading-text">Preparando tu experiencia...</p>
    <div class="loading-progress">
      <div class="progress-bar"></div>
    </div>
    <p class="loading-hint">
      {{ isBackendAwake ? 'Casi listo...' : 'Conectando con el servidor...' }}
    </p>
  </div>
</div>

<!-- Componente de encabezado que contiene el título de la tienda -->
<app-header></app-header>

<!-- Componente de barra de navegación con menús y opciones -->
<app-navbar></app-navbar>

<!-- Componente de banner rotativo que ahora aparece en todas las páginas -->
<app-banner></app-banner>

<!-- El enrutador de Angular que cargará dinámicamente los componentes según la URL -->
<router-outlet></router-outlet>

<!-- Componente de pie de página con información de contacto y enlaces -->
<app-footer></app-footer>

<!-- Componente de cart-popup para mostrar el carrito de compras -->
<app-cart></app-cart>

<!-- ✅ Login Popup - Se muestra cuando el guard lo requiere -->
<app-login-popup 
  [isVisible]="showLoginPopup"
  [returnUrl]="loginReturnUrl" 
  [fromCheckout]="loginFromCheckout"
  (closePopup)="onLoginPopupClose()"
  (loginSuccess)="onLoginSuccess($event)"
  (switchToRegistro)="onSwitchToRegister()">
</app-login-popup>

<!-- ✅ Registro Popup -->
<app-registro-popup 
  [isVisible]="showRegistroPopup"
  (closePopup)="onCloseRegistroPopup()"
  (registroSuccess)="onRegistroSuccess()"
  (switchToLogin)="onSwitchToLogin()">
</app-registro-popup>